{"version":3,"file":"index-Bulw3hAJ.js","sources":["../../src/shared/theme/themeStore.ts","../../src/shared/theme/ThemeProvider.tsx","../../src/i18n.ts","../../src/api/index.ts","../../src/api/login/loginUser.ts","../../src/api/register/register.ts","../../src/shared/validation/validation.ts","../../src/components/AuthForm/AuthForm.tsx","../../src/pages/auth-page/auth-page.tsx","../../src/components/LanguageSwitcher/LanguageSwitcher.tsx","../../src/api/notifications/createNotification.ts","../../src/api/notifications/getNotifications.ts","../../src/api/notifications/markAsRead.ts","../../src/api/notifications/deleteNotification.ts","../../src/components/Notifications/Notification.tsx","../../src/components/Navbar/Navbar.tsx","../../src/api/coaches/getCoaches.ts","../../src/api/coaches/getCoachById.ts","../../src/api/coaches/getCoachByEmail.ts","../../src/api/coaches/getStudentDetails.ts","../../src/api/coaches/getStudentIdsByCoach.ts","../../src/api/coaches/removeStudentFromCoach.ts","../../src/components/CoachesBlock/CoachesBlock.tsx","../../src/pages/home-page/home-page.tsx","../../src/pages/about-page/about-page.tsx","../../src/pages/achievements-page/achievements-page.tsx","../../src/components/PrivateRoute/PrivateRoute.tsx","../../src/api/profile/getProfile.ts","../../src/api/profile/updateProfile.ts","../../src/api/profile/getAvatarUrl.ts","../../src/components/Profile/EditProfileForm.tsx","../../src/api/schedule/getScheduleByStudent.ts","../../src/api/schedule/createScheduleEvent.ts","../../src/api/schedule/updateScheduleEvent.ts","../../src/api/schedule/deleteScheduleEvent.ts","../../src/pages/profile-page/profile-page.tsx","../../src/shared/components/CustomTable/CustomTable.tsx","../../src/pages/users-page/users-page.tsx","../../src/components/Schedule/EditScheduleModal.tsx","../../src/pages/students-page/students-page.tsx","../../src/features/Chess/engine/ChessGameEngine.tsx","../../src/features/Chess/hooks/useChessGame.ts","../../src/features/Chess/components/ChessBoard.tsx","../../src/features/Chess/components/MoveHistory.tsx","../../src/features/Chess/components/AnalysisPanel.tsx","../../src/features/Chess/pages/AnalysisPage.tsx","../../src/components/ChessGame/ChessBoard.tsx","../../src/components/PuzzleEditor/PuzzleEditor.tsx","../../src/api/email-verify/checkVerificationStatus.ts","../../src/api/email-verify/resendVerificationEmail.ts","../../src/pages/verify-email-page/verify-email-page.tsx","../../src/api/requests/fetchRequests.ts","../../src/api/requests/handleRequest.ts","../../src/api/requests/createRequest.ts","../../src/pages/coaches-page/coaches-page.tsx","../../src/api/homework/sendHomework.ts","../../src/api/homework/reviewHomework.ts","../../src/api/homework/getHomeworksForReview.ts","../../src/api/homework/getHomeworkScreenshot.ts","../../src/pages/inbox-page/inbox-page.tsx","../../src/components/StudentSchedule/StudentsSchedule.tsx","../../src/pages/students-shedule-page/students-shedule-page.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import { create } from 'zustand';\n\ninterface ThemeState {\n  theme: 'light' | 'dark';\n  toggleTheme: () => void;\n}\n\nexport const useThemeStore = create<ThemeState>((set) => ({\n  theme: (localStorage.getItem('theme') as 'light' | 'dark') || 'light',\n  toggleTheme: () =>\n    set((state) => {\n      const newTheme = state.theme === 'light' ? 'dark' : 'light';\n      localStorage.setItem('theme', newTheme);\n      return { theme: newTheme };\n    }),\n}));\n","import { createContext, useContext, useEffect } from 'react';\nimport { useThemeStore } from './themeStore';\n\n// 1. Создаем контекст\nconst ThemeContext = createContext({ toggleTheme: () => {}, mode: 'light' });\n\n// 2. Провайдер темы\nexport const ThemeProvider = ({ children }: { children: React.ReactNode }) => {\n  const { theme, toggleTheme } = useThemeStore();\n\n  useEffect(() => {\n    document.documentElement.setAttribute('data-theme', theme);\n  }, [theme]);\n\n  return (\n    <ThemeContext.Provider value={{ toggleTheme, mode: theme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n\n// 3. Кастомный хук для использования темы\nexport const useTheme = () => useContext(ThemeContext);\n","// src/i18n.ts\nimport i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport HttpBackend from 'i18next-http-backend';\n\ni18n\n  .use(HttpBackend)\n  .use(initReactI18next)\n  .init({\n    backend: {\n      loadPath: '/locales/{{lng}}/{{ns}}.json', \n    },\n    lng: 'en',\n    fallbackLng: 'en', \n    interpolation: {\n      escapeValue: false,\n    },\n    debug: true\n  });\n\nexport default i18n;\n","import axios, { AxiosResponse, AxiosError } from 'axios';\nimport { notification } from 'antd';\nimport i18n from '@/i18n'; \n\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3000/api'; \n\nconst axiosInstance = axios.create({\n  baseURL: API_URL,\n  withCredentials: true, \n});\n\nconst reduceMessage = (arr: string[]) => arr?.reduce((acc, item) => (acc += item), '');\nconst getIssueMessage = (error: AxiosError<any>, description: string) => {\n  notification.error({\n    message: 'Ошибка', \n    description,\n  });\n  return Promise.reject(error);\n};\n\naxiosInstance.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    const language = i18n.language; \n    if (language) {\n      config.headers['Accept-Language'] = language;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\naxiosInstance.interceptors.response.use(\n  (response: AxiosResponse) => response,\n  (error: AxiosError<any>) => {\n\n    if (error.response?.status === 401) {\n      notification.error({\n        message: 'Сессия истекла',\n        description: error.response?.data?.message || 'Пожалуйста, войдите в систему снова.',\n      });\n      \n      localStorage.removeItem('token');\n      localStorage.removeItem('user'); \n      \n      window.location.href = '/login'; \n\n      return new Promise(() => {});\n    }\n    \n    if (error.response?.status !== 504) { \n      if (error.message === 'Network Error' || !error.response) {\n        return getIssueMessage(error, 'Ошибка сети или сервер недоступен. Попробуйте позже.');\n      }\n      const data = error.response?.data;\n      let message = typeof data === 'string' ? data : '';\n      if (Array.isArray(data)) { return getIssueMessage(error, reduceMessage(data)); }\n      if (Array.isArray(data?.data)) { return getIssueMessage(error, reduceMessage(data.data)); }\n      if (data?.detail) { return getIssueMessage(error, data.detail); }\n      if (data instanceof Object) {\n        const description = data.msg || Object.keys(data).reduce(\n          (acc, key) => (acc += `${key}: ${data[key]?.[0] || data[key]} `),''\n        );\n        return getIssueMessage(error, description);\n      }\n      notification.error({\n        message: 'Ошибка',\n        description: message || error.message,\n      });\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default axiosInstance;","import axiosInstance from '@/api'; \nimport { LoginCredentials, LoginResponse } from '@/types/Auth'; \n\nexport const loginUser = async (credentials: LoginCredentials): Promise<LoginResponse> => {\n  const response = await axiosInstance.post('/auth/login', credentials);\n  \n  return response.data;\n};","import axiosInstance from '@/api'; \nimport { RegistrationData } from '@/types/Auth';\n\nexport const registerUser = async (data: RegistrationData) => {\n  try {\n    const response = await axiosInstance.post('/auth/register', data);\n    return response.data;\n  } catch (error) {\n    console.error('Registration failed', error);\n    throw error;\n  }\n};\n","import { Rule } from 'antd/es/form';\nimport { TFunction } from 'i18next'; \n\nexport const nameValidation = (t: TFunction): Rule[] => [\n  { required: true, message: t('validation.required') },\n  {\n    validator: (_, value) =>\n      value && value.length >= 2\n        ? Promise.resolve()\n        : Promise.reject(new Error(t('validation.name_length'))), \n  },\n];\n\nexport const loginValidation = (t: TFunction): Rule[] => [\n  { required: true, message: t('validation.required') },\n  { type: 'email', message: t('validation.invalid_email') },\n];\n\nexport const passwordValidation = (t: TFunction): Rule[] => [\n  { required: true, message: t('validation.required') },\n  { min: 6, message: t('validation.password_length') }, \n];","import React from 'react';\nimport Form, { FormProps } from 'antd/es/form';\nimport Input from 'antd/es/input';\nimport Button from 'antd/es/button';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'react-router-dom';\nimport { notification } from 'antd';\nimport Typography from 'antd/es/typography';\nimport { FaChessKing } from 'react-icons/fa';\n\nimport { loginUser } from '@/api/login';\nimport { registerUser } from '@/api/register/register';\nimport { LoginCredentials, RegistrationData } from '@/types/Auth';\nimport { loginValidation, passwordValidation, nameValidation } from '@/shared/validation';\n\nimport './styles.scss';\n\ninterface AuthFormProps {\n  mode: 'login' | 'register';\n}\n\nexport const AuthForm: React.FC<AuthFormProps> = ({ mode }) => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const isLoginMode = mode === 'login';\n\n  const handleLogin: FormProps<LoginCredentials>['onFinish'] = async (values) => {\n    try {\n      const { token, user } = await loginUser(values);\n      localStorage.setItem('token', token);\n      localStorage.setItem('user', JSON.stringify(user));\n      navigate('/profile', { replace: true });\n      notification.success({\n        message: t('auth.success.login_title'),\n        description: t('auth.success.welcome_back', { name: user.firstName }),\n      });\n    } catch (error) {\n      notification.error({\n        message: t('auth.errors.login'),\n        description: t('auth.errors.invalid_credentials'),\n      });\n    }\n  };\n\nconst handleRegister: FormProps<RegistrationData>['onFinish'] = async (values) => {\n  try {\n    const response = await registerUser(values);\n\n    const registeredEmail = response.email;\n\n    navigate('/verify-email', {\n      replace: true, \n      state: {\n        email: registeredEmail,\n        firstName: values.firstName,\n        lastName: values.lastName,\n      },\n    });\n\n    notification.success({\n      message: t('register.success.title'),\n      description: t('register.success.description'),\n    });\n\n  } catch (error) {\n    notification.error({\n      message: t('register.error.title'),\n      description: (error as any).response?.data?.msg || t('register.error.description'),\n    });\n  }\n};\n\n  return (\n    <div className=\"auth-form-container\">\n      <div className=\"auth-header\" onClick={() => navigate('/')}>\n        <FaChessKing className=\"auth-header__icon\" />\n        <Typography.Title level={4} className=\"auth-header__brand\">\n          {t('common.brand')} \n        </Typography.Title>\n      </div>\n      <Typography.Title level={3} className=\"auth-header__title\">\n        {isLoginMode ? t('auth.sign_in') : t('register.title')}\n      </Typography.Title>\n      \n      {/* --- Тело формы --- */}\n      <Form\n        name={mode}\n        onFinish={isLoginMode ? handleLogin : handleRegister}\n        layout=\"vertical\"\n        className=\"auth-form-body\"\n        size=\"large\"\n        autoComplete=\"off\"\n      >\n        {!isLoginMode && (\n          <>\n            <Form.Item label={<span className=\"auth-form-label\">{t('register.name')}</span>} name=\"firstName\" rules={nameValidation(t)}>\n              <Input placeholder={t('register.placeholder.name')} />\n            </Form.Item>\n            <Form.Item label={<span className=\"auth-form-label\">{t('register.lastName')}</span>} name=\"lastName\" rules={nameValidation(t)}>\n              <Input placeholder={t('register.placeholder.lastName')} />\n            </Form.Item>\n          </>\n        )}\n\n        <Form.Item label={<span className=\"auth-form-label\">{t('common.email')}</span>} name=\"email\" rules={loginValidation(t)}>\n          <Input placeholder={t('common.placeholder.email')} />\n        </Form.Item>\n\n        <Form.Item label={<span className=\"auth-form-label\">{t('common.password')}</span>} name=\"password\" rules={passwordValidation(t)}>\n          <Input.Password placeholder={t('common.placeholder.password')} />\n        </Form.Item>\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" className=\"auth-form-button\" block>\n            {isLoginMode ? t('auth.sign_in') : t('register.submit')}\n          </Button>\n        </Form.Item>\n      </Form>\n      \n      {/* --- Подвал формы --- */}\n      <div className=\"auth-form-footer\">\n        {isLoginMode ? (\n          <>\n            {t('auth.no_account')}{' '}\n            <a className=\"auth-form-link\" onClick={() => navigate('/register')}>\n              {t('auth.sign_up')}\n            </a>\n          </>\n        ) : (\n          <>\n            {t('register.haveAccount')}{' '}\n            <a className=\"auth-form-link\" onClick={() => navigate('/login')}>\n              {t('register.login')}\n            </a>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { AuthForm } from '@/components/AuthForm';\nimport './styles.scss';\n\nexport const AuthPage: React.FC = () => {\n  const location = useLocation();\n\n  const mode = location.pathname.includes('register') ? 'register' : 'login';\n\n  return (\n    <div className=\"auth-page-wrapper\">\n      <AuthForm mode={mode} />\n    </div>\n  );\n};","import React from 'react';\nimport { Select, MenuItem, SelectChangeEvent } from '@mui/material';\nimport { useTranslation } from 'react-i18next';\n\ninterface LanguageSwitcherProps {\n  className?: string;\n}\n\nexport const LanguageSwitcher: React.FC<LanguageSwitcherProps> = ({ className }) => {\n  const { i18n } = useTranslation();\n\n  const handleChange = (event: SelectChangeEvent<string>) => {\n    const selectedLanguage = event.target.value as string;\n    i18n.changeLanguage(selectedLanguage);\n  };\n\n  return (\n    <Select\n      value={i18n.language}\n      onChange={handleChange}\n      size=\"small\"\n      className={className} \n      style={{ color: 'black', borderColor: 'black' }}\n    >\n      <MenuItem value=\"en\">EN</MenuItem>\n      <MenuItem value=\"pl\">PL</MenuItem>\n      <MenuItem value=\"uk\">UA</MenuItem>\n    </Select>\n  );\n};\n","import axiosInstance from '@/api'; \n\ninterface NotificationPayload {\n  recipient: string;\n  type: string;\n  content: string;\n  metadata?: { [key: string]: any };\n}\n\nexport const createNotification = async (data: NotificationPayload) => {\n    const response = await axiosInstance.post('/notifications', data);\n    return response.data;\n};","import axiosInstance from '@/api'; \n\nexport const getNotifications = async () => {\n  const response = await axiosInstance.get('/notifications');\n  return response.data;\n};\n","import axiosInstance from '@/api';\n\nexport const markAsRead = async (notificationId: string) => {\n  const response = await axiosInstance.patch('/notifications', {}, {\n    params: {\n      notification_id: notificationId\n    }\n  });\n  return response.data;\n};","import axiosInstance from '@/api';\n\nexport const deleteNotification = async (notificationId: string) => {\n  const response = await axiosInstance.delete('/notifications', {\n    params: {\n      notification_id: notificationId\n    }\n  });\n  return response.data;\n};","import React, { useEffect, useState } from 'react';\nimport {\n  IconButton,\n  Badge,\n  Menu,\n  MenuItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  IconButton as MuiIconButton,\n  Divider,\n  Box,\n  Typography\n} from '@mui/material';\nimport NotificationsIcon from '@mui/icons-material/Notifications';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { getNotifications, markAsRead, deleteNotification } from '@/api/notifications';\n\ninterface Notification {\n  _id: string;\n  type: string;\n  content: string;\n  read: boolean;\n  createdAt: string;\n}\n\ninterface NotificationsProps {\n  navigateToRequests: () => void;\n}\n\nexport const Notifications: React.FC<NotificationsProps> = ({ navigateToRequests }) => {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\n  const open = Boolean(anchorEl);\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n  const fetchNotifications = async () => {\n    try {\n      const data = await getNotifications();\n      setNotifications(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Ошибка при получении уведомлений:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchNotifications();\n    const interval = setInterval(fetchNotifications, 30000); // Обновляем каждые 30 секунд\n    return () => clearInterval(interval); // Очищаем интервал при размонтировании\n  }, []);\n\n  const handleMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n    // При открытии можно пометить видимые как прочитанные или просто обновить\n    fetchNotifications(); \n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  // 👇 ИСПРАВЛЕНИЕ: Добавляем `event` в аргументы\n  const handleDeleteNotification = async (event: React.MouseEvent, notificationId: string) => {\n    event.stopPropagation(); // 👈 ГЛАВНОЕ ИСПРАВЛЕНИЕ! Останавливаем всплытие.\n    try {\n      await deleteNotification(notificationId);\n      // Оптимистичное обновление UI для мгновенной реакции\n      setNotifications(prev => prev.filter(n => n._id !== notificationId));\n    } catch (error) {\n      console.error('Ошибка при удалении уведомления:', error);\n    }\n  };\n\n  const handleNotificationClick = (notification: Notification) => {\n    // Помечаем как прочитанное, только если оно не было прочитано\n    if (!notification.read) {\n      markAsRead(notification._id);\n      // Оптимистичное обновление\n      setNotifications(prev => prev.map(n => n._id === notification._id ? { ...n, read: true } : n));\n    }\n\n    // Если это заявка, переходим во \"Входящие\"\n    if (notification.type === 'request' || notification.type === 'homework_submission') {\n      navigateToRequests();\n    }\n    \n    handleMenuClose();\n  };\n  \n  const handleViewAllClick = () => {\n    navigateToRequests();\n    handleMenuClose();\n  }\n\n  return (\n    <div>\n      <IconButton color=\"inherit\" onClick={handleMenuOpen}>\n        <Badge badgeContent={unreadCount} color=\"error\">\n          <NotificationsIcon />\n        </Badge>\n      </IconButton>\n      <Menu\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleMenuClose}\n        PaperProps={{\n          style: {\n            maxHeight: 300,\n            width: '400px',\n          },\n        }}\n      >\n        <Box sx={{ p: 2, borderBottom: '1px solid #eee' }}>\n            <Typography variant=\"h6\">Уведомления</Typography>\n        </Box>\n        {notifications.length === 0 ? (\n          <MenuItem disabled>Уведомлений нет</MenuItem>\n        ) : (\n          notifications.map((notification) => (\n            <MenuItem\n              key={notification._id}\n              onClick={() => handleNotificationClick(notification)}\n              sx={{ \n                bgcolor: notification.read ? 'transparent' : 'action.hover',\n                whiteSpace: 'normal',\n                alignItems: 'flex-start'\n              }}\n            >\n              <ListItemText\n                primary={notification.content}\n                secondary={new Date(notification.createdAt).toLocaleString()}\n              />\n              <ListItemSecondaryAction>\n                {/* 👇 Передаем `event` в обработчик */}\n                <MuiIconButton\n                  edge=\"end\"\n                  aria-label=\"delete\"\n                  onClick={(event) => handleDeleteNotification(event, notification._id)}\n                >\n                  <DeleteIcon fontSize=\"small\" />\n                </MuiIconButton>\n              </ListItemSecondaryAction>\n            </MenuItem>\n          ))\n        )}\n        <Divider />\n        <MenuItem onClick={handleViewAllClick}>\n            <ListItemText primary=\"Посмотреть все во 'Входящих'\" sx={{ textAlign: 'center' }} />\n        </MenuItem>\n      </Menu>\n    </div>\n  );\n};","import React, { useState } from 'react';\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  IconButton,\n  Drawer,\n  List,\n  ListItemButton,\n  ListItemText,\n  Divider,\n  Box,\n  Button,\n  ListItemIcon,\n} from '@mui/material';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport { useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { LanguageSwitcher } from '../LanguageSwitcher/LanguageSwitcher';\nimport {\n  HomeOutlined,\n  InfoCircleOutlined,\n  TrophyOutlined,\n  TeamOutlined,\n  PlayCircleOutlined,\n  UserOutlined,\n  LogoutOutlined,\n  CloseOutlined,\n  RocketOutlined, \n} from '@ant-design/icons';\nimport './styles.scss';\nimport { Notifications } from '@/components/Notifications/Notification';\n\nexport const Navbar: React.FC = () => {\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n\n  const userString = localStorage.getItem('user');\n  let user = null;\n  try {\n    if (userString && userString !== 'undefined' && userString !== 'null') {\n      user = JSON.parse(userString);\n    }\n  } catch (error) {\n    console.error('Error parsing user from localStorage:', error);\n    user = null;\n  }\n\n  const token = localStorage.getItem('token');\n  const isAuthenticated = !!token && !!user;\n  const isAdmin = user?.roles?.includes('admin');\n  const isCoach = user?.roles?.includes('coach');\n  const isStudent = user?.roles?.includes('student');\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setIsDrawerOpen(false);\n    navigate('/login');\n  };\n\n  const handleGetStarted = () => {\n    setIsDrawerOpen(false);\n    navigate('/register');\n  };\n\n  const navigateToRequests = () => {\n    navigate('/inbox'); \n  };\n\n  const toggleDrawer = (open: boolean) => () => {\n    setIsDrawerOpen(open);\n  };\n\n  const handleMenuClick = (path: string) => {\n    setIsDrawerOpen(false);\n    navigate(path);\n  };\n\n  return (\n    <>\n      <AppBar position=\"static\" className=\"navbar-appbar\">\n        <Toolbar className=\"navbar-toolbar\">\n          <Typography variant=\"h6\" className=\"navbar-title\" onClick={() => navigate('/')}>\n            {t('navbar.chessSchool')}\n          </Typography>\n          \n          <Box className=\"navbar-controls\">\n            {!isAuthenticated && (\n              <Box sx={{ display: { xs: 'none', md: 'flex' }, alignItems: 'center' }}>\n                <Button color=\"inherit\" onClick={() => navigate('/login')}>{t('navbar.login')}</Button>\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => navigate('/register')} sx={{ ml: 1 }}>{t('navbar.register')}</Button>\n              </Box>\n            )}\n\n            {isAuthenticated && (\n              <Notifications navigateToRequests={navigateToRequests} />\n            )}\n\n            <IconButton\n              edge=\"end\"\n              color=\"inherit\"\n              aria-label=\"menu\"\n              onClick={toggleDrawer(true)}\n              className=\"navbar-menu-button\"\n            >\n              <MenuIcon />\n            </IconButton>\n          </Box>\n        </Toolbar>\n      </AppBar>\n\n      <Drawer anchor=\"right\" open={isDrawerOpen} onClose={toggleDrawer(false)}>\n        <Box className=\"navbar-drawer\">\n          <Box className=\"drawer-header\">\n            <IconButton onClick={toggleDrawer(false)} className=\"close-button\">\n              <CloseOutlined className=\"close-icon\" />\n            </IconButton>\n          </Box>\n          \n          <List className=\"menu-list\">\n            {/* Общие пункты меню */}\n            <ListItemButton onClick={() => handleMenuClick('/')} className=\"menu-item\">\n              <ListItemIcon><HomeOutlined /></ListItemIcon>\n              <ListItemText primary={t('navbar.home')} />\n            </ListItemButton>\n            <ListItemButton onClick={() => handleMenuClick('/about')} className=\"menu-item\">\n              <ListItemIcon><InfoCircleOutlined /></ListItemIcon>\n              <ListItemText primary={t('navbar.aboutUs')} />\n            </ListItemButton>\n            <ListItemButton onClick={() => handleMenuClick('/achievements')} className=\"menu-item\">\n              <ListItemIcon><TrophyOutlined /></ListItemIcon>\n              <ListItemText primary={t('navbar.achievements')} />\n            </ListItemButton>\n            <ListItemButton onClick={() => handleMenuClick('/coaches')} className=\"menu-item\">\n              <ListItemIcon><TeamOutlined /></ListItemIcon>\n              <ListItemText primary={t('navbar.coaches')} />\n            </ListItemButton>\n            \n            {/* 👇 ВОССТАНОВИЛ РАЗДЕЛИТЕЛИ МЕЖДУ СЕМАНТИЧЕСКИМИ БЛОКАМИ */}\n            {isAuthenticated && <Divider sx={{ borderColor: 'rgba(255, 255, 255, 0.12)' }} />}\n\n            {/* Меню для авторизованных пользователей */}\n            {isAuthenticated && (\n              <>\n                <ListItemButton onClick={() => handleMenuClick('/analysis')} className=\"menu-item\">\n                  <ListItemIcon><PlayCircleOutlined /></ListItemIcon>\n                  <ListItemText primary={t('navbar.chessGame')} />\n                </ListItemButton>\n                <ListItemButton onClick={() => handleMenuClick('/profile')} className=\"menu-item\">\n                  <ListItemIcon><UserOutlined /></ListItemIcon>\n                  <ListItemText primary={t('navbar.profile')} />\n                </ListItemButton>\n              </>\n            )}\n\n            {(isCoach || isAdmin || isStudent) && <Divider sx={{ borderColor: 'rgba(255, 255, 255, 0.12)' }} />}\n            \n            {/* Меню для ролей */}\n            {(isCoach || isAdmin) && (\n              <ListItemButton onClick={() => handleMenuClick('/students')} className=\"menu-item\">\n                <ListItemIcon><TeamOutlined /></ListItemIcon>\n                <ListItemText primary={t('navbar.students')} />\n              </ListItemButton>\n            )}\n            {(isCoach || isAdmin || isStudent) && (\n              <ListItemButton onClick={() => handleMenuClick('/students-shedule')} className=\"menu-item\">\n                <ListItemIcon><TeamOutlined /></ListItemIcon>\n                <ListItemText primary={t('navbar.students-shedule')} />\n              </ListItemButton>\n            )}\n            {isAdmin && (\n              <ListItemButton onClick={() => handleMenuClick('/users')} className=\"menu-item\">\n                <ListItemIcon><TeamOutlined /></ListItemIcon>\n                <ListItemText primary={t('navbar.users')} />\n              </ListItemButton>\n            )}\n          </List>\n\n          <Box className=\"drawer-bottom-actions\">\n            {isAuthenticated ? (\n              <Button onClick={handleLogout} className=\"logout-button\">\n                <LogoutOutlined />\n                {t('navbar.logout')}\n              </Button>\n            ) : (\n              <Button onClick={handleGetStarted} className=\"get-started-button\" variant=\"contained\" color=\"secondary\">\n                <RocketOutlined style={{ marginRight: '8px' }}/>\n                {t('navbar.getStarted')}\n              </Button>\n            )}\n\n            <LanguageSwitcher className=\"language-switcher\" />\n          </Box>\n        </Box>\n      </Drawer>\n    </>\n  );\n};","import axiosInstance from '@/api'; \n\nexport const getCoaches = async () => {\n  const response = await axiosInstance.get('/coaches');\n  return response.data;\n};","import axiosInstance from '@/api'; \nimport { User } from '@/types/User';\n\nexport const getCoachById = async (coachId: string): Promise<User> => {\n    const response = await axiosInstance.get(`/coach/${coachId}`);\n    return response.data;\n};","import axiosInstance from '@/api'; \n\nexport const getCoachesByEmail = async (emails: string[]) => {\n    const response = await axiosInstance.post('/auth/coaches-by-email', { emails });\n    return response.data;\n  };","import axiosInstance from '@/api';\nimport { Student } from '@/types/Student'; \n\nexport const getStudentDetails = async (coachEmail: string, studentId: string): Promise<Student | null> => {\n    const response = await axiosInstance.get('/trainer/student', {\n      params: { coachEmail, studentId },\n    });\n    return response.data;\n};\n","import axiosInstance from '@/api';\n\n\nexport const getStudentIdsByCoach = async (coachEmail: string): Promise<string[]> => {\n  const response = await axiosInstance.get('/trainer/students', {\n    params: { coachEmail }, \n  });\n  return response.data;\n};","import axiosInstance from '@/api';\n\nexport const removeStudentFromCoach = async (coachEmail: string, studentId: string): Promise<void> => {\n  await axiosInstance.delete('/trainer/remove-student', {\n    params: { coachEmail, studentId },\n  });\n};","import { useEffect, useState } from \"react\";\nimport {\n  Box,\n  Typography,\n  Button,\n  Grid,\n  Card,\n  CardContent,\n  CardMedia,\n} from \"@mui/material\";\nimport { useNavigate } from 'react-router-dom';\nimport StarIcon from \"@mui/icons-material/Star\";\nimport { useTranslation } from \"react-i18next\";\nimport { getCoachesByEmail } from \"@/api/coaches\";\nimport { Coach } from \"@/types/Coach\";\n\n\nexport const CoachesBlock = () => {\n      const { t } = useTranslation();\n      const navigate = useNavigate();\n      const [coaches, setCoaches] = useState<Coach[]>([]);\n\n      useEffect(() => {\n        const fetchCoaches = async () => {\n            const data = await getCoachesByEmail([\"ad3@example.com\", \"ad7@example.com\"]);\n            setCoaches(data);\n        };\n    \n        fetchCoaches();\n      }, []);\n\n    return (\n              <Box py={10} px={2} sx={{ backgroundColor: \"#111\" }}>\n                <Typography variant=\"h4\" fontWeight=\"bold\" textAlign=\"center\" mb={6}>\n                  {t(\"homePage.coaches.title\")}\n                </Typography>\n                <Grid container spacing={4} justifyContent=\"center\">\n                  {coaches.map((coach) => (\n                    <Grid item xs={12} sm={6} md={3} key={coach._id}>\n                      <Card\n                        sx={{\n                          backgroundColor: \"#1a1a1a\",\n                          color: \"white\",\n                          borderRadius: 3,\n                          boxShadow: 4,\n                          position: \"relative\",\n                          '&:hover .hoverAction': {\n                            opacity: 1,\n                          },\n                        }}\n                      >\n                        <CardMedia\n                          component=\"img\"\n                          height=\"200\"\n                          image={coach.photoUrl || \"/images/default-avatar.png\"}\n                          alt={`${coach.firstName} ${coach.lastName}`}\n                        />\n                        <CardContent>\n                          <Typography variant=\"h6\">\n                            {coach.firstName} {coach.lastName}\n                          </Typography>\n                          <Typography variant=\"body2\" color=\"gray\">\n                          </Typography>\n                          <Box mt={1}>\n                            {[...Array(5)].map((_, i) => (\n                              <StarIcon key={i} sx={{ color: \"#FFD700\", fontSize: 20 }} />\n                            ))}\n                          </Box>\n                        </CardContent>\n                        <Box\n                          className=\"hoverAction\"\n                          sx={{\n                            position: \"absolute\",\n                            bottom: 16,\n                            left: 0,\n                            right: 0,\n                            textAlign: \"center\",\n                            opacity: 0,\n                            transition: \"0.3s\",\n                          }}\n                        >\n                          <Button variant=\"contained\"   \n                          onClick={() => navigate(\"/coaches\", { state: { coach } })}\n                          sx={{ backgroundColor: \"#FFD700\", color: \"black\" }}>\n                            {t(\"homePage.coaches.selectCoach\")}\n                          </Button>\n                        </Box>\n                      </Card>\n                    </Grid>\n                  ))}\n                </Grid>\n              </Box>\n    )\n}","import { Box, Typography, Button, Grid, Paper, Container, Divider } from \"@mui/material\";\nimport { useNavigate } from 'react-router-dom';\nimport { useTranslation } from \"react-i18next\";\nimport { CoachesBlock } from \"@/components/CoachesBlock/CoachesBlock\";\nimport SchoolIcon from '@mui/icons-material/School';\nimport GroupIcon from '@mui/icons-material/Group';\n\nexport const Home = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const currentYear = new Date().getFullYear();\n\n  // Data for sections to avoid repetition\n  const whyChessItems = [\n    { icon: \"🎯\", key: \"analytics\", descKey: \"descAnalytics\" },\n    { icon: \"🧠\", key: \"memory\", descKey: \"descMemory\" },\n    { icon: \"🏆\", key: \"spirit\", descKey: \"descSpirit\" },\n  ];\n\n  const howItWorksSteps = [\n    { num: \"1\", titleKey: \"step1Title\", descKey: \"step1Desc\" },\n    { num: \"2\", titleKey: \"step2Title\", descKey: \"step2Desc\" },\n    { num: \"3\", titleKey: \"step3Title\", descKey: \"step3Desc\" },\n  ];\n\n  const formatItems = [\n    { type: \"individual\", icon: <SchoolIcon sx={{ fontSize: 40, mb: 2, color: \"#FFD700\" }} />, descKey: \"descIndividual\", buttonKey: \"schedule\", path: \"/coaches\" },\n    { type: \"group\", icon: <GroupIcon sx={{ fontSize: 40, mb: 2, color: \"#FFD700\" }} />, descKey: \"descGroup\", buttonKey: \"learnMore\", path: \"/classes\" },\n  ];\n\n  return (\n    <Box sx={{ backgroundColor: \"#0e0e0e\", color: \"white\", fontFamily: \"'Inter', sans-serif\" }}>\n      {/* Hero Section */}\n      <Box\n        sx={{\n          backgroundImage: {\n            xs: 'url(\"/images/chess-cinematic-mb.jpg\")',\n            sm: 'url(\"/images/chess-cinematic-tablet.jpg\")',\n            lg: 'url(\"/images/chess-cinematic-lg.jpg\")',\n          },\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\",\n          py: { xs: 10, md: 20 },\n          textAlign: \"center\",\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          px: 2,\n        }}\n      >\n        <Container maxWidth=\"md\">\n          <Typography variant=\"h2\" component=\"h1\" fontWeight=\"bold\">{t(\"homePage.hero.title\")}</Typography>\n          <Typography variant=\"h5\" mt={2} sx={{ color: 'rgba(255, 255, 255, 0.9)' }}>{t(\"homePage.hero.subtitle\")}</Typography>\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            onClick={() => navigate(\"/coaches\")}\n            sx={{\n              mt: 4,\n              px: 5,\n              py: 1.5,\n              borderRadius: \"30px\",\n              boxShadow: '0px 8px 20px rgba(255, 215, 0, 0.3)',\n              backgroundColor: \"#FFD700\",\n              color: \"black\",\n              fontWeight: \"bold\",\n              '&:hover': { backgroundColor: \"#FFC107\", transform: 'translateY(-2px)', boxShadow: '0px 10px 25px rgba(255, 215, 0, 0.4)' },\n              transition: 'all 0.3s ease',\n            }}\n            startIcon={<span style={{ fontSize: '1.5rem' }}>♟️</span>}\n          >\n            {t(\"homePage.hero.start\")}\n          </Button>\n        </Container>\n      </Box>\n\n      {/* Why Chess Section */}\n      <Container maxWidth=\"lg\" sx={{ py: 10 }}>\n        <Typography variant=\"h3\" component=\"h2\" fontWeight=\"bold\" textAlign=\"center\" mb={8}>\n          {t(\"homePage.why.title\")}\n        </Typography>\n        <Grid container spacing={4} justifyContent=\"center\">\n          {whyChessItems.map(({ icon, key, descKey }) => (\n            <Grid item xs={12} sm={6} md={4} key={key}>\n              <Paper\n                elevation={6}\n                sx={{\n                  p: 4,\n                  textAlign: \"center\",\n                  borderRadius: 4,\n                  backgroundColor: \"rgba(255,255,255,0.05)\",\n                  backdropFilter: \"blur(10px)\",\n                  transition: \"all 0.3s ease\",\n                  color: \"white\",\n                  height: '100%',\n                  '&:hover': {\n                    transform: \"translateY(-10px)\",\n                    backgroundColor: \"rgba(255,255,255,0.1)\",\n                  },\n                }}\n              >\n                <Box fontSize=\"3.5rem\">{icon}</Box>\n                <Typography variant=\"h5\" component=\"h3\" mt={2} fontWeight=\"bold\">\n                  {t(`homePage.why.${key}`)}\n                </Typography>\n                <Typography mt={1.5} sx={{ color: 'rgba(255, 255, 255, 0.7)' }}>\n                  {t(`homePage.why.${descKey}`)}\n                </Typography>\n              </Paper>\n            </Grid>\n          ))}\n        </Grid>\n      </Container>\n      \n      {/* Coaches Block Section */}\n      <Box sx={{ py: 5 }}>\n         <CoachesBlock />\n      </Box>\n      \n      {/* How It Works Section */}\n      <Box sx={{ py: 10, backgroundColor: '#121212' }}>\n        <Container maxWidth=\"lg\">\n            <Typography variant=\"h3\" component=\"h2\" fontWeight=\"bold\" textAlign=\"center\" mb={8}>\n              {t(\"homePage.howItWorks.title\")}\n            </Typography>\n            <Grid container spacing={5}>\n              {howItWorksSteps.map(({ num, titleKey, descKey }) => (\n                <Grid item xs={12} md={4} key={num}>\n                  <Box sx={{ textAlign: { xs: 'center', md: 'left' } }}>\n                    <Typography variant=\"h1\" component=\"div\" fontWeight=\"bold\" sx={{ color: '#FFD700', opacity: 0.5 }}>\n                      {num}\n                    </Typography>\n                    <Typography variant=\"h5\" component=\"h3\" fontWeight=\"bold\" mt={1}>\n                      {t(`homePage.howItWorks.${titleKey}`)}\n                    </Typography>\n                    <Typography mt={1.5} sx={{ color: 'rgba(255, 255, 255, 0.7)' }}>\n                      {t(`homePage.howItWorks.${descKey}`)}\n                    </Typography>\n                  </Box>\n                </Grid>\n              ))}\n            </Grid>\n        </Container>\n      </Box>\n      \n      {/* Formats Section */}\n      <Container maxWidth=\"lg\" sx={{ py: 10 }}>\n        <Typography variant=\"h3\" component=\"h2\" fontWeight=\"bold\" textAlign=\"center\" mb={8}>\n          {t(\"homePage.formats.title\")}\n        </Typography>\n        <Grid container spacing={4} justifyContent=\"center\">\n          {formatItems.map(({ type, icon, descKey, buttonKey, path }) => (\n            <Grid item xs={12} md={5} key={type}>\n              <Paper\n                elevation={6}\n                sx={{\n                  p: 4,\n                  backgroundColor: \"#1c1c1c\",\n                  color: \"white\",\n                  borderRadius: 4,\n                  textAlign: \"center\",\n                  transition: 'background-color 0.3s ease',\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center',\n                  height: '100%',\n                  '&:hover': { backgroundColor: \"#2a2a2a\" },\n                }}\n              >\n                {icon}\n                <Typography variant=\"h5\" component=\"h3\" fontWeight=\"bold\">\n                  {t(`homePage.formats.${type}`)}\n                </Typography>\n                <Typography mt={1.5} sx={{ color: 'rgba(255, 255, 255, 0.7)', flexGrow: 1 }}>\n                  {t(`homePage.formats.${descKey}`)}\n                </Typography>\n                <Button \n                  variant=\"outlined\" \n                  onClick={() => navigate(path)}\n                  sx={{ \n                    mt: 3, \n                    color: \"#FFD700\", \n                    borderColor: '#FFD700', \n                    borderRadius: '20px',\n                    '&:hover': { borderColor: '#FFC107', backgroundColor: 'rgba(255, 215, 0, 0.1)' }\n                  }}\n                >\n                  {t(`homePage.formats.${buttonKey}`)} →\n                </Button>\n              </Paper>\n            </Grid>\n          ))}\n        </Grid>\n      </Container>\n\n      {/* Footer */}\n      <Box component=\"footer\" py={6} px={2} sx={{ backgroundColor: \"#0b0b0b\", color: \"gray\" }}>\n        <Container maxWidth=\"lg\">\n          <Grid container spacing={5}>\n            <Grid item xs={12} sm={4}>\n              <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ color: 'white' }}>{t(\"homePage.footer.name\")}</Typography>\n              <Typography variant=\"body2\" sx={{ mt: 1, color: 'rgba(255,255,255,0.5)' }}>{t(\"homePage.footer.desc\")}</Typography>\n            </Grid>\n            <Grid item xs={6} sm={2}>\n               <Typography fontWeight=\"bold\" sx={{ color: 'white' }}>{t(\"homePage.footer.company\")}</Typography>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.about\")}</Button>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.blog\")}</Button>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.coaches\")}</Button>\n            </Grid>\n             <Grid item xs={6} sm={2}>\n               <Typography fontWeight=\"bold\" sx={{ color: 'white' }}>{t(\"homePage.footer.resources\")}</Typography>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.faq\")}</Button>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.contact\")}</Button>\n            </Grid>\n             <Grid item xs={6} sm={2}>\n               <Typography fontWeight=\"bold\" sx={{ color: 'white' }}>{t(\"homePage.footer.legal\")}</Typography>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.privacy\")}</Button>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.terms\")}</Button>\n            </Grid>\n          </Grid>\n          <Divider sx={{ my: 4, borderColor: 'rgba(255, 255, 255, 0.1)' }} />\n          <Typography variant=\"body2\" textAlign=\"center\" sx={{ color: 'rgba(255,255,255,0.4)' }}>\n            {t(\"homePage.footer.copyright\", { year: currentYear })}\n          </Typography>\n        </Container>\n      </Box>\n    </Box>\n  );\n};","import React, { useEffect, useState, useMemo } from 'react';\nimport { Box, Container, Typography, Grid, Paper, Button, Stack, Divider } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { CSSTransition, SwitchTransition } from 'react-transition-group';\n\n// Иконки\n// import SchoolIcon from '@mui/icons-material/School';\n// import GroupIcon from '@mui/icons-material/Group';\n// import EmojiEventsIcon from '@mui/icons-material/EmojiEvents';\nimport TrackChangesIcon from '@mui/icons-material/TrackChanges';\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\n\n// Импорт CSS для анимации (убедитесь, что путь правильный)\nimport './styles.scss';\n\n// Типизация для удобства\ninterface Testimonial { name: string; quote: string; }\ninterface CoachTeaser { name: string; quote: string; }\ninterface WhyUsCard { icon: string; title: string; description: string; }\ninterface HowItWorksStep { step: string; desc: string; }\n\nexport const About: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n\n  // Используем useMemo для безопасного получения и типизации данных из i18next\n  const phrases = useMemo(\n    () => (t('aboutPage.phrases', { returnObjects: true }) as string[]) || [],\n    [t]\n  );\n  \n  const testimonials = useMemo(\n    () => (t('aboutPage.testimonials.reviews', { returnObjects: true }) as Testimonial[]) || [],\n    [t]\n  );\n\n  const coaches = useMemo(\n    () => (t('aboutPage.ourCoaches.coaches', { returnObjects: true }) as CoachTeaser[]) || [],\n    [t]\n  );\n\n  const whyUsCards = useMemo(\n    () => (t('aboutPage.whyUs.cards', { returnObjects: true }) as WhyUsCard[]) || [],\n    [t]\n  );\n  \n  const howItWorksSteps = useMemo(\n    () => (t('aboutPage.howItWorks.steps', { returnObjects: true }) as HowItWorksStep[]) || [],\n    [t]\n  );\n  \n  const missionPoints = useMemo(\n    () => (t('aboutPage.mission.points', { returnObjects: true }) as string[]) || [],\n    [t]\n  );\n\n\n  const [currentPhraseIndex, setCurrentPhraseIndex] = useState(0);\n  const [currentTestimonialIndex, setCurrentTestimonialIndex] = useState(0);\n\n  useEffect(() => {\n    // Эта проверка важна, чтобы избежать ошибок, если данные еще не загрузились\n    if (phrases.length === 0 || testimonials.length === 0) return;\n\n    const phraseInterval = setInterval(() => {\n      setCurrentPhraseIndex((prev) => (prev + 1) % phrases.length);\n    }, 4000);\n    const testimonialInterval = setInterval(() => {\n      setCurrentTestimonialIndex((prev) => (prev + 1) % testimonials.length);\n    }, 5000);\n    \n    return () => {\n      clearInterval(phraseInterval);\n      clearInterval(testimonialInterval);\n    };\n  }, [phrases.length, testimonials.length]);\n\n  return (\n    <Box sx={{ bgcolor: '#0e0e0e', color: 'white' }}>\n      {/* Hero Section */}\n      <Box sx={{\n        position: 'relative',\n        py: { xs: 10, md: 15 },\n        textAlign: 'center',\n        backgroundImage: 'linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.8)), url(\"/images/chess-cinematic-lg.jpg\")',\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundAttachment: 'fixed',\n      }}>\n        <Container maxWidth=\"md\">\n          <Typography variant=\"h2\" component=\"h1\" fontWeight=\"bold\" sx={{ textTransform: 'uppercase', letterSpacing: '2px' }}>\n            {t('aboutPage.mainTitle')}\n          </Typography>\n          <Box sx={{ height: '2.5em', my: 2 }}>\n            <SwitchTransition mode=\"out-in\">\n              <CSSTransition key={currentPhraseIndex} timeout={300} classNames=\"fade\">\n                <Typography variant=\"h5\" sx={{ color: '#FFD700', fontStyle: 'italic' }}>\n                  {phrases.length > 0 ? phrases[currentPhraseIndex] : ''}\n                </Typography>\n              </CSSTransition>\n            </SwitchTransition>\n          </Box>\n          <Stack direction={{ xs: 'column', sm: 'row' }} justifyContent=\"center\" spacing={2} mt={4}>\n            <Button variant=\"contained\" onClick={() => navigate('/register')} size=\"large\" sx={{ bgcolor: '#FFD700', color: 'black', borderRadius: '30px', px: 5, '&:hover': { bgcolor: '#FFC107' } }}>\n              {t('aboutPage.ctaStudent')}\n            </Button>\n            <Button variant=\"outlined\" onClick={() => navigate('/coaches')} size=\"large\" sx={{ color: 'white', borderColor: 'rgba(255,255,255,0.5)', borderRadius: '30px', px: 5, '&:hover': { borderColor: 'white', bgcolor: 'rgba(255,255,255,0.1)' } }}>\n              {t('aboutPage.ctaCoaches')}\n            </Button>\n          </Stack>\n        </Container>\n      </Box>\n\n      {/* Main Content */}\n      <Container maxWidth=\"lg\" sx={{ py: 8 }}>\n\n        {/* Mission Section */}\n        <Box sx={{ textAlign: 'center', my: 8 }}>\n          <Stack direction=\"row\" spacing={2} justifyContent=\"center\" alignItems=\"center\" sx={{ color: '#FFD700', mb: 1 }}>\n            <TrackChangesIcon fontSize=\"large\" />\n            <Typography variant=\"h4\" component=\"h2\" fontWeight=\"bold\">{t('aboutPage.mission.title')}</Typography>\n          </Stack>\n          <Typography variant=\"h6\" sx={{ maxWidth: 720, mx: 'auto', color: 'rgba(255,255,255,0.7)', mb: 3 }}>\n            {t('aboutPage.mission.subtitle')}\n          </Typography>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2} justifyContent=\"center\">\n            {missionPoints.map((point, i) => (\n              <Stack direction=\"row\" alignItems=\"center\" spacing={1} key={i}>\n                <CheckCircleOutlineIcon sx={{ color: 'success.main' }}/>\n                <Typography>{point}</Typography>\n              </Stack>\n            ))}\n          </Stack>\n        </Box>\n        \n        <Divider sx={{ my: 8, borderColor: 'rgba(255,255,255,0.2)' }} />\n\n        {/* Why Us Section */}\n        <Box sx={{ my: 8 }}>\n          <Typography variant=\"h4\" component=\"h2\" fontWeight=\"bold\" align=\"center\" sx={{ mb: 6 }}>\n            {t('aboutPage.whyUs.title')}\n          </Typography>\n          <Grid container spacing={4}>\n            {whyUsCards.map((card, i) => (\n              <Grid item xs={12} md={4} key={i}>\n                <Paper sx={{ p: 4, bgcolor: '#1c1c1c', borderRadius: 4, textAlign: 'center', height: '100%', transition: 'all 0.3s ease', '&:hover': { transform: 'translateY(-10px)', boxShadow: '0 10px 20px rgba(255,215,0,0.15)' }}}>\n                  <Typography fontSize=\"3rem\">{card.icon}</Typography>\n                  <Typography variant=\"h6\" fontWeight=\"bold\" my={1}>{card.title}</Typography>\n                  <Typography sx={{ color: 'rgba(255,255,255,0.6)' }}>{card.description}</Typography>\n                </Paper>\n              </Grid>\n            ))}\n          </Grid>\n        </Box>\n\n        {/* How It Works Section */}\n        <Box sx={{ my: 8, py: 6, bgcolor: '#1c1c1c', borderRadius: 4 }}>\n          <Typography variant=\"h4\" component=\"h2\" fontWeight=\"bold\" align=\"center\" sx={{ mb: 6 }}>\n            {t('aboutPage.howItWorks.title')}\n          </Typography>\n          <Grid container spacing={4} sx={{ px: 4 }}>\n            {howItWorksSteps.map((item, idx) => (\n              <Grid item xs={12} md={4} key={idx}>\n                <Stack direction=\"row\" spacing={2} alignItems=\"center\">\n                  <Typography variant=\"h2\" fontWeight=\"bold\" sx={{ color: '#FFD700', opacity: 0.5 }}>{`0${idx + 1}`}</Typography>\n                  <Box>\n                    <Typography variant=\"h6\" fontWeight=\"bold\">{item.step}</Typography>\n                    <Typography sx={{ color: 'rgba(255,255,255,0.6)' }}>{item.desc}</Typography>\n                  </Box>\n                </Stack>\n              </Grid>\n            ))}\n          </Grid>\n        </Box>\n\n        {/* Testimonials & Coaches */}\n        <Grid container spacing={8} sx={{ my: 8 }}>\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"h4\" component=\"h2\" fontWeight=\"bold\" sx={{ mb: 3 }}>\n              {t('aboutPage.testimonials.title')}\n            </Typography>\n            <Paper sx={{ p: 4, bgcolor: '#1c1c1c', borderRadius: 4, minHeight: 180 }}>\n              <SwitchTransition>\n                <CSSTransition key={currentTestimonialIndex} timeout={300} classNames=\"fade\">\n                  <Box>\n                    {testimonials.length > 0 ? (\n                      <>\n                        <Typography fontStyle=\"italic\" fontSize=\"1.1rem\" sx={{ color: 'rgba(255,255,255,0.8)' }}>\n                          “{testimonials[currentTestimonialIndex].quote}”\n                        </Typography>\n                        <Typography fontWeight=\"bold\" mt={2} sx={{ color: '#FFD700' }}>\n                          — {testimonials[currentTestimonialIndex].name}\n                        </Typography>\n                      </>\n                    ) : null}\n                  </Box>\n                </CSSTransition>\n              </SwitchTransition>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"h4\" component=\"h2\" fontWeight=\"bold\" sx={{ mb: 3 }}>\n              {t('aboutPage.ourCoaches.title')}\n            </Typography>\n            <Stack spacing={2}>\n              {coaches.map((coach, idx) => (\n                <Paper key={idx} sx={{ p: 2, bgcolor: '#1c1c1c', borderRadius: 2 }}>\n                  <Typography variant=\"h6\" fontWeight=\"bold\">{coach.name}</Typography>\n                  <Typography variant=\"body2\" fontStyle=\"italic\" sx={{ color: 'rgba(255,255,255,0.6)' }}>{coach.quote}</Typography>\n                </Paper>\n              ))}\n              <Button variant=\"text\" onClick={() => navigate('/coaches')} sx={{ color: '#FFD700', alignSelf: 'flex-start' }}>\n                {t('aboutPage.ourCoaches.viewAll')} →\n              </Button>\n            </Stack>\n          </Grid>\n        </Grid>\n\n        <Divider sx={{ my: 8, borderColor: 'rgba(255,255,255,0.2)' }} />\n        \n        <Typography align=\"center\" fontWeight=\"bold\" variant=\"h5\" component=\"p\" sx={{ fontStyle: 'italic' }}>\n          {t('aboutPage.finalSlogan')}\n        </Typography>\n\n      </Container>\n    </Box>\n  );\n};","import React from 'react';\nimport { Container, Typography } from '@mui/material';\n\nexport const Achievements: React.FC = () => {\n  return (\n    <Container>\n      <Typography variant=\"h3\" gutterBottom>\n        Achievments\n      </Typography>\n    </Container>\n  );\n};\n","import React from 'react';\nimport { Navigate, Outlet } from 'react-router-dom';\n\nconst isAuthenticated = () => {\n  const token = localStorage.getItem('token');\n  return !!token; \n};\n\nconst PrivateRoute: React.FC = () => {\n  return isAuthenticated() ? <Outlet /> : <Navigate to=\"/login\" />;\n};\n\nexport default PrivateRoute;\n","import axiosInstance from '@/api';\nimport { User } from '@/types/User';\n\nexport const getProfile = async (): Promise<User> => {\n  const response = await axiosInstance.get('/auth/profile');\n  return response.data;\n};\n","import axiosInstance from '@/api';\nimport { User } from '@/types/User';\n\ninterface UpdateProfilePayload {\n  firstName?: string;\n  lastName?: string;\n  email?: string;\n  currentPassword?: string;\n  newPassword?: string;\n  avatar?: File;\n}\n\nexport const updateProfile = async (data: UpdateProfilePayload): Promise<User> => {\n  const formData = new FormData();\n\n  (Object.keys(data) as Array<keyof UpdateProfilePayload>).forEach(key => {\n    const value = data[key];\n    if (value) {\n      formData.append(key, value);\n    }\n  });\n\n  const response = await axiosInstance.put('/auth/profile', formData);\n  return response.data;\n};\n\n","import axiosInstance from '@/api';\n\nexport const getAvatarUrl = (userId: string): string => {\n  const baseURL = axiosInstance.defaults.baseURL;\n  \n  if (!baseURL) {\n    return '/default-avatar.png'; \n  }\n  \n  return `${baseURL}/auth/avatar/${userId}`;\n};","import React, { useState, ChangeEvent } from 'react';\nimport {\n  TextField,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Avatar,\n  Box,\n  Link,\n} from '@mui/material';\nimport { updateProfile } from '@/api/profile';\nimport { notification } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\ninterface EditProfileProps {\n  user: any;\n  onClose: () => void;\n}\n\nconst EditProfileForm: React.FC<EditProfileProps> = ({ user, onClose }) => {\n  const { t } = useTranslation();\n\n  const [firstName, setFirstName] = useState(user.firstName);\n  const [lastName, setLastName] = useState(user.lastName);\n  const [email, setEmail] = useState(user.email);\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n\n  const [showPassword, setShowPassword] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [avatarPreview, setAvatarPreview] = useState<string | undefined>(user.photoUrl);\n\n  const handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n      setAvatarPreview(URL.createObjectURL(file));\n    }\n  };\n\n  const handleSubmit = async () => {\n    try {\n      if (!showPassword) {\n        await updateProfile({\n          firstName,\n          lastName,\n          email,\n          avatar: selectedFile || undefined,\n        });\n        notification.success({\n          message: t('profile_edit.updated'),\n          description: undefined\n        });\n      } else {\n        if (!currentPassword || newPassword !== confirmPassword) {\n          notification.error({\n            message: t('profile_edit.passwordMismatch'),\n            description: undefined\n          });\n          return;\n        }\n\n        await updateProfile({\n          currentPassword,\n          newPassword,\n          avatar: selectedFile || undefined,\n        });\n\n        notification.success({\n          message: t('profile_edit.passwordChanged'),\n          description: undefined\n        });\n      }\n\n      onClose();\n      window.location.reload();\n    } catch (error) {\n      console.error(error);\n      notification.error({\n        message: t('profile_edit.updateFailed'),\n        description: undefined\n      });\n    }\n  };\n\n  return (\n    <Dialog open onClose={onClose} fullWidth maxWidth=\"sm\">\n      <DialogTitle>{t('profile_edit.editTitle')}</DialogTitle>\n      <DialogContent>\n        <Box display=\"flex\" alignItems=\"center\" flexDirection=\"column\" mb={2}>\n          <Avatar src={avatarPreview} sx={{ width: 96, height: 96, mb: 1 }} />\n          <Button variant=\"text\" size=\"small\" component=\"label\">\n            {t('profile_edit.uploadAvatar')}\n            <input hidden accept=\"image/*\" type=\"file\" onChange={handleFileChange} />\n          </Button>\n        </Box>\n\n        <TextField\n          margin=\"dense\"\n          label={t('profile_edit.firstName')}\n          fullWidth\n          value={firstName}\n          onChange={(e) => setFirstName(e.target.value)}\n        />\n        <TextField\n          margin=\"dense\"\n          label={t('profile_edit.lastName')}\n          fullWidth\n          value={lastName}\n          onChange={(e) => setLastName(e.target.value)}\n        />\n        <TextField\n          margin=\"dense\"\n          label={t('profile_edit.email')}\n          fullWidth\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n\n        {!showPassword && (\n          <Box mt={1}>\n            <Link component=\"button\" variant=\"body2\" onClick={() => setShowPassword(true)}>\n              {t('profile_edit.changePassword')}\n            </Link>\n          </Box>\n        )}\n\n        {showPassword && (\n          <Box mt={2}>\n            <TextField\n              margin=\"dense\"\n              label={t('profile_edit.currentPassword')}\n              fullWidth\n              type=\"password\"\n              value={currentPassword}\n              onChange={(e) => setCurrentPassword(e.target.value)}\n            />\n            <TextField\n              margin=\"dense\"\n              label={t('profile_edit.newPassword')}\n              fullWidth\n              type=\"password\"\n              value={newPassword}\n              onChange={(e) => setNewPassword(e.target.value)}\n            />\n            <TextField\n              margin=\"dense\"\n              label={t('profile_edit.confirmPassword')}\n              fullWidth\n              type=\"password\"\n              value={confirmPassword}\n              onChange={(e) => setConfirmPassword(e.target.value)}\n            />\n          </Box>\n        )}\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose}>{t('profile_edit.cancel')}</Button>\n        <Button variant=\"contained\" onClick={handleSubmit}>\n          {t('profile_edit.save')}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default EditProfileForm;\n","import axiosInstance from '@/api';\nimport { ScheduleEvent } from '@/types/SheduleEvent'; \n\nexport const getScheduleByStudent = async (studentId: string): Promise<ScheduleEvent[]> => {\n  const response = await axiosInstance.get(`/schedule/student/${studentId}`);\n  return response.data;\n};\n","import axiosInstance from '@/api';\nimport { ScheduleEvent, ScheduleEventPayload } from '@/types/SheduleEvent'; \n\nexport const createScheduleEvent = async (payload: ScheduleEventPayload): Promise<ScheduleEvent> => {\n  const response = await axiosInstance.post('/schedule/create', payload);\n  return response.data;\n};\n","import axiosInstance from '@/api';\nimport { ScheduleEvent, ScheduleEventPayload } from '@/types/SheduleEvent';\n\nexport const updateScheduleEvent = async (eventId: string, payload: ScheduleEventPayload): Promise<ScheduleEvent> => {\n  const response = await axiosInstance.put(`/schedule/${eventId}`, payload);\n  return response.data;\n};","import axiosInstance from '@/api';\n\nexport const deleteScheduleEvent = async (eventId: string): Promise<void> => {\n  await axiosInstance.delete(`/schedule/${eventId}`);\n};","import React, { useEffect, useState, useMemo } from 'react';\nimport {\n  Container, Typography, Button, Paper, Grid, CircularProgress, Box, Stack, Avatar, Chip, Tabs, Tab, Tooltip,\n  Skeleton\n} from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport EditProfileForm from '@/components/Profile/EditProfileForm';\nimport { getProfile, getAvatarUrl } from '@/api/profile';\nimport { getCoachById } from '@/api/coaches';\nimport {getScheduleByStudent} from '@/api/schedule';\nimport { User } from '@/types/User';\nimport { ScheduleEvent } from '@/types/SheduleEvent';\n\n// --- ICONS ---\nimport EditIcon from '@mui/icons-material/Edit';\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport SchoolIcon from '@mui/icons-material/School';\nimport EventIcon from '@mui/icons-material/Event';\n\n// --- ROLE MANAGEMENT & HELPERS ---\nconst ROLE_PRIORITY: { [key: string]: number } = {\n  admin: 4,\n  coach: 3,\n  student: 2,\n  user: 1,\n};\nconst getPrimaryRole = (roles: string[] = []): string => {\n  if (roles.length === 0) return 'user';\n  const sortedRoles = [...roles].sort((a, b) => (ROLE_PRIORITY[b] || 0) - (ROLE_PRIORITY[a] || 0));\n  return sortedRoles[0];\n};\n\nfunction TabPanel(props: { children?: React.ReactNode; index: number; value: number; }) {\n  const { children, value, index, ...other } = props;\n  return <div role=\"tabpanel\" hidden={value !== index} {...other}>{value === index && <Box sx={{ pt: 3 }}>{children}</Box>}</div>;\n}\n\n// --- WIDGETS С РЕАЛЬНЫМИ ДАННЫМИ ---\nconst MyCoachWidget: React.FC<{ coach: User | null; isLoading: boolean }> = ({ coach, isLoading }) => {\n  if (isLoading) {\n    return <Paper sx={{ p: 2, bgcolor: '#2a2a2a', borderRadius: 3, height: '100%' }}><Skeleton variant=\"text\" width=\"60%\" sx={{ bgcolor: 'grey.700' }} /><Skeleton variant=\"text\" width=\"40%\" sx={{ bgcolor: 'grey.700' }} /></Paper>;\n  }\n  if (!coach) return null; // Если тренера нет, виджет не отображается\n  return (\n    <Paper sx={{ p: 2, bgcolor: '#2a2a2a', color: 'white', borderRadius: 3, height: '100%' }}>\n      <Stack direction=\"row\" spacing={2} alignItems=\"center\">\n        <SchoolIcon sx={{ color: '#FFD700' }} />\n        <Box>\n          <Typography variant=\"h6\">Your Coach</Typography>\n          <Typography>{coach.firstName} {coach.lastName}</Typography>\n        </Box>\n      </Stack>\n    </Paper>\n  );\n};\n\nconst UpcomingLessonsWidget: React.FC<{ schedule: ScheduleEvent[]; isLoading: boolean }> = ({ schedule, isLoading }) => {\n  if (isLoading) {\n    return <Paper sx={{ p: 2, bgcolor: '#2a2a2a', borderRadius: 3, height: '100%' }}><Skeleton variant=\"rectangular\" height={80} sx={{ bgcolor: 'grey.700' }} /></Paper>;\n  }\n  \n  const upcomingEvents = schedule.filter(event => new Date(event.date) >= new Date()).slice(0, 3); // Только будущие, не больше 3\n  \n  return (\n    <Paper sx={{ p: 2, bgcolor: '#2a2a2a', color: 'white', borderRadius: 3, height: '100%' }}>\n      <Stack direction=\"row\" spacing={2} alignItems=\"center\" mb={2}>\n        <EventIcon sx={{ color: '#FFD700' }}/>\n        <Typography variant=\"h6\">Upcoming Lessons</Typography>\n      </Stack>\n      <Stack spacing={1}>\n        {upcomingEvents.length > 0 ? (\n          upcomingEvents.map(event => (\n            <Typography key={event._id}>- {event.title} ({new Date(event.date).toLocaleDateString()})</Typography>\n          ))\n        ) : (\n          <Typography sx={{color: 'grey.500'}}>No upcoming lessons.</Typography>\n        )}\n      </Stack>\n    </Paper>\n  );\n};\n\n// --- MAIN PAGE COMPONENT ---\nexport const ProfilePage: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n\n  // State\n  const [user, setUser] = useState<User | null>(null);\n  const [coach, setCoach] = useState<User | null>(null);\n  const [schedule, setSchedule] = useState<ScheduleEvent[]>([]);\n  const [loading, setLoading] = useState({ profile: true, coach: false, schedule: false });\n  const [error, setError] = useState<string | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [activeTab, setActiveTab] = useState(0);\n\n  // Data Fetching: Основной профиль\n  useEffect(() => {\n    const fetchUserProfile = async () => {\n      setLoading(prev => ({ ...prev, profile: true }));\n      try {\n        const profileData = await getProfile();\n        setUser(profileData);\n      } catch (err) {\n        setError(t('profile.errorLoadingProfile'));\n        setLoading(prev => ({ ...prev, profile: false }));\n      }\n    };\n    fetchUserProfile();\n  }, [t]);\n\n  // Data Fetching: Зависимые данные (тренер и расписание)\n  useEffect(() => {\n    // Эта часть сработает, как только `user` будет загружен\n    if (user) {\n      setLoading(prev => ({ ...prev, profile: false, coach: true, schedule: true }));\n\n      // 1. Загружаем данные тренера, если он есть\n      if (user.trainer) {\n        getCoachById(user.trainer)\n          .then(setCoach)\n          .catch(err => console.error(\"Failed to fetch coach data:\", err))\n          .finally(() => setLoading(prev => ({ ...prev, coach: false })));\n      } else {\n        setLoading(prev => ({ ...prev, coach: false }));\n      }\n\n      // 2. Загружаем расписание студента\n      getScheduleByStudent(user._id)\n        .then(setSchedule)\n        .catch(err => console.error(\"Failed to fetch schedule:\", err))\n        .finally(() => setLoading(prev => ({ ...prev, schedule: false })));\n    }\n  }, [user]);\n  // Handlers\n  const handleLogout = () => {\n    localStorage.clear();\n    navigate('/auth/login');\n  };\n\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => setActiveTab(newValue);\n  const avatarUrl = useMemo(() => user?._id ? getAvatarUrl(user._id) : '', [user]);\n\n  // Render Logic\n  if (loading.profile) {\n    return <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh', bgcolor: '#0e0e0e' }}><CircularProgress sx={{ color: '#FFD700' }} /></Box>;\n  }\n\n  if (error || !user) {\n    return <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh', bgcolor: '#0e0e0e' }}><Typography color=\"error\">{error || 'User not found'}</Typography></Box>;\n  }\n\n  const primaryRole = getPrimaryRole(user.roles);\n  const otherRoles = user.roles.filter(role => role !== primaryRole);\n  const roleChipColor = {\n    admin: 'secondary',\n    coach: 'primary',\n    student: 'success',\n    user: 'default',\n  }[primaryRole] as \"secondary\" | \"primary\" | \"success\" | \"default\";\n  \n  return (\n    <Box sx={{ bgcolor: '#0e0e0e', color: 'white', minHeight: '100vh', py: 5 }}>\n      <Container maxWidth=\"lg\">\n        <Box sx={{ textAlign: 'center', mb: 5 }}>\n          <Typography variant=\"h2\" component=\"h1\" fontWeight=\"bold\">{t('profile.title')}</Typography>\n          <Typography variant=\"h6\" sx={{ mt: 1, color: 'rgba(255, 255, 255, 0.7)' }}>{t('profile.subtitle')}</Typography>\n        </Box>\n\n        {/* --- PROFILE CARD --- */}\n        <Paper sx={{ p: { xs: 2, md: 4 }, mb: 4, bgcolor: '#1c1c1c', borderRadius: 4, color: 'white' }}>\n          <Stack direction={{ xs: 'column', md: 'row' }} spacing={4} alignItems=\"center\">\n            <Avatar src={avatarUrl} alt={`${user.firstName} ${user.lastName}`} sx={{ width: 120, height: 120, border: '4px solid #FFD700' }} />\n            <Box sx={{ flexGrow: 1, textAlign: { xs: 'center', md: 'left' } }}>\n              <Stack direction=\"row\" spacing={2} alignItems=\"center\" justifyContent={{xs: 'center', md: 'flex-start'}}>\n                <Typography variant=\"h4\" fontWeight=\"bold\">{user.firstName} {user.lastName}</Typography>\n                <Tooltip title={otherRoles.length > 0 ? `Also: ${otherRoles.join(', ')}` : ''} arrow>\n                  <Chip label={primaryRole} color={roleChipColor} size=\"small\" sx={{ textTransform: 'capitalize' }} />\n                </Tooltip>\n              </Stack>\n              {user.trainerEmail && <Typography sx={{color: 'rgba(255,255,255,0.7)'}}>Coach: {user.trainerEmail.split('@')[0]}</Typography>}\n              <Typography variant=\"body2\" sx={{ color: 'rgba(255, 255, 255, 0.5)' }}>\n                {t('profile.registrationDate')}: {new Date(user.registrationDate).toLocaleDateString()}\n              </Typography>\n            </Box>\n            <Stack direction=\"row\" spacing={2} sx={{ mt: { xs: 3, md: 0 } }}>\n              <Button variant=\"outlined\" onClick={() => setIsEditing(true)} startIcon={<EditIcon />} sx={{ color: '#FFD700', borderColor: 'rgba(255, 215, 0, 0.5)', '&:hover': {borderColor: '#FFD700'} }}>\n                {t('profile.editProfile')}\n              </Button>\n              <Button variant=\"contained\" color=\"error\" onClick={handleLogout} startIcon={<LogoutIcon />}>\n                {t('profile.logout')}\n              </Button>\n            </Stack>\n          </Stack>\n        </Paper>\n\n        {/* --- TABS --- */}\n        <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n            <Tabs value={activeTab} onChange={handleTabChange} textColor=\"inherit\" \n                TabIndicatorProps={{ sx: { backgroundColor: '#FFD700' } }}\n            >\n                <Tab label={t('profile.tabs.overview', 'Overview')} />\n                <Tab label={t('profile.tabs.statistics', 'Statistics')} />\n                <Tab label={t('profile.tabs.activity', 'Activity')} disabled />\n            </Tabs>\n        </Box>\n\n        {/* --- TAB PANELS --- */}\n        <TabPanel value={activeTab} index={0}>\n          <Typography variant=\"h5\" fontWeight=\"bold\" sx={{ mb: 3 }}>Dashboard</Typography>\n          <Grid container spacing={3}>\n    <Grid item xs={12} md={6}>\n        <MyCoachWidget coach={coach} isLoading={loading.coach} />\n    </Grid>\n    <Grid item xs={12} md={6}>\n        <UpcomingLessonsWidget schedule={schedule} isLoading={loading.schedule} />\n    </Grid>\n</Grid>\n        </TabPanel>\n\n        <TabPanel value={activeTab} index={1}>\n           <Box sx={{ opacity: 0.6, p: 2, borderRadius: 3, bgcolor: '#1c1c1c' }}>\n                <Typography variant=\"h5\" fontWeight=\"bold\" sx={{ mb: 1 }}>{t('profile.playerStats')}</Typography>\n                <Typography sx={{ mb: 3, fontStyle: 'italic', color: 'rgba(255,255,255,0.7)'}}>\n                    Game statistics will be available soon!\n                </Typography>\n                {/* You can place the mock statistics component here if you have one */}\n           </Box>\n        </TabPanel>\n\n        <TabPanel value={activeTab} index={2}>\n           {/* Activity feed will be here */}\n        </TabPanel>\n\n        {isEditing && (\n          <EditProfileForm user={user} onClose={() => setIsEditing(false)} />\n        )}\n\n      </Container>\n    </Box>\n  );\n};","// src/shared/components/CustomTable/CustomTable.tsx\n\nimport React, { useState } from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  TextField,\n  TablePagination,\n} from '@mui/material';\n\n// Универсальный тип строки таблицы. Гарантирует наличие `id`.\ninterface RowData {\n  id: string | number;\n  [key: string]: any;\n}\n\n// ИСПРАВЛЕНИЕ: Мы экспортируем этот тип, чтобы другие компоненты могли его использовать.\n// Также, `field` теперь может быть специальным значением 'actions',\n// а для таких полей мы добавим опциональный `render`.\nexport interface Column<T> {\n  field: keyof T | 'actions';\n  label: string;\n  render?: (row: T) => React.ReactNode;\n}\n\n// Пропсы для нашего универсального компонента.\ninterface CustomTableProps<T extends RowData> {\n  columns: Column<T>[];\n  data: T[];\n}\n\nconst CustomTable = <T extends RowData>({ columns, data }: CustomTableProps<T>) => {\n  const [search, setSearch] = useState<string>('');\n  const [rowsPerPage, setRowsPerPage] = useState<number>(10);\n  const [page, setPage] = useState<number>(0);\n\n  const handleSearch = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSearch(event.target.value);\n    setPage(0); // Сбрасываем на первую страницу при поиске\n  };\n\n  const handleChangePage = (_event: unknown, newPage: number) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n  \n  const filteredData = data.filter((row) =>\n    columns.some((column) => {\n      // Не ищем по колонке 'actions'\n      if (column.field === 'actions') return false;\n      const value = row[column.field as keyof T];\n      return value?.toString().toLowerCase().includes(search.toLowerCase());\n    })\n  );\n\n  return (\n    <Paper>\n      <TextField\n        fullWidth\n        label=\"Поиск\"\n        variant=\"outlined\"\n        value={search}\n        onChange={handleSearch}\n        style={{ padding: '16px' }}\n      />\n      <TableContainer>\n        <Table>\n          <TableHead>\n            <TableRow>\n              {columns.map((column) => (\n                <TableCell key={String(column.field)}>{column.label}</TableCell>\n              ))}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {filteredData.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => (\n              <TableRow key={row.id}>\n                {columns.map((column) => (\n                  <TableCell key={String(column.field)}>\n                    {column.render ? column.render(row) : row[column.field as keyof T]}\n                  </TableCell>\n                ))}\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <TablePagination\n        rowsPerPageOptions={[10, 20, 50, 100]}\n        component=\"div\"\n        count={filteredData.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n      />\n    </Paper>\n  );\n};\n\nexport default CustomTable;","// src/pages/users-page/users-page.tsx\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  Container,\n  Typography,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  MenuItem,\n  Select,\n  FormControl,\n  InputLabel,\n  Snackbar,\n  Alert,\n  IconButton,\n} from \"@mui/material\";\nimport { Delete, Edit } from \"@mui/icons-material\";\n\nimport axiosInstance from \"@/api\"; \nimport CustomTable, { Column } from \"@/shared/components/CustomTable/CustomTable\";\nimport { User } from \"@/types/User\";\n\n// Обновляем тип для данных с бэкенда, чтобы он соответствовал реальности\ninterface BackendUser {\n  _id: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  roles: string[];\n  registrationDate: string; // С бэкенда приходит строка!\n  // Добавляем опциональные поля, если они могут прийти\n  students?: any[]; // Замените any на Student, если есть импорт\n  trainer?: string;\n  trainerEmail?: string;\n  firebaseUID?: string;\n}\n\nexport const UsersPage: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [newRole, setNewRole] = useState<string>(\"\");\n  const [actionType, setActionType] = useState<\"add\" | \"remove\">(\"add\");\n  const [open, setOpen] = useState<boolean>(false);\n  const [confirmDeleteOpen, setConfirmDeleteOpen] = useState<boolean>(false);\n  const [snackbar, setSnackbar] = useState<{ open: boolean; message: string; severity: \"success\" | \"error\" }>({\n    open: false,\n    message: \"\",\n    severity: \"success\",\n  });\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await axiosInstance.get<BackendUser[]>(\"/users\");\n\n        // ИСПРАВЛЕНИЕ: Создаем объекты, которые ПОЛНОСТЬЮ соответствуют типу User\n        const mappedUsers: User[] = response.data.map((user: any) => ({\n          id: user._id,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          email: user.email,\n          roles: user.roles,\n          \n          // 👇 Вот ключевые исправления, которые решают ошибку\n          _id: user._id, // 1. Добавляем обязательное поле _id\n          registrationDate: new Date(user.registrationDate), // 2. Преобразуем строку в объект Date\n\n          // 3. (Хорошая практика) Прокидываем опциональные поля\n          firebaseUID: user.firebaseUID,\n          students: user.students,\n          trainer: user.trainer,\n          trainerEmail: user.trainerEmail,\n        }));\n        setUsers(mappedUsers);\n      } catch (error) {\n        console.error(\"Ошибка при получении списка пользователей:\", error);\n      }\n    };\n    fetchUsers();\n  }, []);\n\n  // ... остальной код компонента без изменений ...\n  const handleOpen = (user: User) => {\n    setSelectedUser(user);\n    setNewRole(\"\");\n    setActionType(\"add\");\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setSelectedUser(null);\n    setOpen(false);\n  };\n\n  const handleConfirmDeleteOpen = (user: User) => {\n    setSelectedUser(user);\n    setConfirmDeleteOpen(true);\n  };\n\n  const handleConfirmDeleteClose = () => {\n    setConfirmDeleteOpen(false);\n    setSelectedUser(null);\n  };\n\n  const handleRoleChange = async () => {\n    if (!selectedUser) return;\n    try {\n      await axiosInstance.put(\"/admin/update-role\", {\n        userEmail: selectedUser.email,\n        role: newRole,\n        action: actionType,\n      });\n\n      setUsers(users.map(user =>\n        user.id === selectedUser.id\n          ? {\n              ...user,\n              roles: actionType === \"add\" ? [...user.roles, newRole] : user.roles.filter(role => role !== newRole),\n            }\n          : user\n      ));\n      setSnackbar({ open: true, message: \"Роль успешно изменена\", severity: \"success\" });\n      handleClose();\n    } catch (error) {\n      console.error(\"Ошибка при изменении роли:\", error);\n      setSnackbar({ open: true, message: \"Ошибка при изменении роли\", severity: \"error\" });\n    }\n  };\n\n  const handleDeleteUser = async () => {\n    if (!selectedUser) return;\n    try {\n      await axiosInstance.delete(`/admin/delete-user/${selectedUser.id}`);\n      setUsers(users.filter(user => user.id !== selectedUser.id));\n      setSnackbar({ open: true, message: \"Пользователь удалён\", severity: \"success\" });\n      handleConfirmDeleteClose();\n    } catch (error) {\n      console.error(\"Ошибка при удалении пользователя:\", error);\n      setSnackbar({ open: true, message: \"Ошибка при удалении пользователя\", severity: \"error\" });\n    }\n  };\n\n  const columns: Column<User>[] = [\n    { field: \"firstName\", label: \"Имя\" },\n    { field: \"lastName\", label: \"Фамилия\" },\n    { field: \"email\", label: \"Email\" },\n    { field: \"roles\", label: \"Роли\", render: (user) => user.roles.join(', ') },\n    {\n      field: \"actions\",\n      label: \"Действия\",\n      render: (user: User) => (\n        <>\n          <IconButton size=\"small\" onClick={() => handleOpen(user)}>\n            <Edit />\n          </IconButton>\n          <IconButton size=\"small\" color=\"error\" onClick={() => handleConfirmDeleteOpen(user)}>\n            <Delete />\n          </IconButton>\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" gutterBottom>Список пользователей</Typography>\n      <CustomTable columns={columns} data={users} />\n\n      {/* Диалоговые окна без изменений... */}\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xs\">\n        <DialogTitle>Управление ролями</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Пользователь: <strong>{selectedUser?.firstName} {selectedUser?.lastName}</strong>\n          </DialogContentText>\n          <FormControl fullWidth sx={{ marginTop: 2 }}>\n            <InputLabel>Роль</InputLabel>\n            <Select value={newRole} onChange={(e) => setNewRole(e.target.value)} label=\"Роль\">\n              <MenuItem value=\"student\">Студент</MenuItem>\n              <MenuItem value=\"coach\">Тренер</MenuItem>\n            </Select>\n          </FormControl>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Отмена</Button>\n          <Button onClick={handleRoleChange} color=\"primary\" disabled={!newRole}>Сохранить</Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={confirmDeleteOpen} onClose={handleConfirmDeleteClose}>\n        <DialogTitle>Подтвердите удаление</DialogTitle>\n        <DialogContent>\n            <DialogContentText>\n                Вы уверены, что хотите удалить пользователя {selectedUser?.email}? Это действие необратимо.\n            </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleConfirmDeleteClose}>Нет</Button>\n          <Button onClick={handleDeleteUser} color=\"error\">Да, удалить</Button>\n        </DialogActions>\n      </Dialog>\n      <Snackbar open={snackbar.open} autoHideDuration={4000} onClose={() => setSnackbar({ ...snackbar, open: false })}>\n        <Alert severity={snackbar.severity} onClose={() => setSnackbar({ ...snackbar, open: false })} variant=\"filled\">\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Container>\n  );\n};","import React, { useEffect, useState, useCallback } from 'react';\nimport {\n    Dialog, DialogTitle, DialogContent, DialogActions, Button, TextField,\n    MenuItem, Select, FormControl, InputLabel, Grid, Paper, IconButton,\n    Stack, Typography, Box, SelectChangeEvent, Tooltip,\n} from '@mui/material';\nimport { Calendar, momentLocalizer, Event as BigCalendarEvent } from 'react-big-calendar';\nimport moment from 'moment';\nimport { notification } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\n// MUI Icons\nimport CloseIcon from '@mui/icons-material/Close';\nimport AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\nimport SaveIcon from '@mui/icons-material/Save';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EventNoteIcon from '@mui/icons-material/EventNote';\nimport PeopleIcon from '@mui/icons-material/People';\nimport AssignmentIcon from '@mui/icons-material/Assignment';\nimport MenuBookIcon from '@mui/icons-material/MenuBook';\nimport EmojiEventsIcon from '@mui/icons-material/EmojiEvents';\n\n// Local Imports\nimport {\n  getScheduleByStudent, createScheduleEvent,\n  updateScheduleEvent, deleteScheduleEvent\n} from '@/api/schedule';\nimport { Student } from '@/types/Student';\nimport { ScheduleEvent, ScheduleEventPayload } from '@/types/SheduleEvent';\n\n// SCSS Styles\nimport './styles.scss';\n\nconst localizer = momentLocalizer(moment);\n\n// Иконки для типов событий\nconst eventTypeIcons = {\n  individual_lesson: <EventNoteIcon fontSize=\"small\" />,\n  group_lesson: <PeopleIcon fontSize=\"small\" />,\n  homework: <AssignmentIcon fontSize=\"small\" />,\n  opening_study: <MenuBookIcon fontSize=\"small\" />,\n  tournament_participation: <EmojiEventsIcon fontSize=\"small\" />,\n};\n\nconst eventTypes: (keyof typeof eventTypeIcons)[] = [\n    \"individual_lesson\", \"group_lesson\", \"homework\",\n    \"opening_study\", \"tournament_participation\"\n];\n\n// Кастомный компонент для отображения события в календаре\nconst CustomEvent: React.FC<{ event: BigCalendarEvent & Partial<ScheduleEvent> }> = ({ event }) => {\n  const eventType = event.type as keyof typeof eventTypeIcons;\n  if (!eventType) return null;\n\n  const icon = eventTypeIcons[eventType];\n  const className = `custom-event rbc-event--${eventType}`;\n\n  return (\n    <Tooltip title={event.description || event.title} placement=\"top\">\n      <div className={className}>\n        {icon}\n        <Typography variant=\"caption\" noWrap component=\"span\">{event.title}</Typography>\n      </div>\n    </Tooltip>\n  );\n};\n\n\ninterface EditScheduleModalProps {\n    open: boolean;\n    onClose: () => void;\n    student: Student | null;\n}\n\nconst EditScheduleModal: React.FC<EditScheduleModalProps> = ({ open, onClose, student }) => {\n    const { t } = useTranslation();\n    const [events, setEvents] = useState<ScheduleEvent[]>([]);\n    const [selectedEvent, setSelectedEvent] = useState<Partial<ScheduleEvent>>({});\n    const [selectedDate, setSelectedDate] = useState<Date | null>(null);\n\n    if (!student) return null;\n\n    const studentName = `${student.firstName} ${student.lastName}`;\n\n    const resetForm = useCallback(() => {\n        setSelectedEvent({\n            student: student._id, status: 'scheduled',\n            title: '', type: 'individual_lesson', date: '',\n            description: '', link: ''\n        });\n        setSelectedDate(null);\n    }, [student]);\n\n    const fetchSchedule = useCallback(async () => {\n        if (!student._id) return;\n        try {\n            const studentSchedule = await getScheduleByStudent(student._id);\n            setEvents(studentSchedule);\n        } catch (error) {\n            console.error('Failed to fetch schedule:', error);\n            notification.error({\n                message: t('schedule.fetchError'),\n                description: undefined\n            });\n        }\n    }, [student, t]);\n    \n    // --- ПОЛНАЯ ЛОГИКА СОХРАНЕНИЯ ---\n    const handleSaveEvent = async () => {\n        const { date, type, title } = selectedEvent;\n        if (!date || !type || !title) {\n            notification.error({\n                message: t('schedule.fieldRequired'),\n                description: undefined\n            });\n            return;\n        }\n\n        const payload: ScheduleEventPayload = {\n            studentId: student._id,\n            date: new Date(date).toISOString(),\n            title: title,\n            description: selectedEvent.description || \"\",\n            link: selectedEvent.link || \"\",\n            type: type,\n            status: selectedEvent.status || 'scheduled',\n        };\n\n        try {\n            const isUpdating = !!selectedEvent._id;\n            if (isUpdating) {\n                await updateScheduleEvent(selectedEvent._id!, payload);\n            } else {\n                await createScheduleEvent(payload);\n            }\n            notification.success({\n                message: t(isUpdating ? 'schedule.updateSuccess' : 'schedule.createSuccess'),\n                description: undefined\n            });\n            await fetchSchedule();\n            resetForm();\n        } catch (error) {\n            console.error('Failed to save event:', error);\n        }\n    };\n    \n    // --- ПОЛНАЯ ЛОГИКА УДАЛЕНИЯ ---\n    const handleDeleteEvent = async () => {\n        if (!selectedEvent._id) return;\n        try {\n            await deleteScheduleEvent(selectedEvent._id);\n            notification.success({\n                message: t('schedule.deleteSuccess'),\n                description: undefined\n            });\n            await fetchSchedule();\n            resetForm();\n        } catch (error) {\n            console.error('Failed to delete event:', error);\n        }\n    };\n\n    useEffect(() => {\n        if (open && student) {\n            fetchSchedule();\n            resetForm();\n        }\n    }, [open, student, fetchSchedule, resetForm]);\n\n    const handleSelectSlot = useCallback(({ start }: { start: Date }) => {\n        resetForm();\n        setSelectedDate(start);\n        setSelectedEvent(prev => ({\n            ...prev,\n            date: moment(start).format('YYYY-MM-DDTHH:mm'),\n        }));\n    }, [resetForm]);\n\n    const handleSelectEvent = useCallback((event: BigCalendarEvent & Partial<ScheduleEvent>) => {\n        setSelectedDate(event.date ? new Date(event.date) : null);\n        setSelectedEvent({\n            ...event,\n            date: event.date ? moment(event.date).format('YYYY-MM-DDTHH:mm') : '',\n        });\n    }, []);\n\n    const calendarEvents = events.map(event => ({\n      ...event, id: event._id, start: new Date(event.date),\n      end: moment(event.date).add(1, 'hour').toDate(), title: event.title,\n    }));\n    \n    const dayPropGetter = useCallback((date: Date) => ({\n        className: (selectedDate && moment(date).isSame(selectedDate, 'day'))\n            ? 'rbc-selected-slot-custom'\n            : '',\n    }), [selectedDate]);\n\n    const handleFormInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n        const { name, value } = e.target;\n        setSelectedEvent(prev => ({ ...prev, [name]: value }));\n    };\n    \n    const handleTypeChange = (e: SelectChangeEvent<string>) => {\n        setSelectedEvent(prev => ({ ...prev, type: e.target.value as ScheduleEvent['type'] }));\n    };\n\n    return (\n        <Dialog open={open} onClose={onClose} fullWidth maxWidth=\"lg\" className=\"schedule-dialog\">\n            <DialogTitle className=\"schedule-dialog__header\">\n                <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                    <Typography variant=\"h6\" component=\"div\">{t('schedule.editScheduleTitle', { studentName })}</Typography>\n                    <IconButton aria-label=\"close\" onClick={onClose} className=\"schedule-dialog__close-btn\">\n                        <CloseIcon />\n                    </IconButton>\n                </Stack>\n            </DialogTitle>\n            <DialogContent dividers className=\"schedule-dialog__content\">\n                <Grid container spacing={3}>\n                    <Grid item xs={12} md={7}>\n                        <Calendar\n                            localizer={localizer}\n                            events={calendarEvents}\n                            startAccessor=\"start\" endAccessor=\"end\"\n                            selectable onSelectSlot={handleSelectSlot}\n                            onSelectEvent={handleSelectEvent}\n                            components={{ event: CustomEvent }}\n                            dayPropGetter={dayPropGetter}\n                            className=\"schedule-calendar\"\n                        />\n                    </Grid>\n                    <Grid item xs={12} md={5}>\n                        <Paper component=\"form\" className=\"event-form\" onSubmit={(e) => { e.preventDefault(); handleSaveEvent(); }}>\n                            <Typography variant=\"h6\" className=\"event-form__header\">\n                                {selectedEvent._id\n                                    ? t('schedule.eventDetails')\n                                    : selectedDate\n                                    ? t('schedule.addEventForDate', { date: moment(selectedDate).format('MMMM Do, YYYY') })\n                                    : t('schedule.addEvent')\n                                }\n                            </Typography>\n                            <Stack spacing={2.5} className=\"event-form__fields\">\n                                <TextField name=\"title\" label={t('schedule.form_title')} variant=\"filled\" fullWidth\n                                    value={selectedEvent.title || ''} onChange={handleFormInputChange} className=\"event-form__field\"/>\n                                \n                                <FormControl variant=\"filled\" fullWidth className=\"event-form__field\">\n                                    <InputLabel>{t('schedule.form_type')}</InputLabel>\n                                    <Select name=\"type\" value={selectedEvent.type || ''} onChange={handleTypeChange}>\n                                        {eventTypes.map(type => (\n                                            <MenuItem key={type} value={type}>{t(`schedule.eventTypes.${type}`)}</MenuItem>\n                                        ))}\n                                    </Select>\n                                </FormControl>\n                                \n                                <TextField name=\"description\" label={t('schedule.form_description')} variant=\"filled\" fullWidth multiline rows={3}\n                                    value={selectedEvent.description || ''} onChange={handleFormInputChange} className=\"event-form__field\"/>\n\n                                <TextField name=\"link\" label={t('schedule.form_link')} variant=\"filled\" fullWidth\n                                    value={selectedEvent.link || ''} onChange={handleFormInputChange} className=\"event-form__field\"/>\n                                \n                                <TextField name=\"date\" label={t('schedule.form_date')} type=\"datetime-local\" variant=\"filled\" fullWidth\n                                    value={selectedEvent.date || ''} onChange={handleFormInputChange}\n                                    InputLabelProps={{ shrink: true }} className=\"event-form__field\"/>\n                            </Stack>\n                        </Paper>\n                    </Grid>\n                </Grid>\n            </DialogContent>\n            <DialogActions className=\"schedule-dialog__actions\">\n                <Button onClick={onClose} className=\"action-button action-button--close\">{t('common.close')}</Button>\n                <Box sx={{ flex: '1 1 auto' }} /> \n                {selectedEvent._id && (\n                    <Button onClick={handleDeleteEvent} variant=\"outlined\" startIcon={<DeleteIcon />} className=\"action-button action-button--delete\">\n                        {t('common.delete')}\n                    </Button>\n                )}\n                <Button onClick={handleSaveEvent} variant=\"contained\" startIcon={selectedEvent._id ? <SaveIcon /> : <AddCircleOutlineIcon />} className=\"action-button action-button--save\">\n                    {selectedEvent._id ? t('common.save') : t('common.add')}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nexport default EditScheduleModal;","import React, { useEffect, useState, useMemo, useCallback } from 'react';\nimport { Container, Typography, Table, TableBody, TableCell, TableHead, TableRow, Paper, Button, CircularProgress } from '@mui/material';\nimport { useTranslation } from \"react-i18next\";\nimport { notification } from 'antd';\n\nimport { \n  getStudentIdsByCoach, \n  getStudentDetails, \n  removeStudentFromCoach \n} from '@/api/coaches';\n\nimport { Student } from '@/types/Student';\nimport EditScheduleModal from '../../components/Schedule/EditScheduleModal';\n\nexport const StudentsPage: React.FC = () => {\n  const { t } = useTranslation();\n  const [students, setStudents] = useState<Student[]>([]);\n  const [selectedStudent, setSelectedStudent] = useState<Student | null>(null);\n  const [openModal, setOpenModal] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const coachEmail = useMemo(() => {\n    const userStr = localStorage.getItem('user');\n    return userStr ? JSON.parse(userStr).email : null;\n  }, []);\n\n  const fetchStudents = useCallback(async () => {\n    if (!coachEmail) {\n      setIsLoading(false);\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const studentIds = await getStudentIdsByCoach(coachEmail);\n\n      if (!Array.isArray(studentIds) || studentIds.length === 0) {\n  setStudents([]);\n  return;\n}\n\n      const studentDetailsPromises = studentIds.map(id => getStudentDetails(coachEmail, id));\n\n      \n      const studentDetails = await Promise.all(studentDetailsPromises);\n      \n      setStudents(studentDetails.filter((student): student is Student => student !== null));\n\n    } catch (error) {\n      console.error('Ошибка при получении списка учеников:', error);\n      notification.error({\n        message: t('studentsPage.fetchError'),\n        description: undefined\n      });\n      setStudents([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [coachEmail, t]);\n\n\n  const handleRemoveStudent = async (studentId: string) => {\n    if (!coachEmail) return;\n    try {\n      await removeStudentFromCoach(coachEmail, studentId);\n      notification.success({\n        message: t('studentsPage.studentDeletedSuccess'),\n        description: undefined\n      });\n      setStudents(prevStudents => prevStudents.filter(s => s._id !== studentId));\n    } catch (error) {\n      console.error('Ошибка при удалении ученика:', error);\n    }\n  };\n\n  const handleEditSchedule = (student: Student) => {\n    setSelectedStudent(student);\n    setOpenModal(true);\n  };\n  \n  useEffect(() => {\n    fetchStudents();\n  }, [fetchStudents]);\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" gutterBottom>\n        {t(\"studentsPage.studentsListTitle\")}\n      </Typography>\n      <Paper>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>{t(\"studentsPage.firstName\")}</TableCell>\n              <TableCell>{t(\"studentsPage.lastName\")}</TableCell>\n              <TableCell>{t(\"studentsPage.email\")}</TableCell>\n              <TableCell align=\"right\">{t(\"studentsPage.actions\")}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {isLoading ? (\n              <TableRow>\n                <TableCell colSpan={4} align=\"center\">\n                  <CircularProgress />\n                  <Typography sx={{ mt: 1 }}>{t('common.loading')}</Typography>\n                </TableCell>\n              </TableRow>\n            ) : students.length > 0 ? (\n              students.map((student) => (\n                <TableRow key={student._id}>\n                  <TableCell>{student.firstName}</TableCell>\n                  <TableCell>{student.lastName}</TableCell>\n                  <TableCell>{student.email}</TableCell>\n                  <TableCell align=\"right\">\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={() => handleEditSchedule(student)}\n                      style={{ marginRight: 10 }}\n                    >\n                      {t(\"studentsPage.editSchedule\")}\n                    </Button>\n                    <Button\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      onClick={() => handleRemoveStudent(student._id)}\n                    >\n                      {t(\"studentsPage.delete\")}\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))\n            ) : (\n              <TableRow>\n                <TableCell colSpan={4} align=\"center\">{t('studentsPage.noStudents')}</TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </Paper>\n\n      {selectedStudent && (\n        <EditScheduleModal\n          open={openModal}\n          onClose={() => setOpenModal(false)}\n          student={selectedStudent}\n        />\n      )}\n    </Container>\n  );\n};","\nimport { Chess, Square, Move } from 'chess.js';\n\nexport interface IGameStatus {\n  isCheckmate: boolean;\n  isStalemate: boolean;\n  isThreefoldRepetition: boolean;\n  isInsufficientMaterial: boolean;\n  isDraw: boolean;\n  turn: 'w' | 'b';\n}\n\nexport class ChessGameEngine {\n  private game: Chess;\n  private fullHistory: string[] = []; \n\n  constructor(fen?: string) {\n    this.game = fen ? new Chess(fen) : new Chess();\n    this.fullHistory = this.game.history();\n  }\n\n  getFen(): string {\n    return this.game.fen();\n  }\n\n  getTurn(): 'w' | 'b' {\n    return this.game.turn();\n  }\n\n  getHistory(): string[] {\n    return this.fullHistory;\n  }\n\n  getMovesForSquare(square: Square): Move[] {\n    return this.game.moves({ square, verbose: true });\n  }\n\n  getStatus(): IGameStatus {\n    return {\n      isCheckmate: this.game.isCheckmate(),\n      isStalemate: this.game.isStalemate(),\n      isThreefoldRepetition: this.game.isThreefoldRepetition(),\n      isInsufficientMaterial: this.game.isInsufficientMaterial(),\n      isDraw: this.game.isDraw(),\n      turn: this.game.turn(),\n    };\n  }\n\n  handleMove(source: Square, target: Square): Move | null {\n    try {\n      const move = this.game.move({ from: source, to: target, promotion: 'q' });\n      if (move) {\n        this.fullHistory = this.game.history();\n      }\n      return move;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  resetGame(): void {\n    this.game.reset();\n    this.fullHistory = []; \n  }\n\n  loadPgn(pgn: string): boolean {\n    try {\n      this.game.loadPgn(pgn);\n\n      this.fullHistory = this.game.history(); \n      return true; \n    } catch (e) {\n      console.error(\"Invalid PGN:\", e); \n      return false;\n    }\n  }\n  \n  goToMove(moveIndex: number): void {\n    const tempGame = new Chess();\n    for (let i = 0; i < moveIndex; i++) {\n        if (this.fullHistory[i]) {\n            tempGame.move(this.fullHistory[i]);\n        }\n    }\n    this.game = tempGame;\n  }\n\n  uciToSan(uci: string): string | null {\n    const move = this.game.move({\n      from: uci.substring(0, 2),\n      to: uci.substring(2, 4),\n      promotion: uci.length === 5 ? uci.substring(4) : undefined,\n    });\n    if (move) {\n      this.game.undo();\n      return move.san;\n    }\n    return null;\n  }\n}\n\nexport default ChessGameEngine;","// src/features/Chess/hooks/useChessGame.ts\n\nimport { useState, useMemo, useCallback, useRef } from 'react';\nimport { Square } from 'chess.js';\nimport ChessGameEngine from '../engine/ChessGameEngine';\n\nexport const useChessGame = (initialFen?: string) => {\n    const engine = useMemo(() => new ChessGameEngine(initialFen), [initialFen]);\n\n    const [fen, setFen] = useState(engine.getFen());\n    const [history, setHistory] = useState<string[]>(engine.getHistory());\n    const [currentMoveIndex, setCurrentMoveIndex] = useState(history.length);\n\n    const [selectedSquare, setSelectedSquare] = useState<Square | null>(null);\n    const [moveOptions, setMoveOptions] = useState<{ [key: string]: React.CSSProperties }>({});\n\n    const fenRef = useRef(fen);\n    fenRef.current = fen;\n\n    const updateGameState = useCallback(() => {\n        setFen(engine.getFen());\n        const newHistory = engine.getHistory();\n        setHistory(newHistory);\n        setCurrentMoveIndex(newHistory.length);\n    }, [engine]);\n\n    const clearHighlights = useCallback(() => {\n        setSelectedSquare(null);\n        setMoveOptions({});\n    }, []);\n\n    const handleMove = useCallback((sourceSquare: Square, targetSquare: Square) => {\n        const moveSuccessful = engine.handleMove(sourceSquare, targetSquare);\n        if (moveSuccessful) {\n            updateGameState();\n            clearHighlights();\n            return true;\n        }\n        return false;\n    }, [engine, updateGameState, clearHighlights]);\n\n    const onSquareClick = useCallback((square: Square) => {\n        if (square === selectedSquare) {\n            clearHighlights();\n            return;\n        }\n\n        const moves = engine.getMovesForSquare(square);\n        if (moves.length === 0) {\n            clearHighlights();\n            return;\n        }\n\n        const newOptions: { [key: string]: React.CSSProperties } = {};\n        moves.forEach(move => {\n            newOptions[move.to] = {\n                background: move.flags.includes('c') \n                    ? 'radial-gradient(circle, rgba(0,0,0,0) 85%, rgba(0,0,0,0.2) 85%)'\n                    : 'radial-gradient(circle, rgba(0,0,0,0.2) 25%, transparent 30%)',\n                borderRadius: '50%',\n            };\n        });\n\n        setMoveOptions(newOptions);\n        setSelectedSquare(square);\n    }, [engine, selectedSquare, clearHighlights]);\n\n    const resetGame = useCallback(() => {\n        engine.resetGame();\n        updateGameState();\n        clearHighlights();\n    }, [engine, updateGameState, clearHighlights]);\n\n    const loadPgn = useCallback((pgn: string): boolean => {\n        const success = engine.loadPgn(pgn.trim());\n        if (success) {\n            updateGameState();\n            clearHighlights();\n        }\n        return success;\n    }, [engine, updateGameState, clearHighlights]);\n\n    const goToMove = useCallback((moveIndex: number) => {\n        engine.goToMove(moveIndex);\n        setFen(engine.getFen());\n        setCurrentMoveIndex(moveIndex);\n        clearHighlights();\n    }, [engine, clearHighlights]);\n\n\n    return {\n        fen,\n        history,\n        currentMoveIndex,\n        moveOptions,\n        actions: {\n            handleMove,\n            onSquareClick,\n            resetGame,\n            loadPgn,\n            goToMove,\n        }\n    };\n};","\nimport React from 'react';\nimport { Chessboard } from 'react-chessboard';\nimport { Square } from 'chess.js';\n\ninterface ChessBoardProps {\n  fen: string;\n  onPieceDrop: (sourceSquare: Square, targetSquare: Square) => boolean;\n  onSquareClick: (square: Square) => void; \n  squareStyles?: { [square: string]: React.CSSProperties }; \n}\n\nexport const ChessBoard: React.FC<ChessBoardProps> = ({ \n  fen, \n  onPieceDrop,\n  onSquareClick,\n  squareStyles  \n}) => {\n  return (\n    <Chessboard\n      position={fen}\n      onPieceDrop={onPieceDrop}\n      onSquareClick={onSquareClick}\n      customSquareStyles={squareStyles}\n      customBoardStyle={{ borderRadius: '4px', boxShadow: '0 5px 15px rgba(0, 0, 0, 0.5)' }}\n      customDarkSquareStyle={{ backgroundColor: '#779952' }}\n      customLightSquareStyle={{ backgroundColor: '#edeed1' }}\n    />\n  );\n};","import React from 'react';\nimport { Paper, Grid, Box, Typography } from '@mui/material';\n\nexport interface AnnotatedMove {\n  san: string;\n  evaluation?: number;\n}\n\ninterface MoveHistoryProps {\n  history: AnnotatedMove[];\n  currentMoveIndex: number;\n  onMoveClick: (moveIndex: number) => void;\n}\n\nconst getEvaluationSymbol = (evaluation?: number): string => {\n  if (evaluation === undefined) return '';\n  const evalAbs = Math.abs(evaluation);\n\n  if (evalAbs < 0.4) return ' =';\n  if (evalAbs < 1.0) return evaluation > 0 ? ' += ' : ' -= ';\n  if (evalAbs < 2.0) return evaluation > 0 ? ' ±' : ' ∓';\n  return evaluation > 0 ? ' +-' : ' -+';\n};\n\nconst getSymbolColor = (evaluation?: number): string => {\n    if (evaluation === undefined) return 'text.secondary';\n    if (Math.abs(evaluation) < 0.4) return 'text.secondary';\n    return evaluation > 0 ? 'success.light' : 'error.light';\n};\n\nexport const MoveHistory: React.FC<MoveHistoryProps> = ({\n  history,\n  currentMoveIndex,\n  onMoveClick,\n}) => {\n  const movePairs = React.useMemo(() => {\n    const pairs: { white: AnnotatedMove; black: AnnotatedMove | null }[] = [];\n    for (let i = 0; i < history.length; i += 2) {\n      pairs.push({ white: history[i], black: history[i + 1] || null });\n    }\n    return pairs;\n  }, [history]);\n\n  return (\n    <Paper variant=\"outlined\" sx={{ p: 1.5, height: '100%', overflowY: 'auto', bgcolor: '#1c1c1c', borderColor: 'rgba(255,255,255,0.2)' }}>\n      <Grid container rowSpacing={0.5} columnSpacing={1} sx={{ fontSize: '1rem', color: 'white' }}>\n        {movePairs.map((pair, index) => {\n          const whiteMoveIndex = index * 2 + 1;\n          const blackMoveIndex = index * 2 + 2;\n\n          return (\n            <React.Fragment key={index}>\n              <Grid item xs={2} sx={{ color: 'rgba(255, 255, 255, 0.6)', textAlign: 'right', pt: '4px' }}>\n                {index + 1}.\n              </Grid>\n              <Grid item xs={5}>\n                <Box\n                  onClick={() => onMoveClick(whiteMoveIndex)}\n                  sx={{ display: 'flex', alignItems: 'center', cursor: 'pointer', p: '2px 5px', borderRadius: '4px', bgcolor: currentMoveIndex === whiteMoveIndex ? 'rgba(255, 215, 0, 0.3)' : 'transparent', '&:hover': { bgcolor: 'rgba(255,255,255,0.1)' } }}\n                >\n                  <Typography component=\"span\">{pair.white.san}</Typography>\n                  <Typography component=\"span\" sx={{ color: getSymbolColor(pair.white.evaluation), fontWeight: 'bold', ml: 0.5 }}>\n                    {getEvaluationSymbol(pair.white.evaluation)}\n                  </Typography>\n                </Box>\n              </Grid>\n              <Grid item xs={5}>\n                {pair.black && (\n                  <Box\n                    onClick={() => onMoveClick(blackMoveIndex)}\n                    sx={{ display: 'flex', alignItems: 'center', cursor: 'pointer', p: '2px 5px', borderRadius: '4px', bgcolor: currentMoveIndex === blackMoveIndex ? 'rgba(255, 215, 0, 0.3)' : 'transparent', '&:hover': { bgcolor: 'rgba(255,255,255,0.1)' } }}\n                  >\n                    <Typography component=\"span\">{pair.black.san}</Typography>\n                    <Typography component=\"span\" sx={{ color: getSymbolColor(pair.black.evaluation), fontWeight: 'bold', ml: 0.5 }}>\n                        {getEvaluationSymbol(pair.black.evaluation)}\n                    </Typography>\n                  </Box>\n                )}\n              </Grid>\n            </React.Fragment>\n          );\n        })}\n      </Grid>\n    </Paper>\n  );\n};","import React from 'react';\nimport { Paper, Stack, Typography, Divider, Box, Switch, FormControlLabel } from '@mui/material';\n\ninterface AnalysisPanelProps {\n  evaluation: string | null;\n  depth: number;\n  principalVariation: string; // Теперь это будет отформатированная строка SAN\n  isAnalyzing: boolean;\n  isEngineOn: boolean;\n  onToggleEngine: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport const AnalysisPanel: React.FC<AnalysisPanelProps> = ({\n  evaluation,\n  depth,\n  principalVariation,\n  isAnalyzing,\n  isEngineOn,\n  onToggleEngine,\n}) => {\n  return (\n    <Paper variant=\"outlined\" sx={{ p: 2, borderColor: 'rgba(255,255,255,0.2)', borderRadius: 2 }}>\n      <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n        <Typography variant=\"h4\" fontWeight=\"bold\" sx={{ color: '#FFD700' }}>\n          {evaluation ?? <Typography component=\"span\" color=\"text.secondary\">...</Typography>}\n        </Typography>\n        <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n          <Stack alignItems=\"flex-end\">\n            <Typography variant=\"body2\" color=\"text.secondary\">Depth: {depth}</Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">SF 16</Typography>\n          </Stack>\n          <FormControlLabel\n            control={\n              <Switch\n                checked={isEngineOn}\n                onChange={onToggleEngine}\n                sx={{\n                  '& .MuiSwitch-switchBase.Mui-checked': {\n                    color: '#FFD700',\n                  },\n                  '& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track': {\n                    backgroundColor: '#FFD700',\n                  },\n                }}\n              />\n            }\n            label=\"\"\n            sx={{ mr: 0 }}\n          />\n        </Stack>\n      </Stack>\n      <Divider sx={{ my: 1, borderColor: 'rgba(255,255,255,0.2)' }} />\n      <Box sx={{ minHeight: '4em', overflowX: 'auto', whiteSpace: 'nowrap' }}>\n        <Typography variant=\"body1\">\n          {principalVariation || (isAnalyzing ? 'Analyzing...' : <Typography component=\"span\" color=\"text.secondary\">-</Typography>)}\n        </Typography>\n      </Box>\n    </Paper>\n  );\n};","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Chess, Square } from 'chess.js';\nimport { Container, Typography, Grid, Box, Paper, Stack, TextField, Button, IconButton } from '@mui/material';\nimport { notification } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\n// Импорт хука и компонентов\nimport { useChessGame } from '../hooks/useChessGame';\nimport { ChessBoard } from '../components/ChessBoard';\nimport { MoveHistory, AnnotatedMove } from '../components/MoveHistory';\nimport { AnalysisPanel } from '../components/AnalysisPanel';\n\n// Иконки\nimport ReplayIcon from '@mui/icons-material/Replay';\nimport UploadFileIcon from '@mui/icons-material/UploadFile';\nimport SkipPreviousIcon from '@mui/icons-material/SkipPrevious';\nimport ArrowLeftIcon from '@mui/icons-material/ArrowLeft';\nimport ArrowRightIcon from '@mui/icons-material/ArrowRight';\nimport SkipNextIcon from '@mui/icons-material/SkipNext';\n\nexport const AnalysisPage: React.FC = () => {\n    const { t } = useTranslation();\n    const { fen, history, currentMoveIndex, moveOptions, actions } = useChessGame();\n\n    // Состояния для анализа\n    const [annotatedHistory, setAnnotatedHistory] = useState<AnnotatedMove[]>([]);\n    const [inputPgn, setInputPgn] = useState('');\n    const [engineWorker, setEngineWorker] = useState<Worker | null>(null);\n    const [isLiveAnalyzing, setIsLiveAnalyzing] = useState(false);\n    const [liveEvaluation, setLiveEvaluation] = useState<string | null>(null);\n    const [liveDepth, setLiveDepth] = useState(0);\n    const [livePV, setLivePV] = useState(''); // Теперь это будет отформатированная SAN-строка\n    const [isEngineOn, setIsEngineOn] = useState(false);\n\n    const fenRef = useRef(fen);\n    useEffect(() => { fenRef.current = fen; }, [fen]);\n\n    useEffect(() => {\n        setAnnotatedHistory(history.map(san => ({ san })));\n    }, [history]);\n    \n    // --- Функции-обертки для действий из хука ---\n    const resetAnalysisData = () => {\n        setLiveEvaluation(null);\n        setLiveDepth(0);\n        setLivePV('');\n    };\n\n    const handleLoadPgn = () => {\n        if (actions.loadPgn(inputPgn)) {\n            resetAnalysisData();\n            notification.success({\n                message: t('chessGame.pgnLoadSuccess'),\n                description: undefined\n            });\n        } else {\n            notification.error({\n                message: t('chessGame.pgnLoadError'),\n                description: undefined\n            });\n        }\n    };\n    \n    const handleResetGame = () => {\n        actions.resetGame();\n        resetAnalysisData();\n        notification.success({\n            message: t('chessGame.resetSuccess'),\n            description: undefined\n        });\n    };\n\n    const handleGoToMove = (moveIndex: number) => {\n        actions.goToMove(moveIndex);\n        resetAnalysisData();\n    };\n\n    // --- Логика анализа ---\n\n    const liveAnalyzePosition = useCallback(() => {\n        if (engineWorker && !isLiveAnalyzing) {\n            setIsLiveAnalyzing(true);\n            resetAnalysisData();\n            engineWorker.postMessage(`position fen ${fen}`);\n            engineWorker.postMessage('go depth 18');\n        }\n    }, [engineWorker, fen, isLiveAnalyzing]);\n\n    useEffect(() => {\n        if (isEngineOn) {\n            liveAnalyzePosition();\n        } else if (engineWorker) {\n            engineWorker.postMessage('stop');\n            setIsLiveAnalyzing(false);\n        }\n    }, [fen, isEngineOn, liveAnalyzePosition, engineWorker]);\n    \n    const handleToggleEngine = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setIsEngineOn(event.target.checked);\n    };\n\n    // ВОЗВРАЩАЕМ ЭТУ ФУНКЦИЮ\n    const formatUCIToSAN = useCallback((uciLine: string, startFen: string) => {\n        try {\n            const tempGame = new Chess(startFen);\n            const moves = uciLine.split(' ');\n            let sanLine = '';\n            for (const uci of moves) {\n                const moveResult = tempGame.move({ from: uci.substring(0, 2) as Square, to: uci.substring(2, 4) as Square, promotion: uci.length === 5 ? uci.substring(4) : undefined });\n                if (moveResult) {\n                    if (tempGame.turn() === 'b') { // Ход только что сделали белые\n                        sanLine += `${tempGame.moveNumber()}. ${moveResult.san} `;\n                    } else {\n                        sanLine += `${moveResult.san} `;\n                    }\n                } else { break; }\n            }\n            return sanLine.trim();\n        } catch (e) { return uciLine; }\n    }, []);\n\n    useEffect(() => {\n        const worker = new Worker('/workers/stockfish.js');\n        setEngineWorker(worker);\n        worker.postMessage('uci');\n\n        worker.onmessage = (event) => {\n            const message = event.data as string;\n            if (message === 'uciok') return;\n\n            if (message.startsWith('info depth')) {\n                const depthMatch = message.match(/depth (\\d+)/);\n                const scoreMatch = message.match(/score (cp|mate) (-?\\d+)/);\n                const pvMatch = message.match(/ pv (.+)/);\n                if (depthMatch) setLiveDepth(parseInt(depthMatch[1], 10));\n                if (scoreMatch) {\n                    const turn = new Chess(fenRef.current).turn();\n                    const type = scoreMatch[1];\n                    let value = parseInt(scoreMatch[2], 10);\n                    if (turn === 'b') value *= -1;\n                    const evalString = type === 'cp' ? (value / 100).toFixed(2) : `M${Math.abs(value)}`;\n                    setLiveEvaluation(evalString);\n                }\n                if (pvMatch) {\n                    // Используем formatUCIToSAN для преобразования\n                    const formattedPV = formatUCIToSAN(pvMatch[1], fenRef.current);\n                    setLivePV(formattedPV);\n                }\n            }\n            if (message.startsWith('bestmove')) { setIsLiveAnalyzing(false); }\n        };\n\n        return () => worker.terminate();\n    }, [formatUCIToSAN]);\n\n    return (\n        <Box sx={{ bgcolor: '#0e0e0e', color: 'white', minHeight: '100vh', py: { xs: 2, md: 5 } }}>\n            <Container maxWidth=\"xl\">\n                <Box sx={{ textAlign: 'center', mb: 4 }}>\n                    <Typography variant=\"h2\" component=\"h1\" fontWeight=\"bold\">{t('chessGame.title')}</Typography>\n                    <Typography variant=\"h6\" sx={{ mt: 1, color: 'rgba(255, 255, 255, 0.7)' }}>{t('chessGame.subtitle')}</Typography>\n                </Box>\n                <Grid container spacing={4}>\n                    <Grid item xs={12} md={7}>\n                        <Paper sx={{ p: 2, bgcolor: '#1c1c1c', borderRadius: 4, aspectRatio: '1 / 1', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                            <ChessBoard\n                                fen={fen}\n                                onPieceDrop={actions.handleMove}\n                                onSquareClick={actions.onSquareClick}\n                                squareStyles={moveOptions}\n                            />\n                        </Paper>\n                    </Grid>\n                    <Grid item xs={12} md={5}>\n                        <Paper sx={{ p: 2, bgcolor: '#1c1c1c', borderRadius: 4, height: '100%' }}>\n                            <Stack spacing={2} height=\"100%\">\n                                <AnalysisPanel\n                                  evaluation={liveEvaluation}\n                                  depth={liveDepth}\n                                  principalVariation={livePV}\n                                  isAnalyzing={isLiveAnalyzing}\n                                  isEngineOn={isEngineOn}\n                                  onToggleEngine={handleToggleEngine}\n                                />\n                                <Box sx={{ flexGrow: 1, height: '250px' }}>\n                                    <MoveHistory history={annotatedHistory} currentMoveIndex={currentMoveIndex} onMoveClick={handleGoToMove} />\n                                </Box>\n                                <Stack direction=\"row\" spacing={1} justifyContent=\"center\" alignItems=\"center\">\n                                    <IconButton onClick={() => handleGoToMove(0)} disabled={currentMoveIndex === 0}><SkipPreviousIcon /></IconButton>\n                                    <IconButton onClick={() => handleGoToMove(currentMoveIndex - 1)} disabled={currentMoveIndex === 0}><ArrowLeftIcon /></IconButton>\n                                    <IconButton onClick={() => handleGoToMove(currentMoveIndex + 1)} disabled={currentMoveIndex === history.length}><ArrowRightIcon /></IconButton>\n                                    <IconButton onClick={() => handleGoToMove(history.length)} disabled={currentMoveIndex === history.length}><SkipNextIcon /></IconButton>\n                                </Stack>\n                                <Stack spacing={1}>\n                                    <TextField label={t('chessGame.pgnInputLabel')} fullWidth multiline rows={2} variant=\"filled\" value={inputPgn} onChange={(e) => setInputPgn(e.target.value)} sx={{ '& .MuiFilledInput-root': { backgroundColor: 'rgba(255,255,255,0.1)' } }} />\n                                    <Stack direction=\"row\" spacing={1}>\n                                        <Button variant=\"outlined\" onClick={handleResetGame} startIcon={<ReplayIcon />} fullWidth>{t('chessGame.reset')}</Button>\n                                        <Button variant=\"outlined\" onClick={handleLoadPgn} startIcon={<UploadFileIcon />} fullWidth>{t('chessGame.loadPgn')}</Button>\n                                    </Stack>\n                                </Stack>\n                            </Stack>\n                        </Paper>\n                    </Grid>\n                </Grid>\n            </Container>\n        </Box>\n    );\n};","import { Square } from 'chess.js';\nimport React from 'react';\nimport { Chessboard } from 'react-chessboard';\n\ninterface ChessBoardProps {\n  position: string;\n  onMove?: (source: Square, target: Square) => boolean;\n  onSquareClick?: (square: Square) => void;\n  boardWidth?: number;\n}\n\nconst ChessBoard: React.FC<ChessBoardProps> = ({ position, onMove, onSquareClick, boardWidth = 500 }) => {\n  return (\n    <Chessboard\n      position={position}\n      boardWidth={boardWidth}\n      onPieceDrop={onMove ? (source, target) => onMove(source, target) : undefined}\n      onSquareClick={onSquareClick}\n    />\n  );\n};\n\nexport default ChessBoard;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Chess, Square, PieceSymbol, Color } from 'chess.js';\nimport {\n  Checkbox,\n  Container,\n  Stack,\n  Button,\n  TextField,\n  Typography,\n  Box,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  FormGroup,\n  Paper,\n} from '@mui/material';\nimport { notification } from 'antd';\nimport ChessBoard from '../ChessGame/ChessBoard';\n\ninterface PuzzleEditorProps {\n  initialFen?: string;\n}\n\nconst PuzzleEditor: React.FC<PuzzleEditorProps> = ({ initialFen }) => {\n  const defaultFen = initialFen || '8/8/8/8/8/8/8/8 w - - 0 1';\n  const [isCursorOnBoard, setIsCursorOnBoard] = useState(false);\n  const [chess] = useState(() => {\n    const instance = new Chess();\n    instance.clear();\n    return instance;\n  });\n  const [fen, setFen] = useState(defaultFen);\n  const [draggedPiece, setDraggedPiece] = useState<{\n    icon: string;\n    type: PieceSymbol;\n    color: Color;\n  } | null>(null);\n  const [cursorStyle, setCursorStyle] = useState<React.CSSProperties | null>(null);\n\n  const pieces: { type: PieceSymbol; color: Color; icon: string }[] = [\n    { type: 'k', color: 'b', icon: '♚' },\n    { type: 'q', color: 'b', icon: '♛' },\n    { type: 'r', color: 'b', icon: '♜' },\n    { type: 'b', color: 'b', icon: '♝' },\n    { type: 'n', color: 'b', icon: '♞' },\n    { type: 'p', color: 'b', icon: '♟' },\n    { type: 'k', color: 'w', icon: '♔' },\n    { type: 'q', color: 'w', icon: '♕' },\n    { type: 'r', color: 'w', icon: '♖' },\n    { type: 'b', color: 'w', icon: '♗' },\n    { type: 'n', color: 'w', icon: '♘' },\n    { type: 'p', color: 'w', icon: '♙' },\n  ];\n\n  const boardRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!draggedPiece || !isCursorOnBoard || !boardRef.current) return;\n  \n      const rect = boardRef.current.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n  \n      if (x >= 0 && y >= 0 && x <= rect.width && y <= rect.height) {\n        setCursorStyle({\n          left: x,\n          top: y,\n        });\n      }\n    };\n  \n    window.addEventListener('mousemove', handleMouseMove);\n    return () => window.removeEventListener('mousemove', handleMouseMove);\n  }, [draggedPiece, isCursorOnBoard]);\n  \n  \n\n  const updateCastlingRights = (\n    _rights: string,\n    checked: boolean,\n    flag: 'K' | 'Q' | 'k' | 'q'\n  ) => {\n    let parts = fen.split(' ');\n    let castling = parts[2] === '-' ? '' : parts[2];\n    if (checked) {\n      castling = (castling + flag).split('').sort().join('');\n    } else {\n      castling = castling.replace(flag, '');\n    }\n    parts[2] = castling || '-';\n    const updatedFen = parts.join(' ');\n    try {\n      chess.load(updatedFen);\n      setFen(updatedFen);\n    } catch {\n      notification.error({\n        message: 'Ошибка рокировки',\n        description: undefined\n      });\n    }\n  };\n\n  const handleSquareClick = (square: Square) => {\n    const [file, rank] = [square.charCodeAt(0) - 97, 8 - parseInt(square[1])];\n    const board = chess.board();\n    const existingPiece = board[rank][file];\n  \n    if (draggedPiece) {\n      // если фигура уже стоит там — удалим её\n      if (\n        existingPiece &&\n        existingPiece.type === draggedPiece.type &&\n        existingPiece.color === draggedPiece.color\n      ) {\n        chess.remove(square);\n      } else {\n        chess.put(draggedPiece, square);\n      }\n      setFen(chess.fen());\n      return;\n    }\n  \n    if (existingPiece) {\n      chess.remove(square);\n      setFen(chess.fen());\n    }\n  };\n  \n\n  const clearBoard = () => {\n    chess.clear();\n    setFen(chess.fen());\n    notification.success({\n      message: 'Доска очищена!',\n      description: undefined\n    });\n  };\n\n  const setInitialPosition = () => {\n    chess.reset();\n    setFen(chess.fen());\n    notification.success({\n      message: 'Установлена начальная позиция!',\n      description: undefined\n    });\n  };\n\n  const removeDraggedPiece = () => {\n    setDraggedPiece(null);\n    setCursorStyle(null);\n  };\n\n  const savePosition = () => {\n    const kingCount = fen.split('').filter((char) => char.toLowerCase() === 'k').length;\n    if (kingCount < 2) {\n      notification.error({\n        message: 'Некорректная позиция',\n        description: 'На доске должно быть как минимум два короля.',\n      });\n      return;\n    }\n\n    try {\n      chess.load(fen);\n      notification.success({ message: 'Позиция сохранена', description: `FEN: ${fen}` });\n    } catch (error) {\n      notification.error({\n        message: 'Ошибка сохранения',\n        description: 'Некорректная FEN-позиция',\n      });\n    }\n  };\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" gutterBottom>\n        Редактор шахматной позиции\n      </Typography>\n\n      <Box display=\"flex\">\n      <Box\n  onMouseEnter={() => setIsCursorOnBoard(true)}\n  onMouseLeave={() => setIsCursorOnBoard(false)}\n  style={{\n    cursor: draggedPiece ? 'none' : 'default',\n    position: 'relative',\n    width: 500, // такой же как boardWidth\n    height: 500,\n  }}\n>\n  <ChessBoard\n    position={fen}\n    onSquareClick={handleSquareClick}\n    boardWidth={500}\n  />\n  {cursorStyle && draggedPiece && (\n    <div\n      style={{\n        ...cursorStyle,\n        position: 'absolute',\n        pointerEvents: 'none',\n        left: cursorStyle.left,\n        top: cursorStyle.top,\n        fontSize: '32px',\n        zIndex: 1000,\n      }}\n    >\n      {draggedPiece.icon}\n    </div>\n  )}\n</Box>\n\n\n        <Box ml={3} display=\"flex\" flexDirection=\"column\">\n          <Paper elevation={3} style={{ padding: '10px', marginBottom: '20px' }}>\n            <Typography variant=\"h6\" gutterBottom>Фигуры</Typography>\n            <Box display=\"grid\" gridTemplateColumns=\"repeat(2, 1fr)\" gap={1}>\n              {pieces.map((piece, idx) => (\n                <Box\n                  key={idx}\n                  onClick={() => setDraggedPiece(piece)}\n                  style={{\n                    textAlign: 'center',\n                    cursor: 'pointer',\n                    padding: 6,\n                    border: '1px solid #aaa',\n                    borderRadius: 4,\n                    fontSize: 24,\n                    backgroundColor: draggedPiece === piece ? '#1976d2' : '#f5f5f5',\n                    color: draggedPiece === piece ? '#fff' : 'inherit',\n                  }}\n                >\n                  {piece.icon}\n                </Box>\n              ))}\n            </Box>\n          </Paper>\n\n          <Paper elevation={3} style={{ padding: '10px', marginBottom: '20px' }}>\n            <Typography variant=\"h6\">Рокировка</Typography>\n            <FormGroup row>\n              <FormControlLabel\n                control={<Checkbox checked={fen.includes('K')} onChange={(e) => updateCastlingRights(fen, e.target.checked, 'K')} />}\n                label=\"Белые 0-0\"\n              />\n              <FormControlLabel\n                control={<Checkbox checked={fen.includes('Q')} onChange={(e) => updateCastlingRights(fen, e.target.checked, 'Q')} />}\n                label=\"Белые 0-0-0\"\n              />\n              <FormControlLabel\n                control={<Checkbox checked={fen.includes('k')} onChange={(e) => updateCastlingRights(fen, e.target.checked, 'k')} />}\n                label=\"Чёрные 0-0\"\n              />\n              <FormControlLabel\n                control={<Checkbox checked={fen.includes('q')} onChange={(e) => updateCastlingRights(fen, e.target.checked, 'q')} />}\n                label=\"Чёрные 0-0-0\"\n              />\n            </FormGroup>\n          </Paper>\n\n          <Paper elevation={3} style={{ padding: '10px' }}>\n            <Typography variant=\"h6\">Ход</Typography>\n            <RadioGroup\n              row\n              value={chess.turn()}\n              onChange={(e) => {\n                const newFen = fen.split(' ');\n                newFen[1] = e.target.value;\n                const updatedFen = newFen.join(' ');\n                try {\n                  chess.load(updatedFen);\n                  setFen(updatedFen);\n                } catch {\n                  notification.error({\n                    message: 'Ошибка изменения хода',\n                    description: undefined\n                  });\n                }\n              }}\n            >\n              <FormControlLabel value=\"w\" control={<Radio />} label=\"Белые\" />\n              <FormControlLabel value=\"b\" control={<Radio />} label=\"Чёрные\" />\n            </RadioGroup>\n          </Paper>\n        </Box>\n      </Box>\n\n      <Stack direction=\"row\" spacing={2} mt={3}>\n        <Button variant=\"contained\" onClick={clearBoard}>Очистить доску</Button>\n        <Button variant=\"contained\" onClick={setInitialPosition}>Начальная позиция</Button>\n        <Button variant=\"contained\" onClick={removeDraggedPiece}>Убрать фигуру</Button>\n        <Button variant=\"contained\" color=\"primary\" onClick={savePosition}>Сохранить</Button>\n      </Stack>\n\n      <TextField\n        label=\"FEN\"\n        value={fen}\n        fullWidth\n        multiline\n        rows={2}\n        onChange={(e) => {\n          const newFen = e.target.value;\n          try {\n            chess.load(newFen);\n            setFen(newFen);\n          } catch {\n            notification.error({\n              message: 'Некорректный FEN',\n              description: undefined\n            });\n          }\n        }}\n        style={{ marginTop: 20 }}\n      />\n\n      {cursorStyle && draggedPiece && (\n        <div style={cursorStyle}>{draggedPiece.icon}</div>\n      )}\n    </Container>\n  );\n};\n\nexport default PuzzleEditor;\n","import axiosInstance from '@/api';\n\nexport const checkVerificationStatus = async (email: string): Promise<{ emailVerified: boolean }> => {\n  const response = await axiosInstance.get('/auth/check-verification', {\n    params: { email }, \n  });\n  return response.data;\n};","import axiosInstance from '@/api';\n\nexport const resendVerificationEmail = async (email: string): Promise<{ msg: string }> => {\n  const response = await axiosInstance.post('/auth/resend-verification', { email });\n  return response.data;\n};","import React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Typography, Button, Box, CircularProgress } from '@mui/material';\nimport { useTranslation } from 'react-i18next';\n\nimport { checkVerificationStatus, resendVerificationEmail } from '@/api/email-verify';\n\nexport const VerifyEmailPage: React.FC = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { t } = useTranslation();\n  \n  const { firstName, lastName, email } = location.state || {};\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [isPolling, setIsPolling] = useState(true); \n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const [resendDisabled, setResendDisabled] = useState(false);\n\n  const intervalIdRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (!email) {\n      console.error(\"Email not found in location state. Redirecting to register.\");\n      navigate('/register');\n      return;\n    }\n    \n    intervalIdRef.current = setInterval(async () => {\n      try {\n        const { emailVerified } = await checkVerificationStatus(email);\n        if (emailVerified) {\n          setIsPolling(false);\n          navigate('/login', { state: { message: t('verifyEmail.verifiedAndReadyToLogin') } });\n        }\n      } catch (error) {\n        console.error('Polling error:', error);\n      }\n    }, 5000);\n\n    return () => {\n      if (intervalIdRef.current) {\n        clearInterval(intervalIdRef.current);\n      }\n    };\n  }, [email, navigate, t]);\n\n  const handleResendEmail = async () => {\n    if (!email) return;\n\n    setIsLoading(true);\n    setSuccessMessage(null);\n    setErrorMessage(null);\n    try {\n      await resendVerificationEmail(email); \n\n      setSuccessMessage(t('verifyEmail.resendSuccess'));\n      setResendDisabled(true);\n      setTimeout(() => setResendDisabled(false), 120000); \n    } catch (error: any) {\n      if (error.response?.status === 429) {\n        setErrorMessage(t('verifyEmail.resendErrorTooMany'));\n      } else {\n        setErrorMessage(t('verifyEmail.resendError'));\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  return (\n    <Box textAlign=\"center\" mt={5} p={2}>\n      {isPolling && <CircularProgress sx={{ mb: 2 }} />}\n      <Typography variant=\"h4\" gutterBottom>\n        {t('verifyEmail.pageTitle')}\n      </Typography>\n      <Typography variant=\"body1\" gutterBottom>\n        <b>{t('verifyEmail.greeting', { firstName: firstName || '', lastName: lastName || '' })}</b>\n      </Typography>\n      <Typography variant=\"body1\" gutterBottom>\n        {t('verifyEmail.sentTo', { email: email || t('verifyEmail.yourEmail') })}\n      </Typography>\n      <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mt: 2, maxWidth: '600px', mx: 'auto' }}>\n        {t('verifyEmail.instruction')}\n      </Typography>\n\n      {successMessage && !errorMessage && (\n        <Typography variant=\"body2\" color=\"primary.main\" sx={{ mt: 2, fontWeight: 'bold' }}>\n          {successMessage}\n        </Typography>\n      )}\n\n      {errorMessage && (\n        <Typography variant=\"body2\" color=\"error\" sx={{ mt: 2, fontWeight: 'bold' }}>\n          {errorMessage}\n        </Typography>\n      )}\n\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleResendEmail}\n        disabled={resendDisabled || isLoading}\n        sx={{ mt: 3, mb: 2 }}\n      >\n        {isLoading ? t('verifyEmail.sending') : t('verifyEmail.resendButton')}\n      </Button>\n      \n      <Typography variant=\"caption\" display=\"block\">\n        {t('verifyEmail.didNotReceive')}\n      </Typography>\n    </Box>\n  );\n};","import axiosInstance from '@/api'; \n\nexport const fetchRequests = async () => {\n  const response = await axiosInstance.get('/trainer/requests', {\n  });\n  return response.data;\n};\n\n","import axiosInstance from '@/api'; \n\nexport const handleRequest = async (requestId: string, status: 'approved' | 'rejected') => {\n    await axiosInstance.patch(\n      `/trainer/request?request_id=${requestId}`,\n      { status },\n    );\n  };","import axiosInstance from '@/api'; \n\nexport const createRequest = async (coachId: string, experience: string, goals: string) => {\n  const response = await axiosInstance.post(\n      '/trainer/request', \n      {\n        coachId,\n        experience,\n        goals,\n      }\n    );\n    return response.data;\n};","import React, { useState, useEffect } from 'react';\nimport {\n  Container, Typography, Grid, Card, CardContent, Button, Dialog, DialogTitle,\n  DialogContent, DialogActions, TextField, Select, MenuItem, InputLabel,\n  FormControl, Divider, Box, Stack, Chip, Avatar, IconButton, InputAdornment, Paper,\n  CardMedia\n} from '@mui/material';\nimport { getCoaches } from '@/api/coaches';\nimport { notification } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { createRequest } from '@/api/requests';\n\n// Icons\nimport WorkHistoryIcon from '@mui/icons-material/WorkHistory';\nimport AttachMoneyIcon from '@mui/icons-material/AttachMoney';\nimport CloseIcon from '@mui/icons-material/Close';\nimport EditIcon from '@mui/icons-material/Edit';\nimport SendIcon from '@mui/icons-material/Send';\nimport SearchIcon from '@mui/icons-material/Search';\n\ninterface Coach {\n  _id: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  photoUrl?: string;\n  coachProfile?: {\n    title?: string;\n    experience?: string;\n    bio?: string;\n    price?: number;\n    services?: string[];\n  };\n}\n\n// Helper for styling form inputs\nconst formInputStyles = {\n  '& .MuiInputBase-root': {\n    backgroundColor: 'rgba(255, 255, 255, 0.08)',\n    '&:hover': {\n      backgroundColor: 'rgba(255, 255, 255, 0.12)',\n    }\n  },\n  '& .MuiInputLabel-root': {\n    color: 'rgba(255, 255, 255, 0.6)'\n  },\n  '& .MuiInputBase-input': {\n    color: 'white'\n  },\n   '& .MuiSelect-icon': {\n    color: 'rgba(255, 255, 255, 0.6)'\n  }\n};\n\n\nexport const CoachesPage: React.FC = () => {\n  const { t } = useTranslation();\n  const [coaches, setCoaches] = useState<Coach[]>([]);\n  const [selectedCoach, setSelectedCoach] = useState<Coach | null>(null);\n  const [filter, setFilter] = useState('');\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n\n  const currentUserEmail = localStorage.getItem('email');\n\n  const [formValues, setFormValues] = useState({\n    userName: '',\n    userEmail: '',\n    experienceLevel: 'Intermediate', // Using a key for state\n    goals: '',\n  });\n\n  const [editProfile, setEditProfile] = useState({\n    title: '',\n    experience: '',\n    bio: '',\n    price: '',\n    services: '',\n  });\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const data = await getCoaches();\n        setCoaches(data);\n      } catch (error) {\n        notification.error({\n          message: t('coaches.fetchError'),\n          description: undefined\n        });\n      }\n    };\n    fetchData();\n  }, [t]);\n\n  const handleOpenDialog = (coach: Coach) => {\n    setSelectedCoach(coach);\n    setIsDialogOpen(true);\n    setShowForm(false);\n    setIsEditMode(false);\n\n    setEditProfile({\n      title: coach.coachProfile?.title || '',\n      experience: coach.coachProfile?.experience || '',\n      bio: coach.coachProfile?.bio || '',\n      price: coach.coachProfile?.price?.toString() || '',\n      services: (coach.coachProfile?.services || []).join(', '),\n    });\n  };\n\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n    setTimeout(() => {\n      setSelectedCoach(null);\n      setShowForm(false);\n      setIsEditMode(false);\n      setFormValues({ userName: '', userEmail: '', experienceLevel: 'Intermediate', goals: '' });\n    }, 300);\n  };\n\n  const handleSendRequest = async () => {\n    if (!selectedCoach) return;\n    \n    try {\n      setIsLoading(true);\n      await createRequest(selectedCoach._id, formValues.experienceLevel, formValues.goals);\n      notification.success({\n        message: t('coaches.successMessage'),\n        description: undefined\n      });\n      handleCloseDialog();\n    } catch (error) {\n      notification.error({\n        message: t('coaches.submitError'),\n        description: undefined\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSaveEdit = async () => {\n    console.log(\"Saving profile:\", editProfile);\n    notification.success({\n      message: t('coaches.updated'),\n      description: undefined\n    });\n    handleCloseDialog();\n  };\n\n  const filteredCoaches = coaches.filter((c) =>\n    `${c.firstName} ${c.lastName}`.toLowerCase().includes(filter.toLowerCase())\n  );\n\n  const coachName = selectedCoach ? `${selectedCoach.firstName} ${selectedCoach.lastName}` : '';\n  \n  return (\n    <Box sx={{ bgcolor: '#0e0e0e', color: 'white', minHeight: '100vh', py: 8 }}>\n      <Container maxWidth=\"lg\">\n        <Box sx={{ textAlign: 'center', mb: 8 }}>\n          <Typography variant=\"h2\" component=\"h1\" fontWeight=\"bold\">{t('coaches.title')}</Typography>\n          <Typography variant=\"h6\" sx={{ mt: 1, color: 'rgba(255, 255, 255, 0.7)' }}>\n            {t('coaches.subtitle')}\n          </Typography>\n        </Box>\n\n        <Box sx={{ mb: 5, maxWidth: '600px', mx: 'auto' }}>\n          <TextField\n            fullWidth\n            variant=\"outlined\"\n            placeholder={t('coaches.searchByName')}\n            value={filter}\n            onChange={(e) => setFilter(e.target.value)}\n            sx={{\n              '& .MuiOutlinedInput-root': {\n                borderRadius: '30px',\n                backgroundColor: '#1c1c1c',\n                '& fieldset': { borderColor: 'rgba(255, 255, 255, 0.2)' },\n                '&:hover fieldset': { borderColor: '#FFD700' },\n                '&.Mui-focused fieldset': { borderColor: '#FFD700' },\n              },\n              '& .MuiInputBase-input': { color: 'white' },\n            }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon sx={{ color: 'rgba(255, 255, 255, 0.5)' }} />\n                </InputAdornment>\n              ),\n            }}\n          />\n        </Box>\n\n        <Grid container spacing={4}>\n          {filteredCoaches.map((coach) => (\n            <Grid item xs={12} sm={6} md={4} key={coach._id}>\n              <Card sx={{\n                bgcolor: '#1c1c1c',\n                color: 'white',\n                borderRadius: 4,\n                height: '100%',\n                display: 'flex',\n                flexDirection: 'column',\n                transition: 'transform 0.3s ease, box-shadow 0.3s ease',\n                '&:hover': {\n                  transform: 'translateY(-8px)',\n                  boxShadow: '0 12px 24px rgba(255, 215, 0, 0.2)'\n                }\n              }}>\n                <CardMedia\n                  component=\"img\"\n                  height=\"250\"\n                  image={coach.photoUrl || '/images/default-avatar.png'}\n                  alt={`${coach.firstName} ${coach.lastName}`}\n                />\n                <CardContent sx={{ flexGrow: 1 }}>\n                  <Typography variant=\"h5\" component=\"div\" fontWeight=\"bold\">\n                    {coach.firstName} {coach.lastName}\n                  </Typography>\n                  <Typography variant=\"body1\" sx={{ color: '#FFD700', mb: 2 }}>\n                    {coach.coachProfile?.title || 'Chess Master'}\n                  </Typography>\n                  <Stack spacing={1}>\n                    <Box sx={{ display: 'flex', alignItems: 'center', color: 'rgba(255,255,255,0.7)' }}>\n                      <WorkHistoryIcon fontSize=\"small\" sx={{ mr: 1 }} />\n                      <Typography variant=\"body2\">{coach.coachProfile?.experience || 'N/A'}</Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center', color: 'rgba(255,255,255,0.7)' }}>\n                      <AttachMoneyIcon fontSize=\"small\" sx={{ mr: 1 }} />\n                      <Typography variant=\"body2\">{coach.coachProfile?.price ? `${coach.coachProfile.price}$ / hour` : 'Contact for price'}</Typography>\n                    </Box>\n                  </Stack>\n                </CardContent>\n                <Box sx={{ p: 2, pt: 0 }}>\n                  <Button\n                    variant=\"contained\"\n                    fullWidth\n                    onClick={() => handleOpenDialog(coach)}\n                    sx={{ \n                      backgroundColor: '#FFD700', color: 'black', fontWeight: 'bold', borderRadius: '20px',\n                      '&:hover': { backgroundColor: '#FFC107' }\n                    }}\n                  >\n                    {t('coaches.viewProfile')}\n                  </Button>\n                </Box>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n\n        {/* --- DIALOG MODAL - KEY CHANGES BELOW --- */}\n        <Dialog open={isDialogOpen} onClose={handleCloseDialog} fullWidth maxWidth=\"md\" PaperProps={{\n          sx: { bgcolor: '#1c1c1c', color: 'white', borderRadius: 4, backgroundImage: 'none' }\n        }}>\n          {selectedCoach && ( // Ensure selectedCoach exists before rendering\n          <>\n            <DialogTitle sx={{ p: 3, pb: 1 }}>\n              <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                <Typography variant=\"h5\" fontWeight=\"bold\">\n                  {isEditMode ? t('coaches.editProfile') : t('coaches.profileOf', { coachName })}\n                </Typography>\n                <IconButton onClick={handleCloseDialog} sx={{ color: 'rgba(255,255,255,0.7)' }}>\n                  <CloseIcon />\n                </IconButton>\n              </Stack>\n            </DialogTitle>\n            <DialogContent>\n              {isEditMode ? (\n                <Stack spacing={2} sx={{ pt: 1 }}>\n                  {/* Edit form remains the same */}\n                </Stack>\n              ) : (\n                <>\n                  <Grid container spacing={4} sx={{ pt: 1 }}>\n                    <Grid item xs={12} md={4}>\n                      <Avatar src={selectedCoach.photoUrl || '/images/default-avatar.png'} sx={{ width: '100%', height: 'auto', aspectRatio: '1 / 1', borderRadius: 3 }} variant=\"rounded\" />\n                    </Grid>\n                    <Grid item xs={12} md={8}>\n                      <Stack spacing={2.5}>\n                        <Box>\n                          <Typography fontWeight=\"bold\" color=\"#FFD700\">{t('coaches.bio')}</Typography>\n                          <Typography sx={{ color: 'rgba(255,255,255,0.8)', whiteSpace: 'pre-wrap' }}>\n                            {selectedCoach.coachProfile?.bio || <span style={{ color: 'rgba(255,255,255,0.5)', fontStyle: 'italic' }}>No bio provided.</span>}\n                          </Typography>\n                        </Box>\n                        <Box>\n                          <Typography fontWeight=\"bold\" color=\"#FFD700\">{t('coaches.services')}</Typography>\n                          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1, mt: 1 }}>\n                            {selectedCoach.coachProfile?.services?.length ? selectedCoach.coachProfile.services.map(s => <Chip key={s} label={s} sx={{ bgcolor: 'rgba(255,255,255,0.2)', color: 'white' }}/>) : <Typography sx={{ color: 'rgba(255,255,255,0.5)', fontStyle: 'italic' }}>No services listed.</Typography>}\n                          </Box>\n                        </Box>\n                      </Stack>\n                    </Grid>\n                  </Grid>\n\n                  <Divider sx={{ my: 3, borderColor: 'rgba(255,255,255,0.2)' }} />\n                  \n                  <Box>\n                    {!showForm ? (\n                      <Button fullWidth variant=\"outlined\" onClick={() => setShowForm(true)} sx={{ color: '#FFD700', borderColor: '#FFD700', '&:hover': { borderColor: '#FFC107', bgcolor: 'rgba(255, 215, 0, 0.1)' }}}>\n                        {t('coaches.requestTitle', { coachName: selectedCoach.firstName })}\n                      </Button>\n                    ) : (\n                      <Paper elevation={0} sx={{ p: {xs: 2, sm: 3}, bgcolor: 'rgba(0,0,0,0.25)', borderRadius: 2 }}>\n                        <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                          {t('coaches.requestTitle', { coachName })}\n                        </Typography>\n                        <Stack spacing={2}>\n                          <TextField fullWidth label={t('coaches.yourName')} value={formValues.userName} onChange={(e) => setFormValues({ ...formValues, userName: e.target.value })} variant=\"filled\" sx={formInputStyles} />\n                          <TextField fullWidth label={t('coaches.yourEmail')} value={formValues.userEmail} onChange={(e) => setFormValues({ ...formValues, userEmail: e.target.value })} variant=\"filled\" sx={formInputStyles} />\n                          <FormControl fullWidth variant=\"filled\" sx={formInputStyles}>\n                            <InputLabel id=\"level-select-label\">{t('coaches.level')}</InputLabel>\n                            <Select\n                              labelId=\"level-select-label\"\n                              value={formValues.experienceLevel}\n                              onChange={(e) => setFormValues({ ...formValues, experienceLevel: e.target.value })}\n                            >\n                              <MenuItem value=\"Beginner\">{t('coaches.levelBeginner')}</MenuItem>\n                              <MenuItem value=\"Intermediate\">{t('coaches.levelIntermediate')}</MenuItem>\n                              <MenuItem value=\"Advanced\">{t('coaches.levelAdvanced')}</MenuItem>\n                            </Select>\n                          </FormControl>\n                          <TextField fullWidth multiline rows={3} label={t('coaches.goals')} value={formValues.goals} onChange={(e) => setFormValues({ ...formValues, goals: e.target.value })} variant=\"filled\" sx={formInputStyles} />\n                        </Stack>\n                      </Paper>\n                    )}\n                  </Box>\n                </>\n              )}\n            </DialogContent>\n            <DialogActions sx={{ p: 3, pt: 2 }}>\n              {isEditMode ? (\n                <>\n                  <Button onClick={() => setIsEditMode(false)} sx={{ color: 'rgba(255,255,255,0.7)' }}>{t('coaches.cancel')}</Button>\n                  <Button variant=\"contained\" onClick={handleSaveEdit} startIcon={<EditIcon />} sx={{ bgcolor: '#FFD700', color: 'black', '&:hover': { bgcolor: '#FFC107' } }}>{t('coaches.save')}</Button>\n                </>\n              ) : showForm ? (\n                <>\n                  <Button variant=\"outlined\" onClick={() => setShowForm(false)} sx={{ color: 'rgba(255,255,255,0.7)', borderColor: 'rgba(255,255,255,0.3)' }}>\n                    {t('coaches.cancel')}\n                  </Button>\n                  <Button variant=\"contained\" onClick={handleSendRequest} disabled={isLoading} startIcon={<SendIcon />} sx={{ bgcolor: '#FFD700', color: 'black', '&:hover': { bgcolor: '#FFC107' } }}>\n                    {t('coaches.sendRequest')}\n                  </Button>\n                </>\n              ) : (\n                selectedCoach.email === currentUserEmail && (\n                  <Button variant=\"text\" onClick={() => setIsEditMode(true)} startIcon={<EditIcon />} sx={{ color: '#FFD700' }}>\n                    {t('coaches.editProfile')}\n                  </Button>\n                )\n              )}\n            </DialogActions>\n          </>\n          )}\n        </Dialog>\n      </Container>\n    </Box>\n  );\n};","import axiosInstance from '@/api';\n\ninterface HomeworkPayload {\n  studentId: string;\n  scheduleId: string;\n  homeworkText?: string;\n  screenshot?: File;\n}\n\nexport const sendHomework = async (payload: HomeworkPayload): Promise<void> => {\n  const formData = new FormData();\n  formData.append('studentId', payload.studentId);\n  formData.append('scheduleId', payload.scheduleId);\n  \n  if (payload.homeworkText) {\n    formData.append('homeworkText', payload.homeworkText);\n  }\n  if (payload.screenshot) {\n    formData.append('screenshot', payload.screenshot);\n  }\n\n  await axiosInstance.post('/homework/send', formData);\n};\n","import axiosInstance from '@/api';\n\ninterface ReviewPayload {\n  status: 'approved' | 'rejected';\n  comment: string;\n}\n\nexport const reviewHomework = async (homeworkId: string, payload: ReviewPayload): Promise<any> => {\n  const response = await axiosInstance.put(`/homework/${homeworkId}/review`, payload);\n  return response.data;\n};","import axiosInstance from '@/api';\n\nexport const getHomeworksForReview = async (): Promise<any[]> => {\n  const response = await axiosInstance.get('/homework/coach');\n  return response.data;\n};\n","import axiosInstance from '@/api';\n\nexport const getHomeworkScreenshot = async (homeworkId: string): Promise<Blob> => {\n  const response = await axiosInstance.get(\n    `/homework/${homeworkId}/screenshot`, \n    { responseType: 'blob' } \n  );\n  return response.data;\n};","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Container,\n  Grid,\n  Paper,\n  Typography,\n  Button,\n  List,\n  ListItemText,\n  ListItemButton,\n  CircularProgress,\n  Box,\n  TextField,\n  Divider,\n  Tabs,\n  Tab,\n  Link,\n} from '@mui/material';\nimport { notification } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\nimport { fetchRequests, handleRequest } from '@/api/requests';\nimport { getHomeworksForReview, reviewHomework, getHomeworkScreenshot } from '@/api/homework';\n\ninterface Request {\n  _id: string;\n  student: { _id: string; firstName: string; lastName: string; email: string; };\n  experience?: string;\n  goals?: string;\n  createdAt: string;\n  status: 'pending' | 'approved' | 'rejected';\n}\n\ninterface Homework {\n  _id: string;\n  student: { _id: string; firstName: string; lastName: string; };\n  schedule: { title: string; };\n  text?: string;\n  hasScreenshot?: boolean;\n  submittedAt: string;\n  status: 'pending' | 'approved' | 'rejected';\n}\n\ntype InboxItem = Request | Homework;\ntype ViewType = 'requests' | 'homework';\n\nconst isRequest = (item: InboxItem): item is Request => 'createdAt' in item;\n\nexport const InboxPage: React.FC = () => {\n  const { t } = useTranslation();\n  const [view, setView] = useState<ViewType>('requests');\n  const [items, setItems] = useState<InboxItem[]>([]);\n  const [selectedItem, setSelectedItem] = useState<InboxItem | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [reviewComment, setReviewComment] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [screenshotUrl, setScreenshotUrl] = useState<string | null>(null);\n  const [isLoadingScreenshot, setIsLoadingScreenshot] = useState(false);\n\n  const fetchData = useCallback(async (currentView: ViewType) => {\n    setIsLoading(true);\n    setSelectedItem(null);\n    try {\n      const data = currentView === 'requests'\n        ? await fetchRequests()\n        : await getHomeworksForReview();\n      setItems(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error(`Error loading ${currentView}:`, error); // Console log for developers can remain in English\n      notification.error({\n        message: t('inbox.errors.loadFailed'),\n        description: undefined\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }, [t]);\n\n  useEffect(() => {\n    fetchData(view);\n  }, [view, fetchData]);\n\n  useEffect(() => {\n    let objectUrl: string | null = null;\n  \n    const fetchScreenshot = async () => {\n      if (!selectedItem || isRequest(selectedItem) || !selectedItem.hasScreenshot) {\n        setScreenshotUrl(null);\n        return;\n      }\n      setIsLoadingScreenshot(true);\n      try {\n        const screenshotBlob = await getHomeworkScreenshot(selectedItem._id);\n        objectUrl = URL.createObjectURL(screenshotBlob);\n        setScreenshotUrl(objectUrl);\n      } catch (error) {\n        console.error(\"Screenshot load error:\", error);\n        notification.error({\n          message: t('inbox.errors.loadScreenshotFailed'),\n          description: undefined\n        });\n      } finally {\n        setIsLoadingScreenshot(false);\n      }\n    };\n  \n    fetchScreenshot();\n    setReviewComment('');\n  \n    // Cleanup function\n    return () => {\n      if (objectUrl) {\n        URL.revokeObjectURL(objectUrl);\n      }\n    };\n  }, [selectedItem, t]);\n  \n  const handleRequestAction = async (action: 'approved' | 'rejected') => {\n    if (!selectedItem || !isRequest(selectedItem)) return;\n    setIsSubmitting(true);\n    try {\n      await handleRequest(selectedItem._id, action);\n      notification.success({\n        message: t('inbox.success.requestHandled', {\n          action: t(action === 'approved' ? 'inbox.success.actions.approved' : 'inbox.success.actions.rejected')\n        }),\n        description: undefined\n      });\n      await fetchData('requests');\n    } catch (error) {\n      console.error('Error handling request:', error);\n      notification.error({\n        message: t('inbox.errors.handleRequestFailed'),\n        description: undefined\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleHomeworkAction = async (action: 'approved' | 'rejected') => {\n    if (!selectedItem || isRequest(selectedItem)) return;\n    setIsSubmitting(true);\n    try {\n      await reviewHomework(selectedItem._id, { status: action, comment: reviewComment });\n      notification.success({\n        message: t('inbox.success.homeworkReviewed'),\n        description: undefined\n      });\n      await fetchData('homework');\n    } catch (error) {\n      console.error('Error reviewing homework:', error);\n      notification.error({\n        message: t('inbox.errors.reviewHomeworkFailed'),\n        description: undefined\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const renderItemDetails = () => {\n    if (isLoading && !selectedItem) return null;\n    if (!selectedItem) {\n      return <Typography color=\"text.secondary\">{t('inbox.selectItemPrompt')}</Typography>;\n    }\n\n    if (isRequest(selectedItem)) {\n      return (\n        <>\n          <Typography variant=\"h6\">{selectedItem.student.firstName} {selectedItem.student.lastName}</Typography>\n          <Typography>{t('inbox.details.email')}: {selectedItem.student.email}</Typography>\n          <Typography>{t('inbox.details.sent')}: {new Date(selectedItem.createdAt).toLocaleString()}</Typography>\n          <Divider sx={{ my: 2 }} />\n          <Typography><strong>{t('inbox.details.experience')}:</strong> {selectedItem.experience || t('inbox.details.notSpecified')}</Typography>\n          <Typography><strong>{t('inbox.details.goals')}:</strong> {selectedItem.goals || t('inbox.details.notSpecified')}</Typography>\n          <Box mt={3} display=\"flex\" gap={2}>\n            <Button variant=\"contained\" color=\"primary\" onClick={() => handleRequestAction('approved')} disabled={isSubmitting || selectedItem.status !== 'pending'}>\n              {t('inbox.actions.approve')}\n            </Button>\n            <Button variant=\"contained\" color=\"secondary\" onClick={() => handleRequestAction('rejected')} disabled={isSubmitting || selectedItem.status !== 'pending'}>\n              {t('inbox.actions.reject')}\n            </Button>\n          </Box>\n        </>\n      );\n    } else {\n      return (\n        <>\n          <Typography variant=\"h5\" gutterBottom>{selectedItem.schedule?.title || t('inbox.list.untitled')}</Typography>\n          <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom>\n            {t('inbox.details.student')}: {selectedItem.student.firstName} {selectedItem.student.lastName}\n          </Typography>\n          <Divider sx={{ my: 2 }} />\n          {selectedItem.text && (\n            <Box mb={2}>\n              <Typography variant=\"h6\">{t('inbox.details.responseText')}:</Typography>\n              <Typography sx={{ whiteSpace: 'pre-wrap', p: 1, bgcolor: 'action.hover', borderRadius: 1 }}>{selectedItem.text}</Typography>\n            </Box>\n          )}\n          \n          {selectedItem.hasScreenshot && (\n            <Box mb={2}>\n              <Typography variant=\"h6\">{t('inbox.details.screenshot')}:</Typography>\n              {isLoadingScreenshot && <Box sx={{display: 'flex', alignItems: 'center', my: 2}}><CircularProgress size={24} sx={{mr: 2}} /> {t('inbox.loading')}</Box>}\n              {screenshotUrl && !isLoadingScreenshot && (\n                <Link href={screenshotUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <img \n                    src={screenshotUrl} \n                    alt={t('inbox.details.screenshotAlt')}\n                    style={{ maxWidth: '100%', height: 'auto', borderRadius: '8px', border: '1px solid #ddd', display: 'block', cursor: 'pointer' }} \n                  />\n                </Link>\n              )}\n            </Box>\n          )}\n          \n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\">{t('inbox.details.feedback')}:</Typography>\n          <TextField \n            fullWidth \n            multiline \n            rows={4} \n            label={t('inbox.details.commentLabel')}\n            value={reviewComment} \n            onChange={(e) => setReviewComment(e.target.value)} \n            margin=\"normal\" \n            disabled={isSubmitting}\n          />\n          <Box mt={2} display=\"flex\" gap={2}>\n            <Button variant=\"contained\" color=\"success\" onClick={() => handleHomeworkAction('approved')} disabled={isSubmitting}>\n              {t('inbox.actions.approve')}\n            </Button>\n            <Button variant=\"contained\" color=\"error\" onClick={() => handleHomeworkAction('rejected')} disabled={isSubmitting}>\n              {t('inbox.actions.sendForRevision')}\n            </Button>\n          </Box>\n        </>\n      );\n    }\n  };\n\n  return (\n    <Container sx={{ py: 4 }}>\n      <Typography variant=\"h4\" gutterBottom>{t('inbox.title')}</Typography>\n\n      <Box sx={{ borderBottom: 1, borderColor: 'divider', mb: 2 }}>\n        <Tabs value={view} onChange={(_e, newValue) => setView(newValue)} aria-label=\"inbox tabs\">\n          <Tab label={t('inbox.tabs.requests')} value=\"requests\" />\n          <Tab label={t('inbox.tabs.homework')} value=\"homework\" />\n        </Tabs>\n      </Box>\n\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={4}>\n          <Paper style={{ maxHeight: '80vh', overflow: 'auto' }}>\n            {isLoading ? (\n                <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}><CircularProgress /></Box>\n            ) : (\n              <List component=\"nav\">\n                {items.length > 0 ? items.map((item) => (\n                  <ListItemButton key={item._id} selected={selectedItem?._id === item._id} onClick={() => setSelectedItem(item)}>\n                    <ListItemText\n                      primaryTypographyProps={{ style: { fontWeight: selectedItem?._id === item._id ? 'bold' : 'normal' } }}\nprimary={\n    item.student \n    ? `${item.student.firstName} ${item.student.lastName}`\n    : t('inbox.unknownStudent', 'Unknown Student')\n}                     \nsecondary={\n  isRequest(item) \n    ? t('inbox.list.requestSecondary', { date: new Date(item.createdAt).toLocaleDateString() }) \n    : t('inbox.list.homeworkSecondary', { title: item.schedule?.title || t('inbox.list.untitled', 'Без темы') })\n}\n                    />\n                  </ListItemButton>\n                )) : <Typography sx={{ p: 2, textAlign: 'center' }}>{t('inbox.empty')}</Typography>}\n              </List>\n            )}\n          </Paper>\n        </Grid>\n        <Grid item xs={12} md={8}>\n          <Paper style={{ padding: 24, minHeight: '50vh', display: 'flex', flexDirection: 'column' }}>\n            {renderItemDetails()}\n          </Paper>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};","// Файл: components/StudentSchedule/StudentsSchedule.tsx\n\nimport React, { useMemo } from 'react';\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport moment from 'moment';\nimport { Paper, Tooltip, Typography } from '@mui/material';\n\n// Иконки\nimport EventNoteIcon from '@mui/icons-material/EventNote';\nimport PeopleIcon from '@mui/icons-material/People';\nimport AssignmentIcon from '@mui/icons-material/Assignment';\nimport MenuBookIcon from '@mui/icons-material/MenuBook';\nimport EmojiEventsIcon from '@mui/icons-material/EmojiEvents';\n\n// Типы\nimport { ScheduleEvent } from '@/types/SheduleEvent';\n\n// Стили\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport './styles.scss';\n\n// --- НАСТРОЙКИ И УТИЛИТЫ ---\nconst localizer = momentLocalizer(moment);\n\nconst eventTypeIcons = {\n  individual_lesson: <EventNoteIcon fontSize=\"small\" />,\n  group_lesson: <PeopleIcon fontSize=\"small\" />,\n  homework: <AssignmentIcon fontSize=\"small\" />,\n  opening_study: <MenuBookIcon fontSize=\"small\" />,\n  tournament_participation: <EmojiEventsIcon fontSize=\"small\" />,\n};\n\n// --- КОМПОНЕНТЫ ДЛЯ КАЛЕНДАРЯ ---\n\n// Наш кастомный компонент для события в календаре\nconst CustomEvent: React.FC<{ event: ScheduleEvent & { start?: Date; end?: Date; } }> = ({ event }) => {\n  const icon = eventTypeIcons[event.type as keyof typeof eventTypeIcons];\n  const className = `custom-event rbc-event--${event.type}`;\n  return (\n    <Tooltip title={event.description || event.title} placement=\"top\">\n      <div className={className}>\n        {icon}\n        <Typography variant=\"caption\" noWrap component=\"span\">{event.title}</Typography>\n      </div>\n    </Tooltip>\n  );\n};\n\n// --- ОСНОВНОЙ КОМПОНЕНТ КАЛЕНДАРЯ ---\n\n// Определяем, какие пропсы будет принимать наш компонент\ninterface StudentScheduleProps {\n  events: ScheduleEvent[]; // Массив событий для отображения\n  onSelectEvent: (event: ScheduleEvent) => void; // Функция, которая вызовется при клике на событие\n}\n\nconst StudentSchedule: React.FC<StudentScheduleProps> = ({ events, onSelectEvent }) => {\n\n  // Преобразуем входящие события в формат, который понимает react-big-calendar\n  const calendarEvents = useMemo(() => {\n    return events.map(event => ({\n      ...event, // Копируем все поля из нашего оригинального события\n      start: new Date(event.date),\n      end: moment(event.date).add(1, 'hour').toDate(), // Длительность 1 час для примера\n    }));\n  }, [events]); // Этот хук будет перезапускаться только если изменится пропс events\n\n  return (\n    <Paper className=\"schedule-paper\" style={{ height: '70vh', padding: '16px' }}>\n        <Calendar\n          localizer={localizer}\n          events={calendarEvents} // <-- Используем преобразованные события\n          startAccessor=\"start\"\n          endAccessor=\"end\"\n          views={['month', 'week', 'day', 'agenda']}\n          components={{ event: CustomEvent as any }}\n          onSelectEvent={onSelectEvent} // <-- Привязываем обработчик клика\n          className=\"schedule-calendar-standalone\"\n        />\n    </Paper>\n  );\n};\n\nexport default StudentSchedule;","import React, { useEffect, useState, useMemo } from 'react';\nimport {\n  Container, Typography, Paper, Button, Dialog, DialogTitle,\n  DialogContent, DialogActions, TextField, CircularProgress, Box, Chip, Link as MuiLink,\n  ToggleButton, ToggleButtonGroup\n} from '@mui/material';\nimport moment from 'moment';\nimport { notification } from 'antd';\nimport { TFunction } from 'i18next';\nimport { useTranslation } from 'react-i18next';\n\n// Icons\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\nimport HourglassEmptyIcon from '@mui/icons-material/HourglassEmpty';\nimport HighlightOffIcon from '@mui/icons-material/HighlightOff';\nimport BackupIcon from '@mui/icons-material/Backup';\n\n// API & Types\nimport { getScheduleByStudent } from '@/api/schedule';\nimport { sendHomework } from '@/api/homework';\nimport { createNotification } from '@/api/notifications';\nimport { ScheduleEvent } from '@/types/SheduleEvent';\n\n// Импортируем готовый компонент календаря\nimport StudentSchedule from '@/components/StudentSchedule/StudentsSchedule';\n\n// Styles\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport './styles.scss';\n\n// --- КОНСТАНТЫ И УТИЛИТЫ ---\nconst MAX_FILE_SIZE_MB = 5;\n\nconst statusStyles = {\n  scheduled: { icon: <HourglassEmptyIcon fontSize=\"small\" />, color: 'info', labelKey: 'status.scheduled' },\n  pending: { icon: <HourglassEmptyIcon fontSize=\"small\" />, color: 'warning', labelKey: 'status.pending' },\n  completed: { icon: <CheckCircleOutlineIcon fontSize=\"small\" />, color: 'success', labelKey: 'status.completed' },\n  approved: { icon: <CheckCircleOutlineIcon fontSize=\"small\" />, color: 'success', labelKey: 'status.approved' },\n  rejected: { icon: <HighlightOffIcon fontSize=\"small\" />, color: 'error', labelKey: 'status.rejected' },\n};\nconst STATUS_KEYS = Object.keys(statusStyles);\n\n// --- === ДОЧЕРНИЕ КОМПОНЕНТЫ === ---\n\n// --- 1. Карточка События ---\nconst EventCard: React.FC<{ event: ScheduleEvent; onSelect: (event: ScheduleEvent) => void; t: TFunction; }> = ({ event, onSelect, t }) => {\n  const statusKey = event.status as keyof typeof statusStyles;\n  const style = statusStyles[statusKey] || statusStyles.scheduled;\n  return (\n    <Paper className={`event-card event-card--${style.color}`} onClick={() => onSelect(event)}>\n      <Box className=\"event-card__header\">\n        <Typography variant=\"h6\" className=\"event-card__title\">{event.title}</Typography>\n        <Chip icon={style.icon} label={t(style.labelKey)} color={style.color as any} size=\"small\"/>\n      </Box>\n      <Typography variant=\"body2\" className=\"event-card__date\">{moment(event.date).format('MMMM Do, YYYY [at] HH:mm')}</Typography>\n      {event.description && <Typography variant=\"body2\" className=\"event-card__description\">{event.description}</Typography>}\n    </Paper>\n  );\n};\n\n// --- 2. Список Событий ---\nconst EventList: React.FC<{ events: ScheduleEvent[]; onSelectEvent: (event: ScheduleEvent) => void; t: TFunction; }> = ({ events, onSelectEvent, t }) => (\n  <Box className=\"event-list\">\n    {events.length === 0 ? (\n      <Paper className=\"event-list__empty\"><Typography>{t('studentSchedule.noEventsForDay')}</Typography></Paper>\n    ) : (\n      events.map(event => <EventCard key={event._id} event={event} onSelect={onSelectEvent} t={t} />)\n    )}\n  </Box>\n);\n\n// --- 3. Панель Фильтров ---\nconst EventListControls: React.FC<{ statusFilters: string[]; onFilterChange: (filters: string[]) => void; t: TFunction; }> = ({ statusFilters, onFilterChange, t }) => {\n  const handleFilterChange = (_event: React.MouseEvent<HTMLElement>, newFilters: string[]) => onFilterChange(newFilters);\n  return (\n    <Paper className=\"event-controls\">\n        <Typography variant=\"button\" className=\"event-controls__label\">{t('common.filterByStatus')}:</Typography>\n        <ToggleButtonGroup value={statusFilters} onChange={handleFilterChange} size=\"small\">\n          {STATUS_KEYS.map(key => (<ToggleButton key={key} value={key} className=\"filter-toggle-button\">{t(statusStyles[key as keyof typeof statusStyles].labelKey)}</ToggleButton>))}\n        </ToggleButtonGroup>\n    </Paper>\n  );\n};\n\n// --- 4. Модальное окно ДЗ ---\nconst HomeworkDialog: React.FC<{\n  event: ScheduleEvent | null; open: boolean; onClose: () => void;\n  onSendHomework: (text: string, file: File | null) => Promise<void>; t: TFunction;\n}> = ({ event, open, onClose, onSendHomework, t }) => {\n  const [homeworkText, setHomeworkText] = useState('');\n  const [screenshot, setScreenshot] = useState<File | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (!open) {\n      setHomeworkText('');\n      setScreenshot(null);\n      setIsSubmitting(false);\n    }\n  }, [open]);\n\n  if (!event) return null;\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      if (file.size > MAX_FILE_SIZE_MB * 1024 * 1024) {\n        notification.error({\n          message: t('errors.fileTooLarge', { size: MAX_FILE_SIZE_MB }),\n          description: undefined\n        });\n        return;\n      }\n      setScreenshot(file);\n    }\n  };\n\n  const handleSendClick = async () => {\n    if (!homeworkText.trim() && !screenshot) {\n      notification.error({\n        message: t('errors.emptyHomework'),\n        description: undefined\n      });\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      await onSendHomework(homeworkText, screenshot);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const statusKey = event.status as keyof typeof statusStyles;\n  const style = statusStyles[statusKey] || statusStyles.scheduled;\n\n  return (\n    <Dialog open={open} onClose={onClose} fullWidth maxWidth=\"sm\" className=\"details-dialog\">\n      <DialogTitle className={`details-dialog__header details-dialog__header--${style.color}`}>{t('studentSchedule.eventDetails')}</DialogTitle>\n      <DialogContent className=\"details-dialog__content\">\n        <Box className=\"details-dialog__info\">\n          <Typography variant=\"h6\" className=\"details-dialog__title\">{event.title}</Typography>\n          <Chip icon={style.icon} label={t(style.labelKey)} color={style.color as any} size=\"small\"/>\n        </Box>\n        <Typography variant=\"body2\">{moment(event.date).format('dddd, MMMM Do, YYYY [at] HH:mm')}</Typography>\n        {event.description && <Typography variant=\"body1\" sx={{ mt: 2 }}>{event.description}</Typography>}\n        {event.link && <Typography variant=\"body2\" sx={{ mt: 1 }}>{t('studentSchedule.form_link')}: <MuiLink href={event.link} target=\"_blank\" rel=\"noopener noreferrer\">{event.link}</MuiLink></Typography>}\n        {event.type === 'homework' && (\n          <Box className=\"homework-form\">\n            <Typography variant=\"h6\" className=\"homework-form__title\">{t('studentSchedule.sendHomeworkTitle')}</Typography>\n            <TextField label={t('studentSchedule.form_description')} fullWidth multiline rows={4} value={homeworkText} onChange={(e) => setHomeworkText(e.target.value)} variant=\"filled\" disabled={isSubmitting} />\n            <Button variant=\"outlined\" component=\"label\" startIcon={<BackupIcon />} disabled={isSubmitting}>\n              {screenshot ? screenshot.name : t('studentSchedule.uploadScreenshot')}\n              <input type=\"file\" hidden accept=\"image/*\" onChange={handleFileUpload} />\n            </Button>\n          </Box>\n        )}\n      </DialogContent>\n      <DialogActions className=\"details-dialog__actions\">\n        <Button onClick={onClose} disabled={isSubmitting}>{t('common.close')}</Button>\n        {event.type === 'homework' && <Button onClick={handleSendClick} variant=\"contained\" color=\"primary\" disabled={isSubmitting}>{t('studentSchedule.send')}</Button>}\n      </DialogActions>\n    </Dialog>\n  );\n};\n\n// --- === ГЛАВНЫЙ КОМПОНЕНТ СТРАНИЦЫ === ---\nconst StudentSchedulePage: React.FC = () => {\n  const { t } = useTranslation();\n  const [allEvents, setAllEvents] = useState<ScheduleEvent[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedEventForDialog, setSelectedEventForDialog] = useState<ScheduleEvent | null>(null);\n  const [statusFilters, setStatusFilters] = useState<string[]>([]);\n\n  // Переносим логику получения ID и загрузку данных в один useEffect.\n  useEffect(() => {\n    const fetchScheduleForStudent = async () => {\n      const userStr = localStorage.getItem('user');\n      let studentId = null;\n      try {\n        if (userStr && userStr !== 'undefined' && userStr !== 'null') {\n            studentId = JSON.parse(userStr)._id;\n        }\n      } catch (error) {\n        console.error(\"Ошибка парсинга пользователя из localStorage:\", error);\n      }\n      \n      if (!studentId) {\n        setLoading(false);\n        notification.error({\n          message: t('errors.userNotFound'),\n          description: undefined\n        });\n        return;\n      }\n      \n      setLoading(true);\n      try {\n        const scheduleData = await getScheduleByStudent(studentId);\n        setAllEvents(scheduleData);\n      } catch (error) {\n        console.error('Ошибка при загрузке расписания:', error);\n        notification.error({\n          message: t('errors.fetchSchedule'),\n          description: undefined\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchScheduleForStudent();\n  }, [t]); // Зависимость от 't' нужна для доступа к переводам в notification.\n\n  const handleOpenDialog = (event: ScheduleEvent) => setSelectedEventForDialog(event);\n  const handleCloseDialog = () => setSelectedEventForDialog(null);\n  \n  const handleSendHomework = async (homeworkText: string, screenshot: File | null) => {\n    // Получаем ID студента снова, чтобы не хранить его в состоянии\n    const userStr = localStorage.getItem('user');\n    const studentId = userStr ? JSON.parse(userStr)._id : null;\n    if (!studentId || !selectedEventForDialog) return;\n\n    try {\n      await sendHomework({\n        studentId,\n        scheduleId: selectedEventForDialog._id,\n        homeworkText: homeworkText.trim() ? homeworkText : undefined,\n        screenshot: screenshot || undefined,\n      });\n\n      if (selectedEventForDialog.coach) {\n        await createNotification({\n            recipient: selectedEventForDialog.coach,\n            type: 'homework_submission',\n            content: `Ученик отправил домашнее задание по теме: \"${selectedEventForDialog.title}\"`,\n            metadata: { scheduleId: selectedEventForDialog._id },\n        });\n      }\n      notification.success({\n        message: t('studentSchedule.homeworkSentSuccess'),\n        description: undefined\n      });\n      handleCloseDialog();\n      // Чтобы не делать еще один запрос к API, можно обновить состояние локально.\n      // Это быстрее для пользователя.\n      setAllEvents(prevEvents => \n        prevEvents.map(event => \n          event._id === selectedEventForDialog._id ? { ...event, status: 'pending' } : event\n        )\n      );\n    } catch (error) {\n      console.error('Ошибка при отправке ДЗ:', error);\n      notification.error({\n        message: t('errors.sendHomework'),\n        description: undefined\n      });\n    }\n  };\n\n  const filteredEvents = useMemo(() => {\n    let events = [...allEvents];\n    if (statusFilters.length > 0) {\n      events = events.filter(event => statusFilters.includes(event.status));\n    }\n    return events.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\n  }, [allEvents, statusFilters]);\n\n  return (\n    <Box className=\"student-schedule-v2-page\">\n      <Container maxWidth=\"lg\">\n        <Typography variant=\"h4\" component=\"h1\" className=\"page-title\">{t('studentSchedule.myScheduleTitle')}</Typography>\n\n        {/* Передаем отфильтрованные данные и обработчик в дочерний компонент календаря */}\n        <StudentSchedule \n          events={filteredEvents} \n          onSelectEvent={handleOpenDialog} \n        />\n\n        <Box className=\"list-controls-container\">\n            <Typography variant=\"h5\" component=\"h2\">{t('studentSchedule.eventListTitle')}</Typography>\n            <EventListControls \n                statusFilters={statusFilters}\n                onFilterChange={setStatusFilters}\n                t={t}\n            />\n        </Box>\n        \n        {loading ? ( <Box className=\"loader-container\"><CircularProgress className=\"loader\" /></Box> ) \n                 : ( <EventList events={filteredEvents} onSelectEvent={handleOpenDialog} t={t} /> )}\n      </Container>\n      \n      <HomeworkDialog\n        event={selectedEventForDialog} open={!!selectedEventForDialog}\n        onClose={handleCloseDialog} onSendHomework={handleSendHomework}\n        t={t}\n      />\n    </Box>\n  );\n};\n\nexport default StudentSchedulePage;","import { BrowserRouter as Router, Routes, Route, useLocation } from 'react-router-dom';\nimport { Suspense } from 'react';\nimport { AuthPage } from '@/pages/auth-page';\nimport { Navbar } from '@/components/Navbar/Navbar';\nimport { Home } from '@/pages/home-page/home-page';\nimport { About } from '@/pages/about-page/about-page';\nimport { Achievements } from '@/pages/achievements-page/achievements-page';\nimport PrivateRoute from '@/components/PrivateRoute/PrivateRoute';\nimport { ProfilePage } from '@/pages/profile-page/profile-page';\nimport { UsersPage } from '@/pages/users-page/users-page';\nimport { StudentsPage } from '@/pages/students-page/students-page';\nimport { AnalysisPage } from '@/features/Chess/pages/AnalysisPage';\n// import AnalysisPage from '@/pages/analisys-page/analisys-page';\n// import ChallengesPage from '@/pages/challenges-page/challenges-page';\nimport PuzzleEditor from './components/PuzzleEditor/PuzzleEditor';\nimport { VerifyEmailPage } from './pages/verify-email-page/verify-email-page';\nimport { CoachesPage } from './pages/coaches-page/coaches-page';\nimport { InboxPage } from './pages/inbox-page/inbox-page';\n// import { Footer } from './components/Footer/Footer';\nimport StudentSchedulePage from './pages/students-shedule-page/students-shedule-page';\nimport { CssBaseline } from '@mui/material';\n\n\nfunction MainLayout() {\n  const location = useLocation();\n  const hideNavbar = location.pathname === '/login' || location.pathname === '/register';\n\n  return (\n    <>\n    <CssBaseline /> \n      {!hideNavbar && <Navbar />}\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path=\"/about\" element={<About />} />\n        <Route path=\"/achievements\" element={<Achievements />} />\n        <Route path=\"/login\" element={<AuthPage />} />\n        <Route path=\"/register\" element={<AuthPage />} />\n        {/* <Route path=\"/chess\" element={<ChessGame></ChessGame>} /> */}\n        <Route path=\"/analysis\" element={<AnalysisPage />} />\n        {/* <Route path=\"/chess\" element={<ChessProvider><GamePage /></ChessProvider>} /> */}\n        {/* <Route path=\"/challenges\" element={<ChallengesPage/>}/> */}\n        <Route path=\"/verify-email\" element={<VerifyEmailPage />} />\n        <Route path=\"/coaches\" element={<CoachesPage />} />\n\n        <Route element={<PrivateRoute />}>\n          <Route path=\"/editor\" element={<PuzzleEditor />} />\n          <Route path=\"/profile\" element={<ProfilePage />} />\n          <Route path=\"/users\" element={<UsersPage />} />\n          <Route path=\"/students-shedule\" element={<StudentSchedulePage />} />\n          <Route path=\"/students\" element={<StudentsPage />} />\n          <Route path=\"/puzzle-editor\" element={<PuzzleEditor />} />\n          <Route path=\"/inbox\" element={<InboxPage />} />\n        </Route>\n      </Routes>\n      {/* {!hideNavbar && <Footer />} */}\n    </>\n  );\n}\n\nfunction App() {\n  return (\n    <Router>\n      <Suspense fallback={<div>Loading...</div>}>\n        <MainLayout />\n      </Suspense>\n    </Router>\n  );\n}\n\nexport default App;\n","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport { ThemeProvider } from '@/shared/theme/ThemeProvider';\nimport '@/styles'; \nimport './index.css'\nimport './i18n'; \nimport App from './App.tsx'\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n     <ThemeProvider> \n    <App />\n    </ThemeProvider>\n  </StrictMode>,\n)\n"],"names":["useThemeStore","create","set","state","newTheme","ThemeContext","createContext","ThemeProvider","children","theme","toggleTheme","useEffect","jsx","i18n","HttpBackend","initReactI18next","API_URL","axiosInstance","axios","reduceMessage","arr","acc","item","getIssueMessage","error","description","notification","config","token","language","response","_a","_c","_b","_d","data","_e","message","key","loginUser","credentials","registerUser","nameValidation","t","_","value","loginValidation","passwordValidation","AuthForm","mode","useTranslation","navigate","useNavigate","isLoginMode","handleLogin","values","user","handleRegister","registeredEmail","jsxs","FaChessKing","Typography","Form","Fragment","Input","Button","AuthPage","useLocation","LanguageSwitcher","className","handleChange","event","selectedLanguage","Select","MenuItem","createNotification","getNotifications","markAsRead","notificationId","deleteNotification","Notifications","navigateToRequests","notifications","setNotifications","useState","anchorEl","setAnchorEl","open","unreadCount","n","fetchNotifications","interval","handleMenuOpen","handleMenuClose","handleDeleteNotification","prev","handleNotificationClick","handleViewAllClick","IconButton","Badge","NotificationsIcon","Menu","Box","ListItemText","ListItemSecondaryAction","MuiIconButton","DeleteIcon","Divider","Navbar","isDrawerOpen","setIsDrawerOpen","userString","isAuthenticated","isAdmin","isCoach","isStudent","handleLogout","handleGetStarted","toggleDrawer","handleMenuClick","path","AppBar","Toolbar","MenuIcon","Drawer","CloseOutlined","List","ListItemButton","ListItemIcon","HomeOutlined","InfoCircleOutlined","TrophyOutlined","TeamOutlined","PlayCircleOutlined","UserOutlined","LogoutOutlined","RocketOutlined","getCoaches","getCoachById","coachId","getCoachesByEmail","emails","getStudentDetails","coachEmail","studentId","getStudentIdsByCoach","removeStudentFromCoach","CoachesBlock","coaches","setCoaches","Grid","coach","Card","CardMedia","CardContent","i","StarIcon","Home","currentYear","whyChessItems","howItWorksSteps","formatItems","SchoolIcon","GroupIcon","Container","icon","descKey","Paper","num","titleKey","type","buttonKey","About","phrases","useMemo","testimonials","whyUsCards","missionPoints","currentPhraseIndex","setCurrentPhraseIndex","currentTestimonialIndex","setCurrentTestimonialIndex","phraseInterval","testimonialInterval","SwitchTransition","CSSTransition","Stack","TrackChangesIcon","point","CheckCircleOutlineIcon","card","idx","Achievements","PrivateRoute","Outlet","Navigate","getProfile","updateProfile","formData","getAvatarUrl","userId","baseURL","EditProfileForm","onClose","firstName","setFirstName","lastName","setLastName","email","setEmail","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","selectedFile","setSelectedFile","avatarPreview","setAvatarPreview","handleFileChange","e","file","handleSubmit","Dialog","DialogTitle","DialogContent","Avatar","TextField","Link","DialogActions","getScheduleByStudent","createScheduleEvent","payload","updateScheduleEvent","eventId","deleteScheduleEvent","ROLE_PRIORITY","getPrimaryRole","roles","a","b","TabPanel","props","index","other","MyCoachWidget","isLoading","Skeleton","UpcomingLessonsWidget","schedule","upcomingEvents","EventIcon","ProfilePage","setUser","setCoach","setSchedule","loading","setLoading","setError","isEditing","setIsEditing","activeTab","setActiveTab","profileData","err","handleTabChange","_event","newValue","avatarUrl","CircularProgress","primaryRole","otherRoles","role","roleChipColor","Tooltip","Chip","EditIcon","LogoutIcon","Tabs","Tab","CustomTable","columns","search","setSearch","rowsPerPage","setRowsPerPage","page","setPage","handleSearch","handleChangePage","newPage","handleChangeRowsPerPage","filteredData","row","column","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","TablePagination","UsersPage","users","setUsers","selectedUser","setSelectedUser","newRole","setNewRole","actionType","setActionType","setOpen","confirmDeleteOpen","setConfirmDeleteOpen","snackbar","setSnackbar","mappedUsers","handleOpen","handleClose","handleConfirmDeleteOpen","handleConfirmDeleteClose","handleRoleChange","handleDeleteUser","Edit","Delete","DialogContentText","FormControl","InputLabel","Snackbar","Alert","localizer","momentLocalizer","moment","eventTypeIcons","EventNoteIcon","PeopleIcon","AssignmentIcon","MenuBookIcon","EmojiEventsIcon","eventTypes","CustomEvent","eventType","EditScheduleModal","student","events","setEvents","selectedEvent","setSelectedEvent","selectedDate","setSelectedDate","studentName","resetForm","useCallback","fetchSchedule","studentSchedule","handleSaveEvent","date","title","isUpdating","handleDeleteEvent","handleSelectSlot","start","handleSelectEvent","calendarEvents","dayPropGetter","handleFormInputChange","name","handleTypeChange","CloseIcon","Calendar","SaveIcon","AddCircleOutlineIcon","StudentsPage","students","setStudents","selectedStudent","setSelectedStudent","openModal","setOpenModal","setIsLoading","userStr","fetchStudents","studentIds","studentDetailsPromises","id","studentDetails","handleRemoveStudent","prevStudents","s","handleEditSchedule","ChessGameEngine","fen","__publicField","Chess","square","source","target","move","pgn","moveIndex","tempGame","uci","useChessGame","initialFen","engine","setFen","history","setHistory","currentMoveIndex","setCurrentMoveIndex","selectedSquare","setSelectedSquare","moveOptions","setMoveOptions","fenRef","useRef","updateGameState","newHistory","clearHighlights","handleMove","sourceSquare","targetSquare","onSquareClick","moves","newOptions","resetGame","loadPgn","success","goToMove","ChessBoard","onPieceDrop","squareStyles","Chessboard","getEvaluationSymbol","evaluation","evalAbs","getSymbolColor","MoveHistory","onMoveClick","movePairs","React","pairs","pair","whiteMoveIndex","blackMoveIndex","AnalysisPanel","depth","principalVariation","isAnalyzing","isEngineOn","onToggleEngine","FormControlLabel","Switch","AnalysisPage","actions","annotatedHistory","setAnnotatedHistory","inputPgn","setInputPgn","engineWorker","setEngineWorker","isLiveAnalyzing","setIsLiveAnalyzing","liveEvaluation","setLiveEvaluation","liveDepth","setLiveDepth","livePV","setLivePV","setIsEngineOn","san","resetAnalysisData","handleLoadPgn","handleResetGame","handleGoToMove","liveAnalyzePosition","handleToggleEngine","formatUCIToSAN","uciLine","startFen","sanLine","moveResult","worker","depthMatch","scoreMatch","pvMatch","turn","evalString","formattedPV","SkipPreviousIcon","ArrowLeftIcon","ArrowRightIcon","SkipNextIcon","ReplayIcon","UploadFileIcon","position","onMove","boardWidth","PuzzleEditor","defaultFen","isCursorOnBoard","setIsCursorOnBoard","chess","instance","draggedPiece","setDraggedPiece","cursorStyle","setCursorStyle","pieces","boardRef","handleMouseMove","rect","x","y","updateCastlingRights","_rights","checked","flag","parts","castling","updatedFen","handleSquareClick","rank","existingPiece","clearBoard","setInitialPosition","removeDraggedPiece","savePosition","char","piece","FormGroup","Checkbox","RadioGroup","newFen","Radio","checkVerificationStatus","resendVerificationEmail","VerifyEmailPage","location","isPolling","setIsPolling","successMessage","setSuccessMessage","errorMessage","setErrorMessage","resendDisabled","setResendDisabled","intervalIdRef","emailVerified","handleResendEmail","fetchRequests","handleRequest","requestId","status","createRequest","experience","goals","formInputStyles","CoachesPage","selectedCoach","setSelectedCoach","filter","setFilter","isDialogOpen","setIsDialogOpen","showForm","setShowForm","isEditMode","setIsEditMode","currentUserEmail","formValues","setFormValues","editProfile","setEditProfile","handleOpenDialog","_f","handleCloseDialog","handleSendRequest","handleSaveEdit","filteredCoaches","c","coachName","InputAdornment","SearchIcon","WorkHistoryIcon","AttachMoneyIcon","SendIcon","sendHomework","reviewHomework","homeworkId","getHomeworksForReview","getHomeworkScreenshot","isRequest","InboxPage","view","setView","items","setItems","selectedItem","setSelectedItem","reviewComment","setReviewComment","isSubmitting","setIsSubmitting","screenshotUrl","setScreenshotUrl","isLoadingScreenshot","setIsLoadingScreenshot","fetchData","currentView","objectUrl","screenshotBlob","handleRequestAction","action","handleHomeworkAction","renderItemDetails","StudentSchedule","onSelectEvent","MAX_FILE_SIZE_MB","statusStyles","HourglassEmptyIcon","HighlightOffIcon","STATUS_KEYS","EventCard","onSelect","statusKey","style","EventList","EventListControls","statusFilters","onFilterChange","handleFilterChange","newFilters","ToggleButtonGroup","ToggleButton","HomeworkDialog","onSendHomework","homeworkText","setHomeworkText","screenshot","setScreenshot","handleFileUpload","handleSendClick","MuiLink","BackupIcon","StudentSchedulePage","allEvents","setAllEvents","selectedEventForDialog","setSelectedEventForDialog","setStatusFilters","scheduleData","handleSendHomework","prevEvents","filteredEvents","MainLayout","hideNavbar","CssBaseline","Routes","Route","App","Router","Suspense","createRoot","StrictMode"],"mappings":"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"}