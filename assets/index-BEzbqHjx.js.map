{"version":3,"file":"index-BEzbqHjx.js","sources":["../../src/i18n.ts","../../src/api/index.ts","../../src/api/profile/getProfile.ts","../../src/api/profile/updateProfile.ts","../../src/api/profile/getAvatarUrl.ts","../../src/api/profile/getUserProfileById.ts","../../src/context/AuthContext.tsx","../../src/api/login/loginUser.ts","../../src/api/register/register.ts","../../src/shared/validation/validation.ts","../../src/components/AuthForm/AuthForm.tsx","../../src/pages/auth-page/auth-page.tsx","../../src/components/LanguageSwitcher/LanguageSwitcher.tsx","../../src/api/notifications/createNotification.ts","../../src/api/notifications/getNotifications.ts","../../src/api/notifications/markAsRead.ts","../../src/api/notifications/deleteNotification.ts","../../src/components/Notifications/Notification.tsx","../../src/components/Navbar/Navbar.tsx","../../src/api/coaches/getCoaches.ts","../../src/api/coaches/getCoachById.ts","../../src/api/coaches/getCoachByEmail.ts","../../src/api/coaches/getStudentDetails.ts","../../src/api/coaches/getStudentIdsByCoach.ts","../../src/api/coaches/removeStudentFromCoach.ts","../../src/components/CoachesBlock/CoachesBlock.tsx","../../src/pages/home-page/home-page.tsx","../../src/pages/about-page/about-page.tsx","../../src/pages/achievements-page/achievements-page.tsx","../../src/components/PrivateRoute/PrivateRoute.tsx","../../src/api/schedule/getScheduleByStudent.ts","../../src/api/schedule/createScheduleEvent.ts","../../src/api/schedule/updateScheduleEvent.ts","../../src/api/schedule/deleteScheduleEvent.ts","../../src/api/homework/sendHomework.ts","../../src/api/homework/reviewHomework.ts","../../src/api/homework/getHomeworksForReview.ts","../../src/api/homework/getHomeworkScreenshot.ts","../../src/components/EventCard/EventCard.tsx","../../src/components/Profile/EditProfileForm.tsx","../../src/utils/getPrimaryRole.ts","../../src/components/Profile/ProfileHeader.tsx","../../src/components/LessonsList/LessonsList.tsx","../../src/components/NextLessonWidget/NextLessonWidget.tsx","../../src/components/HomeworkDialog/HomeworkDialog.tsx","../../src/pages/profile-page/profile-page.tsx","../../src/shared/components/CustomTable/CustomTable.tsx","../../src/pages/users-page/users-page.tsx","../../src/components/Schedule/EditScheduleModal.tsx","../../src/pages/students-page/students-page.tsx","../../src/features/Chess/engine/ChessGameEngine.tsx","../../src/features/Chess/hooks/useChessGame.ts","../../src/features/Chess/components/ChessBoard.tsx","../../src/features/Chess/components/MoveHistory.tsx","../../src/features/Chess/components/AnalysisPanel.tsx","../../src/features/Chess/pages/AnalysisPage.tsx","../../src/components/ChessGame/ChessBoard.tsx","../../src/components/PuzzleEditor/PuzzleEditor.tsx","../../src/api/email-verify/checkVerificationStatus.ts","../../src/api/email-verify/resendVerificationEmail.ts","../../src/pages/verify-email-page/verify-email-page.tsx","../../src/api/requests/fetchRequests.ts","../../src/api/requests/handleRequest.ts","../../src/api/requests/createRequest.ts","../../src/pages/coaches-page/coaches-page.tsx","../../src/pages/inbox-page/inbox-page.tsx","../../src/components/StudentSchedule/StudentsSchedule.tsx","../../src/pages/students-shedule-page/students-shedule-page.tsx","../../src/components/GuestRoute/GuestRoute.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["// src/i18n.ts\nimport i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport HttpBackend from 'i18next-http-backend';\n\ni18n\n  .use(HttpBackend)\n  .use(initReactI18next)\n  .init({\n    backend: {\n      loadPath: '/locales/{{lng}}/{{ns}}.json', \n    },\n    lng: 'en',\n    fallbackLng: 'en', \n    interpolation: {\n      escapeValue: false,\n    },\n    debug: true\n  });\n\nexport default i18n;\n","import axios, { AxiosResponse, AxiosError } from 'axios';\nimport { notification } from 'antd';\nimport i18n from '@/i18n'; \n\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3000/api'; \n\nconst axiosInstance = axios.create({\n  baseURL: API_URL,\n  withCredentials: true, \n});\n\nconst reduceMessage = (arr: string[]) => arr?.reduce((acc, item) => (acc += item), '');\nconst getIssueMessage = (error: AxiosError<any>, description: string) => {\n  notification.error({\n    message: 'Ошибка', \n    description,\n  });\n  return Promise.reject(error);\n};\n\naxiosInstance.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    const language = i18n.language; \n    if (language) {\n      config.headers['Accept-Language'] = language;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\naxiosInstance.interceptors.response.use(\n  (response: AxiosResponse) => response,\n  (error: AxiosError<any>) => {\n\n    if (error.response?.status === 401) {\n      notification.error({\n        message: 'Сессия истекла',\n        description: error.response?.data?.message || 'Пожалуйста, войдите в систему снова.',\n      });\n      \n      localStorage.removeItem('token');\n      localStorage.removeItem('user'); \n      \n      window.location.href = '/login'; \n\n      return new Promise(() => {});\n    }\n    \n    if (error.response?.status !== 504) { \n      if (error.message === 'Network Error' || !error.response) {\n        return getIssueMessage(error, 'Ошибка сети или сервер недоступен. Попробуйте позже.');\n      }\n      const data = error.response?.data;\n      let message = typeof data === 'string' ? data : '';\n      if (Array.isArray(data)) { return getIssueMessage(error, reduceMessage(data)); }\n      if (Array.isArray(data?.data)) { return getIssueMessage(error, reduceMessage(data.data)); }\n      if (data?.detail) { return getIssueMessage(error, data.detail); }\n      if (data instanceof Object) {\n        const description = data.msg || Object.keys(data).reduce(\n          (acc, key) => (acc += `${key}: ${data[key]?.[0] || data[key]} `),''\n        );\n        return getIssueMessage(error, description);\n      }\n      notification.error({\n        message: 'Ошибка',\n        description: message || error.message,\n      });\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default axiosInstance;","import axiosInstance from '@/api';\nimport { User } from '@/types/User';\n\nexport const getProfile = async (): Promise<User> => {\n  const response = await axiosInstance.get('/auth/profile');\n  return response.data;\n};\n","import axiosInstance from '@/api';\nimport { User } from '@/types/User';\n\ninterface UpdateProfilePayload {\n  firstName?: string;\n  lastName?: string;\n  email?: string;\n  currentPassword?: string;\n  newPassword?: string;\n  avatar?: File;\n}\n\nexport const updateProfile = async (data: UpdateProfilePayload): Promise<User> => {\n  const formData = new FormData();\n\n  (Object.keys(data) as Array<keyof UpdateProfilePayload>).forEach(key => {\n    const value = data[key];\n    if (value) {\n      formData.append(key, value);\n    }\n  });\n\n  const response = await axiosInstance.put('/auth/profile', formData);\n  return response.data;\n};\n\n","import axiosInstance from '@/api';\n\nexport const getAvatarUrl = (userId: string): string => {\n  const baseURL = axiosInstance.defaults.baseURL;\n  \n  if (!baseURL) {\n    return '/default-avatar.png'; \n  }\n  \n  return `${baseURL}/auth/avatar/${userId}`;\n};","import axiosInstance from '@/api';\nimport { User } from '@/types/User';\n\nexport const getUserProfileById = async (userId: string): Promise<User> => {\n    const response = await axiosInstance.get(`/auth/profile/${userId}`); \n    return response.data;\n};","import React, { createContext, useState, useEffect, ReactNode, useCallback } from 'react';\nimport { User } from '@/types/User';\nimport { getProfile } from '@/api/profile';\n\ninterface AuthContextType {\n  isAuthenticated: boolean;\n  user: User | null;\n  loading: boolean;\n  login: (token: string, userData: User) => void;\n  logout: () => void;\n  refetchUser: () => Promise<void>;\n}\n\nexport const AuthContext = createContext<AuthContextType | undefined>(undefined);\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState<boolean>(true); \n\n  const logout = useCallback(() => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setUser(null);\n    setIsAuthenticated(false);\n  }, []);\n\n  useEffect(() => {\n    const checkAuthStatus = async () => {\n      setLoading(true);\n      const token = localStorage.getItem('token');\n      if (token) {\n        try {\n          const profile = await getProfile(); \n          setUser(profile);\n          setIsAuthenticated(true);\n        } catch (error) {\n          console.error('Session token is invalid, logging out.', error);\n          logout(); \n        }\n      }\n      setLoading(false);\n    };\n\n    checkAuthStatus();\n  }, [logout]);\n\n  const login = (token: string, userData: User) => {\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', JSON.stringify(userData));\n    \n    setUser(userData); \n    setIsAuthenticated(true);\n  };\n\n  const refetchUser = async () => {\n    setLoading(true);\n    try {\n        const profile = await getProfile();\n        setUser(profile);\n    } catch (error) {\n        console.error(\"Failed to refetch user data\", error);\n        logout();\n    } finally {\n        setLoading(false);\n    }\n  }\n\n  const value = {\n    isAuthenticated,\n    user,\n    loading,\n    login,\n    logout,\n    refetchUser\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};","import axiosInstance from '@/api'; \nimport { LoginCredentials, LoginResponse } from '@/types/Auth'; \n\nexport const loginUser = async (credentials: LoginCredentials): Promise<LoginResponse> => {\n  const response = await axiosInstance.post('/auth/login', credentials);\n  \n  return response.data;\n};","import axiosInstance from '@/api'; \nimport { RegistrationData } from '@/types/Auth';\n\nexport const registerUser = async (data: RegistrationData) => {\n  try {\n    const response = await axiosInstance.post('/auth/register', data);\n    return response.data;\n  } catch (error) {\n    console.error('Registration failed', error);\n    throw error;\n  }\n};\n","import { Rule } from 'antd/es/form';\nimport { TFunction } from 'i18next'; \n\nexport const nameValidation = (t: TFunction): Rule[] => [\n  { required: true, message: t('validation.required') },\n  {\n    validator: (_, value) =>\n      value && value.length >= 2\n        ? Promise.resolve()\n        : Promise.reject(new Error(t('validation.name_length'))), \n  },\n];\n\nexport const loginValidation = (t: TFunction): Rule[] => [\n  { required: true, message: t('validation.required') },\n  { type: 'email', message: t('validation.invalid_email') },\n];\n\nexport const passwordValidation = (t: TFunction): Rule[] => [\n  { required: true, message: t('validation.required') },\n  { min: 6, message: t('validation.password_length') }, \n];","import React, { useContext } from 'react';\nimport Form, { FormProps } from 'antd/es/form';\nimport Input from 'antd/es/input';\nimport Button from 'antd/es/button';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'react-router-dom';\nimport { notification } from 'antd';\nimport Typography from 'antd/es/typography';\nimport { FaChessKing } from 'react-icons/fa';\n\nimport { loginUser } from '@/api/login';\nimport { registerUser } from '@/api/register/register';\nimport { LoginCredentials, RegistrationData } from '@/types/Auth';\nimport { loginValidation, passwordValidation, nameValidation } from '@/shared/validation';\n\nimport './styles.scss';\nimport { AuthContext } from '@/context/AuthContext';\n\ninterface AuthFormProps {\n  mode: 'login' | 'register';\n}\n\nexport const AuthForm: React.FC<AuthFormProps> = ({ mode }) => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const auth = useContext(AuthContext);\n\n  if (!auth) {\n    throw new Error(\"AuthForm must be used within an AuthProvider\");\n  }\n  const { login: authLogin } = auth;\n\n  const isLoginMode = mode === 'login';\n\n  const handleLogin: FormProps<LoginCredentials>['onFinish'] = async (values) => {\n    try {\n      const { token, user } = await loginUser(values);\n      \n      authLogin(token, user);\n      \n      navigate(`/profile/${user._id}`, { replace: true }); \n      // navigate(`/profile`, { replace: true }); \n\n      notification.success({\n        message: t('auth.success.login_title'),\n        description: t('auth.success.welcome_back', { name: user.firstName }),\n      });\n    } catch (error) {\n      notification.error({\n        message: t('auth.errors.login'),\n        description: (error as any).response?.data?.msg || t('auth.errors.invalid_credentials'),\n      });\n    }\n  };\n\n  const handleRegister: FormProps<RegistrationData>['onFinish'] = async (values) => {\n    try {\n      const response = await registerUser(values);\n      const registeredEmail = response.email;\n\n      navigate('/verify-email', {\n        replace: true, \n        state: {\n          email: registeredEmail,\n          firstName: values.firstName,\n          lastName: values.lastName,\n        },\n      });\n\n      notification.success({\n        message: t('register.success.title'),\n        description: t('register.success.description'),\n      });\n\n    } catch (error) {\n      notification.error({\n        message: t('register.error.title'),\n        description: (error as any).response?.data?.msg || t('register.error.description'),\n      });\n    }\n  };\n\n  return (\n    <div className=\"auth-form-container\">\n      <div className=\"auth-header\" onClick={() => navigate('/')}>\n        <FaChessKing className=\"auth-header__icon\" />\n        <Typography.Title level={4} className=\"auth-header__brand\">\n          {t('common.brand')} \n        </Typography.Title>\n      </div>\n      <Typography.Title level={3} className=\"auth-header__title\">\n        {isLoginMode ? t('auth.sign_in') : t('register.title')}\n      </Typography.Title>\n      \n      <Form\n        name={mode}\n        onFinish={isLoginMode ? handleLogin : handleRegister}\n        layout=\"vertical\"\n        className=\"auth-form-body\"\n        size=\"large\"\n        autoComplete=\"off\"\n      >\n        {!isLoginMode && (\n          <>\n            <Form.Item label={<span className=\"auth-form-label\">{t('register.name')}</span>} name=\"firstName\" rules={nameValidation(t)}>\n              <Input placeholder={t('register.placeholder.name')} />\n            </Form.Item>\n            <Form.Item label={<span className=\"auth-form-label\">{t('register.lastName')}</span>} name=\"lastName\" rules={nameValidation(t)}>\n              <Input placeholder={t('register.placeholder.lastName')} />\n            </Form.Item>\n          </>\n        )}\n\n        <Form.Item label={<span className=\"auth-form-label\">{t('common.email')}</span>} name=\"email\" rules={loginValidation(t)}>\n          <Input placeholder={t('common.placeholder.email')} />\n        </Form.Item>\n\n        <Form.Item label={<span className=\"auth-form-label\">{t('common.password')}</span>} name=\"password\" rules={passwordValidation(t)}>\n          <Input.Password placeholder={t('common.placeholder.password')} />\n        </Form.Item>\n\n        <Form.Item>\n          <Button type=\"primary\" htmlType=\"submit\" className=\"auth-form-button\" block>\n            {isLoginMode ? t('auth.sign_in') : t('register.submit')}\n          </Button>\n        </Form.Item>\n      </Form>\n      \n      <div className=\"auth-form-footer\">\n        {isLoginMode ? (\n          <>\n            {t('auth.no_account')}{' '}\n            <a className=\"auth-form-link\" onClick={() => navigate('/register')}>\n              {t('auth.sign_up')}\n            </a>\n          </>\n        ) : (\n          <>\n            {t('register.haveAccount')}{' '}\n            <a className=\"auth-form-link\" onClick={() => navigate('/login')}>\n              {t('register.login')}\n            </a>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { AuthForm } from '@/components/AuthForm';\nimport './styles.scss';\n\nexport const AuthPage: React.FC = () => {\n  const location = useLocation();\n\n  const mode = location.pathname.includes('register') ? 'register' : 'login';\n\n  return (\n    <div className=\"auth-page-wrapper\">\n      <AuthForm mode={mode} />\n    </div>\n  );\n};","import React from 'react';\nimport { Select, MenuItem, SelectChangeEvent } from '@mui/material';\nimport { useTranslation } from 'react-i18next';\n\ninterface LanguageSwitcherProps {\n  className?: string;\n}\n\nexport const LanguageSwitcher: React.FC<LanguageSwitcherProps> = ({ className }) => {\n  const { i18n } = useTranslation();\n\n  const handleChange = (event: SelectChangeEvent<string>) => {\n    const selectedLanguage = event.target.value as string;\n    i18n.changeLanguage(selectedLanguage);\n  };\n\n  return (\n    <Select\n      value={i18n.language}\n      onChange={handleChange}\n      size=\"small\"\n      className={className} \n      style={{ color: 'black', borderColor: 'black' }}\n    >\n      <MenuItem value=\"en\">EN</MenuItem>\n      <MenuItem value=\"pl\">PL</MenuItem>\n      <MenuItem value=\"uk\">UA</MenuItem>\n    </Select>\n  );\n};\n","import axiosInstance from '@/api'; \n\ninterface NotificationPayload {\n  recipient: string;\n  type: string;\n  content: string;\n  metadata?: { [key: string]: any };\n}\n\nexport const createNotification = async (data: NotificationPayload) => {\n    const response = await axiosInstance.post('/notifications', data);\n    return response.data;\n};","import axiosInstance from '@/api'; \n\nexport const getNotifications = async () => {\n  const response = await axiosInstance.get('/notifications');\n  return response.data;\n};\n","import axiosInstance from '@/api';\n\nexport const markAsRead = async (notificationId: string) => {\n  const response = await axiosInstance.patch('/notifications', {}, {\n    params: {\n      notification_id: notificationId\n    }\n  });\n  return response.data;\n};","import axiosInstance from '@/api';\n\nexport const deleteNotification = async (notificationId: string) => {\n  const response = await axiosInstance.delete('/notifications', {\n    params: {\n      notification_id: notificationId\n    }\n  });\n  return response.data;\n};","import React, { useEffect, useState } from 'react';\nimport {\n  IconButton,\n  Badge,\n  Menu,\n  MenuItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  IconButton as MuiIconButton,\n  Divider,\n  Box,\n  Typography\n} from '@mui/material';\nimport NotificationsIcon from '@mui/icons-material/Notifications';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { getNotifications, markAsRead, deleteNotification } from '@/api/notifications';\n\ninterface Notification {\n  _id: string;\n  type: string;\n  content: string;\n  read: boolean;\n  createdAt: string;\n}\n\ninterface NotificationsProps {\n  navigateToRequests: () => void;\n}\n\nexport const Notifications: React.FC<NotificationsProps> = ({ navigateToRequests }) => {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\n  const open = Boolean(anchorEl);\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n  const fetchNotifications = async () => {\n    try {\n      const data = await getNotifications();\n      setNotifications(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Ошибка при получении уведомлений:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchNotifications();\n    const interval = setInterval(fetchNotifications, 30000); // Обновляем каждые 30 секунд\n    return () => clearInterval(interval); // Очищаем интервал при размонтировании\n  }, []);\n\n  const handleMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n    // При открытии можно пометить видимые как прочитанные или просто обновить\n    fetchNotifications(); \n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n  };\n\n  // 👇 ИСПРАВЛЕНИЕ: Добавляем `event` в аргументы\n  const handleDeleteNotification = async (event: React.MouseEvent, notificationId: string) => {\n    event.stopPropagation(); // 👈 ГЛАВНОЕ ИСПРАВЛЕНИЕ! Останавливаем всплытие.\n    try {\n      await deleteNotification(notificationId);\n      // Оптимистичное обновление UI для мгновенной реакции\n      setNotifications(prev => prev.filter(n => n._id !== notificationId));\n    } catch (error) {\n      console.error('Ошибка при удалении уведомления:', error);\n    }\n  };\n\n  const handleNotificationClick = (notification: Notification) => {\n    // Помечаем как прочитанное, только если оно не было прочитано\n    if (!notification.read) {\n      markAsRead(notification._id);\n      // Оптимистичное обновление\n      setNotifications(prev => prev.map(n => n._id === notification._id ? { ...n, read: true } : n));\n    }\n\n    // Если это заявка, переходим во \"Входящие\"\n    if (notification.type === 'request' || notification.type === 'homework_submission') {\n      navigateToRequests();\n    }\n    \n    handleMenuClose();\n  };\n  \n  const handleViewAllClick = () => {\n    navigateToRequests();\n    handleMenuClose();\n  }\n\n  return (\n    <div>\n      <IconButton color=\"inherit\" onClick={handleMenuOpen}>\n        <Badge badgeContent={unreadCount} color=\"error\">\n          <NotificationsIcon />\n        </Badge>\n      </IconButton>\n      <Menu\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleMenuClose}\n        PaperProps={{\n          style: {\n            maxHeight: 300,\n            width: '400px',\n          },\n        }}\n      >\n        <Box sx={{ p: 2, borderBottom: '1px solid #eee' }}>\n            <Typography variant=\"h6\">Уведомления</Typography>\n        </Box>\n        {notifications.length === 0 ? (\n          <MenuItem disabled>Уведомлений нет</MenuItem>\n        ) : (\n          notifications.map((notification) => (\n            <MenuItem\n              key={notification._id}\n              onClick={() => handleNotificationClick(notification)}\n              sx={{ \n                bgcolor: notification.read ? 'transparent' : 'action.hover',\n                whiteSpace: 'normal',\n                alignItems: 'flex-start'\n              }}\n            >\n              <ListItemText\n                primary={notification.content}\n                secondary={new Date(notification.createdAt).toLocaleString()}\n              />\n              <ListItemSecondaryAction>\n                {/* 👇 Передаем `event` в обработчик */}\n                <MuiIconButton\n                  edge=\"end\"\n                  aria-label=\"delete\"\n                  onClick={(event) => handleDeleteNotification(event, notification._id)}\n                >\n                  <DeleteIcon fontSize=\"small\" />\n                </MuiIconButton>\n              </ListItemSecondaryAction>\n            </MenuItem>\n          ))\n        )}\n        <Divider />\n        <MenuItem onClick={handleViewAllClick}>\n            <ListItemText primary=\"Посмотреть все во 'Входящих'\" sx={{ textAlign: 'center' }} />\n        </MenuItem>\n      </Menu>\n    </div>\n  );\n};","import React, { useState, useContext } from 'react';\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  IconButton,\n  Drawer,\n  List,\n  ListItemButton,\n  ListItemText,\n  Divider,\n  Box,\n  Button,\n  ListItemIcon,\n  CircularProgress,\n} from '@mui/material';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport { useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { LanguageSwitcher } from '../LanguageSwitcher/LanguageSwitcher';\nimport {\n  HomeOutlined,\n  InfoCircleOutlined,\n  TrophyOutlined,\n  TeamOutlined,\n  PlayCircleOutlined,\n  UserOutlined,\n  LogoutOutlined,\n  CloseOutlined,\n  RocketOutlined, \n} from '@ant-design/icons';\nimport './styles.scss';\nimport { Notifications } from '@/components/Notifications/Notification';\nimport { AuthContext } from '@/context/AuthContext';\n\nexport const Navbar: React.FC = () => {\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n\n  // Получаем данные и состояние загрузки из AuthContext\n  const auth = useContext(AuthContext);\n\n  // Рендерим упрощенный Navbar-загрузчик, пока AuthContext не готов\n  if (!auth || auth.loading) {\n    return (\n        <AppBar position=\"static\" className=\"navbar-appbar\">\n            <Toolbar className=\"navbar-toolbar\" sx={{ justifyContent: 'space-between' }}>\n                <Typography variant=\"h6\" className=\"navbar-title\">\n                    {t('navbar.chessSchool')}\n                </Typography>\n                <CircularProgress color=\"inherit\" size={24} />\n            </Toolbar>\n        </AppBar>\n    );\n  }\n\n  // Деструктурируем данные после того, как убедились, что auth загружен\n  const { isAuthenticated, user, logout } = auth;\n\n  // Вычисляем роли на основе актуальных данных из контекста\n  const isAdmin = user?.roles?.includes('admin');\n  const isCoach = user?.roles?.includes('coach');\n  const isStudent = user?.roles?.includes('student');\n\n  const handleLogout = () => {\n    if(logout) logout();\n    setIsDrawerOpen(false);\n    navigate('/login');\n  };\n\n  const handleGetStarted = () => {\n    setIsDrawerOpen(false);\n    navigate('/register');\n  };\n\n  const navigateToRequests = () => {\n    navigate('/inbox'); \n  };\n\n  const toggleDrawer = (open: boolean) => () => {\n    setIsDrawerOpen(open);\n  };\n\n  const handleMenuClick = (path: string) => {\n    setIsDrawerOpen(false);\n    // Динамически формируем ссылку на профиль\n    if (path === '/profile' && user?._id) {\n      navigate(`/profile/${user._id}`);\n    } else {\n      navigate(path);\n    }\n  };\n\n  return (\n    <>\n      <AppBar position=\"static\" className=\"navbar-appbar\">\n        <Toolbar className=\"navbar-toolbar\">\n          <Typography variant=\"h6\" className=\"navbar-title\" onClick={() => navigate('/')}>\n            {t('navbar.chessSchool')}\n          </Typography>\n          \n          <Box className=\"navbar-controls\">\n            {!isAuthenticated && (\n              <Box sx={{ display: { xs: 'none', md: 'flex' }, alignItems: 'center' }}>\n                <Button color=\"inherit\" onClick={() => navigate('/login')}>{t('navbar.login')}</Button>\n                <Button variant=\"contained\" color=\"secondary\" onClick={() => navigate('/register')} sx={{ ml: 1 }}>{t('navbar.register')}</Button>\n              </Box>\n            )}\n\n            {isAuthenticated && (\n              <Notifications navigateToRequests={navigateToRequests} />\n            )}\n\n            <IconButton\n              edge=\"end\"\n              color=\"inherit\"\n              aria-label=\"menu\"\n              onClick={toggleDrawer(true)}\n              className=\"navbar-menu-button\"\n            >\n              <MenuIcon />\n            </IconButton>\n          </Box>\n        </Toolbar>\n      </AppBar>\n\n      <Drawer anchor=\"right\" open={isDrawerOpen} onClose={toggleDrawer(false)}>\n        <Box className=\"navbar-drawer\">\n          <Box className=\"drawer-header\">\n            <IconButton onClick={toggleDrawer(false)} className=\"close-button\">\n              <CloseOutlined className=\"close-icon\" />\n            </IconButton>\n          </Box>\n          \n          <List className=\"menu-list\">\n            {/* Общие пункты меню */}\n            <ListItemButton onClick={() => handleMenuClick('/')} className=\"menu-item\">\n              <ListItemIcon><HomeOutlined /></ListItemIcon>\n              <ListItemText primary={t('navbar.home')} />\n            </ListItemButton>\n            <ListItemButton onClick={() => handleMenuClick('/about')} className=\"menu-item\">\n              <ListItemIcon><InfoCircleOutlined /></ListItemIcon>\n              <ListItemText primary={t('navbar.aboutUs')} />\n            </ListItemButton>\n            <ListItemButton onClick={() => handleMenuClick('/achievements')} className=\"menu-item\">\n              <ListItemIcon><TrophyOutlined /></ListItemIcon>\n              <ListItemText primary={t('navbar.achievements')} />\n            </ListItemButton>\n            <ListItemButton onClick={() => handleMenuClick('/coaches')} className=\"menu-item\">\n              <ListItemIcon><TeamOutlined /></ListItemIcon>\n              <ListItemText primary={t('navbar.coaches')} />\n            </ListItemButton>\n            \n            {isAuthenticated && <Divider sx={{ borderColor: 'rgba(255, 255, 255, 0.12)' }} />}\n\n            {/* Меню для авторизованных пользователей */}\n            {isAuthenticated && (\n              <>\n                <ListItemButton onClick={() => handleMenuClick('/analysis')} className=\"menu-item\">\n                  <ListItemIcon><PlayCircleOutlined /></ListItemIcon>\n                  <ListItemText primary={t('navbar.chessGame')} />\n                </ListItemButton>\n                <ListItemButton onClick={() => handleMenuClick('/profile')} className=\"menu-item\">\n                  <ListItemIcon><UserOutlined /></ListItemIcon>\n                  <ListItemText primary={t('navbar.profile')} />\n                </ListItemButton>\n              </>\n            )}\n\n            {(isCoach || isAdmin || isStudent) && <Divider sx={{ borderColor: 'rgba(255, 255, 255, 0.12)' }} />}\n            \n            {/* Меню для ролей */}\n            {(isCoach || isAdmin) && (\n              <ListItemButton onClick={() => handleMenuClick('/students')} className=\"menu-item\">\n                <ListItemIcon><TeamOutlined /></ListItemIcon>\n                <ListItemText primary={t('navbar.students')} />\n              </ListItemButton>\n            )}\n            {(isCoach || isAdmin || isStudent) && (\n              <ListItemButton onClick={() => handleMenuClick('/students-shedule')} className=\"menu-item\">\n                <ListItemIcon><TeamOutlined /></ListItemIcon>\n                <ListItemText primary={t('navbar.students-shedule')} />\n              </ListItemButton>\n            )}\n            {isAdmin && (\n              <ListItemButton onClick={() => handleMenuClick('/users')} className=\"menu-item\">\n                <ListItemIcon><TeamOutlined /></ListItemIcon>\n                <ListItemText primary={t('navbar.users')} />\n              </ListItemButton>\n            )}\n          </List>\n\n          <Box className=\"drawer-bottom-actions\">\n            {isAuthenticated ? (\n              <Button onClick={handleLogout} className=\"logout-button\">\n                <LogoutOutlined />\n                {t('navbar.logout')}\n              </Button>\n            ) : (\n              <Button onClick={handleGetStarted} className=\"get-started-button\" variant=\"contained\" color=\"secondary\">\n                <RocketOutlined style={{ marginRight: '8px' }}/>\n                {t('navbar.getStarted')}\n              </Button>\n            )}\n\n            <LanguageSwitcher className=\"language-switcher\" />\n          </Box>\n        </Box>\n      </Drawer>\n    </>\n  );\n};","import axiosInstance from '@/api'; \n\nexport const getCoaches = async () => {\n  const response = await axiosInstance.get('/coaches');\n  return response.data;\n};","import axiosInstance from '@/api'; \nimport { User } from '@/types/User';\n\nexport const getCoachById = async (coachId: string): Promise<User> => {\n    const response = await axiosInstance.get(`/coach/${coachId}`);\n    return response.data;\n};","import axiosInstance from '@/api'; \n\nexport const getCoachesByEmail = async (emails: string[]) => {\n    const response = await axiosInstance.post('/auth/coaches-by-email', { emails });\n    return response.data;\n  };","import axiosInstance from '@/api';\nimport { Student } from '@/types/Student'; \n\nexport const getStudentDetails = async (coachEmail: string, studentId: string): Promise<Student | null> => {\n    const response = await axiosInstance.get('/trainer/student', {\n      params: { coachEmail, studentId },\n    });\n    return response.data;\n};\n","import axiosInstance from '@/api';\n\n\nexport const getStudentIdsByCoach = async (coachEmail: string): Promise<string[]> => {\n  const response = await axiosInstance.get('/trainer/students', {\n    params: { coachEmail }, \n  });\n  return response.data;\n};","import axiosInstance from '@/api';\n\nexport const removeStudentFromCoach = async (coachEmail: string, studentId: string): Promise<void> => {\n  await axiosInstance.delete('/trainer/remove-student', {\n    params: { coachEmail, studentId },\n  });\n};","import { useEffect, useState } from \"react\";\nimport {\n  Box,\n  Typography,\n  Button,\n  Grid,\n  Card,\n  CardContent,\n  CardMedia,\n} from \"@mui/material\";\nimport { useNavigate } from 'react-router-dom';\nimport StarIcon from \"@mui/icons-material/Star\";\nimport { useTranslation } from \"react-i18next\";\nimport { getCoachesByEmail } from \"@/api/coaches\";\nimport { Coach } from \"@/types/Coach\";\n\n\nexport const CoachesBlock = () => {\n      const { t } = useTranslation();\n      const navigate = useNavigate();\n      const [coaches, setCoaches] = useState<Coach[]>([]);\n\n      useEffect(() => {\n        const fetchCoaches = async () => {\n            const data = await getCoachesByEmail([\"ad3@example.com\", \"ad7@example.com\"]);\n            setCoaches(data);\n        };\n    \n        fetchCoaches();\n      }, []);\n\n    return (\n              <Box py={10} px={2} sx={{ backgroundColor: \"#111\" }}>\n                <Typography variant=\"h4\" fontWeight=\"bold\" textAlign=\"center\" mb={6}>\n                  {t(\"homePage.coaches.title\")}\n                </Typography>\n                <Grid container spacing={4} justifyContent=\"center\">\n                  {coaches.map((coach) => (\n                    <Grid item xs={12} sm={6} md={3} key={coach._id}>\n                      <Card\n                        sx={{\n                          backgroundColor: \"#1a1a1a\",\n                          color: \"white\",\n                          borderRadius: 3,\n                          boxShadow: 4,\n                          position: \"relative\",\n                          '&:hover .hoverAction': {\n                            opacity: 1,\n                          },\n                        }}\n                      >\n                        <CardMedia\n                          component=\"img\"\n                          height=\"200\"\n                          image={coach.photoUrl || \"/images/default-avatar.png\"}\n                          alt={`${coach.firstName} ${coach.lastName}`}\n                        />\n                        <CardContent>\n                          <Typography variant=\"h6\">\n                            {coach.firstName} {coach.lastName}\n                          </Typography>\n                          <Typography variant=\"body2\" color=\"gray\">\n                          </Typography>\n                          <Box mt={1}>\n                            {[...Array(5)].map((_, i) => (\n                              <StarIcon key={i} sx={{ color: \"#FFD700\", fontSize: 20 }} />\n                            ))}\n                          </Box>\n                        </CardContent>\n                        <Box\n                          className=\"hoverAction\"\n                          sx={{\n                            position: \"absolute\",\n                            bottom: 16,\n                            left: 0,\n                            right: 0,\n                            textAlign: \"center\",\n                            opacity: 0,\n                            transition: \"0.3s\",\n                          }}\n                        >\n                          <Button variant=\"contained\"   \n                          onClick={() => navigate(\"/coaches\", { state: { coach } })}\n                          sx={{ backgroundColor: \"#FFD700\", color: \"black\" }}>\n                            {t(\"homePage.coaches.selectCoach\")}\n                          </Button>\n                        </Box>\n                      </Card>\n                    </Grid>\n                  ))}\n                </Grid>\n              </Box>\n    )\n}","import { Box, Typography, Button, Grid, Paper, Container, Divider } from \"@mui/material\";\nimport { useNavigate } from 'react-router-dom';\nimport { useTranslation } from \"react-i18next\";\nimport { CoachesBlock } from \"@/components/CoachesBlock/CoachesBlock\";\nimport SchoolIcon from '@mui/icons-material/School';\nimport GroupIcon from '@mui/icons-material/Group';\n\nexport const Home = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const currentYear = new Date().getFullYear();\n\n  // Data for sections to avoid repetition\n  const whyChessItems = [\n    { icon: \"🎯\", key: \"analytics\", descKey: \"descAnalytics\" },\n    { icon: \"🧠\", key: \"memory\", descKey: \"descMemory\" },\n    { icon: \"🏆\", key: \"spirit\", descKey: \"descSpirit\" },\n  ];\n\n  const howItWorksSteps = [\n    { num: \"1\", titleKey: \"step1Title\", descKey: \"step1Desc\" },\n    { num: \"2\", titleKey: \"step2Title\", descKey: \"step2Desc\" },\n    { num: \"3\", titleKey: \"step3Title\", descKey: \"step3Desc\" },\n  ];\n\n  const formatItems = [\n    { type: \"individual\", icon: <SchoolIcon sx={{ fontSize: 40, mb: 2, color: \"#FFD700\" }} />, descKey: \"descIndividual\", buttonKey: \"schedule\", path: \"/coaches\" },\n    { type: \"group\", icon: <GroupIcon sx={{ fontSize: 40, mb: 2, color: \"#FFD700\" }} />, descKey: \"descGroup\", buttonKey: \"learnMore\", path: \"/classes\" },\n  ];\n\n  return (\n    <Box sx={{ backgroundColor: \"#0e0e0e\", color: \"white\", fontFamily: \"'Inter', sans-serif\" }}>\n      {/* Hero Section */}\n      <Box\n        sx={{\n          backgroundImage: {\n            xs: 'url(\"/images/chess-cinematic-mb.jpg\")',\n            sm: 'url(\"/images/chess-cinematic-tablet.jpg\")',\n            lg: 'url(\"/images/chess-cinematic-lg.jpg\")',\n          },\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\",\n          py: { xs: 10, md: 20 },\n          textAlign: \"center\",\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          px: 2,\n        }}\n      >\n        <Container maxWidth=\"md\">\n          <Typography variant=\"h2\" component=\"h1\" fontWeight=\"bold\">{t(\"homePage.hero.title\")}</Typography>\n          <Typography variant=\"h5\" mt={2} sx={{ color: 'rgba(255, 255, 255, 0.9)' }}>{t(\"homePage.hero.subtitle\")}</Typography>\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            onClick={() => navigate(\"/coaches\")}\n            sx={{\n              mt: 4,\n              px: 5,\n              py: 1.5,\n              borderRadius: \"30px\",\n              boxShadow: '0px 8px 20px rgba(255, 215, 0, 0.3)',\n              backgroundColor: \"#FFD700\",\n              color: \"black\",\n              fontWeight: \"bold\",\n              '&:hover': { backgroundColor: \"#FFC107\", transform: 'translateY(-2px)', boxShadow: '0px 10px 25px rgba(255, 215, 0, 0.4)' },\n              transition: 'all 0.3s ease',\n            }}\n            startIcon={<span style={{ fontSize: '1.5rem' }}>♟️</span>}\n          >\n            {t(\"homePage.hero.start\")}\n          </Button>\n        </Container>\n      </Box>\n\n      {/* Why Chess Section */}\n      <Container maxWidth=\"lg\" sx={{ py: 10 }}>\n        <Typography variant=\"h3\" component=\"h2\" fontWeight=\"bold\" textAlign=\"center\" mb={8}>\n          {t(\"homePage.why.title\")}\n        </Typography>\n        <Grid container spacing={4} justifyContent=\"center\">\n          {whyChessItems.map(({ icon, key, descKey }) => (\n            <Grid item xs={12} sm={6} md={4} key={key}>\n              <Paper\n                elevation={6}\n                sx={{\n                  p: 4,\n                  textAlign: \"center\",\n                  borderRadius: 4,\n                  backgroundColor: \"rgba(255,255,255,0.05)\",\n                  backdropFilter: \"blur(10px)\",\n                  transition: \"all 0.3s ease\",\n                  color: \"white\",\n                  height: '100%',\n                  '&:hover': {\n                    transform: \"translateY(-10px)\",\n                    backgroundColor: \"rgba(255,255,255,0.1)\",\n                  },\n                }}\n              >\n                <Box fontSize=\"3.5rem\">{icon}</Box>\n                <Typography variant=\"h5\" component=\"h3\" mt={2} fontWeight=\"bold\">\n                  {t(`homePage.why.${key}`)}\n                </Typography>\n                <Typography mt={1.5} sx={{ color: 'rgba(255, 255, 255, 0.7)' }}>\n                  {t(`homePage.why.${descKey}`)}\n                </Typography>\n              </Paper>\n            </Grid>\n          ))}\n        </Grid>\n      </Container>\n      \n      {/* Coaches Block Section */}\n      <Box sx={{ py: 5 }}>\n         <CoachesBlock />\n      </Box>\n      \n      {/* How It Works Section */}\n      <Box sx={{ py: 10, backgroundColor: '#121212' }}>\n        <Container maxWidth=\"lg\">\n            <Typography variant=\"h3\" component=\"h2\" fontWeight=\"bold\" textAlign=\"center\" mb={8}>\n              {t(\"homePage.howItWorks.title\")}\n            </Typography>\n            <Grid container spacing={5}>\n              {howItWorksSteps.map(({ num, titleKey, descKey }) => (\n                <Grid item xs={12} md={4} key={num}>\n                  <Box sx={{ textAlign: { xs: 'center', md: 'left' } }}>\n                    <Typography variant=\"h1\" component=\"div\" fontWeight=\"bold\" sx={{ color: '#FFD700', opacity: 0.5 }}>\n                      {num}\n                    </Typography>\n                    <Typography variant=\"h5\" component=\"h3\" fontWeight=\"bold\" mt={1}>\n                      {t(`homePage.howItWorks.${titleKey}`)}\n                    </Typography>\n                    <Typography mt={1.5} sx={{ color: 'rgba(255, 255, 255, 0.7)' }}>\n                      {t(`homePage.howItWorks.${descKey}`)}\n                    </Typography>\n                  </Box>\n                </Grid>\n              ))}\n            </Grid>\n        </Container>\n      </Box>\n      \n      {/* Formats Section */}\n      <Container maxWidth=\"lg\" sx={{ py: 10 }}>\n        <Typography variant=\"h3\" component=\"h2\" fontWeight=\"bold\" textAlign=\"center\" mb={8}>\n          {t(\"homePage.formats.title\")}\n        </Typography>\n        <Grid container spacing={4} justifyContent=\"center\">\n          {formatItems.map(({ type, icon, descKey, buttonKey, path }) => (\n            <Grid item xs={12} md={5} key={type}>\n              <Paper\n                elevation={6}\n                sx={{\n                  p: 4,\n                  backgroundColor: \"#1c1c1c\",\n                  color: \"white\",\n                  borderRadius: 4,\n                  textAlign: \"center\",\n                  transition: 'background-color 0.3s ease',\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center',\n                  height: '100%',\n                  '&:hover': { backgroundColor: \"#2a2a2a\" },\n                }}\n              >\n                {icon}\n                <Typography variant=\"h5\" component=\"h3\" fontWeight=\"bold\">\n                  {t(`homePage.formats.${type}`)}\n                </Typography>\n                <Typography mt={1.5} sx={{ color: 'rgba(255, 255, 255, 0.7)', flexGrow: 1 }}>\n                  {t(`homePage.formats.${descKey}`)}\n                </Typography>\n                <Button \n                  variant=\"outlined\" \n                  onClick={() => navigate(path)}\n                  sx={{ \n                    mt: 3, \n                    color: \"#FFD700\", \n                    borderColor: '#FFD700', \n                    borderRadius: '20px',\n                    '&:hover': { borderColor: '#FFC107', backgroundColor: 'rgba(255, 215, 0, 0.1)' }\n                  }}\n                >\n                  {t(`homePage.formats.${buttonKey}`)} →\n                </Button>\n              </Paper>\n            </Grid>\n          ))}\n        </Grid>\n      </Container>\n\n      {/* Footer */}\n      <Box component=\"footer\" py={6} px={2} sx={{ backgroundColor: \"#0b0b0b\", color: \"gray\" }}>\n        <Container maxWidth=\"lg\">\n          <Grid container spacing={5}>\n            <Grid item xs={12} sm={4}>\n              <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ color: 'white' }}>{t(\"homePage.footer.name\")}</Typography>\n              <Typography variant=\"body2\" sx={{ mt: 1, color: 'rgba(255,255,255,0.5)' }}>{t(\"homePage.footer.desc\")}</Typography>\n            </Grid>\n            <Grid item xs={6} sm={2}>\n               <Typography fontWeight=\"bold\" sx={{ color: 'white' }}>{t(\"homePage.footer.company\")}</Typography>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.about\")}</Button>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.blog\")}</Button>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.coaches\")}</Button>\n            </Grid>\n             <Grid item xs={6} sm={2}>\n               <Typography fontWeight=\"bold\" sx={{ color: 'white' }}>{t(\"homePage.footer.resources\")}</Typography>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.faq\")}</Button>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.contact\")}</Button>\n            </Grid>\n             <Grid item xs={6} sm={2}>\n               <Typography fontWeight=\"bold\" sx={{ color: 'white' }}>{t(\"homePage.footer.legal\")}</Typography>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.privacy\")}</Button>\n               <Button size=\"small\" sx={{ color: \"gray\", display: 'block', p: '6px 0' }}>{t(\"homePage.footer.terms\")}</Button>\n            </Grid>\n          </Grid>\n          <Divider sx={{ my: 4, borderColor: 'rgba(255, 255, 255, 0.1)' }} />\n          <Typography variant=\"body2\" textAlign=\"center\" sx={{ color: 'rgba(255,255,255,0.4)' }}>\n            {t(\"homePage.footer.copyright\", { year: currentYear })}\n          </Typography>\n        </Container>\n      </Box>\n    </Box>\n  );\n};","import React, { useEffect, useState, useMemo } from 'react';\nimport { Box, Container, Typography, Grid, Paper, Button, Stack, Divider } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { CSSTransition, SwitchTransition } from 'react-transition-group';\n\n// Иконки\nimport TrackChangesIcon from '@mui/icons-material/TrackChanges';\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\n\nimport './styles.scss';\n\ninterface Testimonial { name: string; quote: string; }\ninterface CoachTeaser { name: string; quote: string; }\ninterface WhyUsCard { icon: string; title: string; description: string; }\ninterface HowItWorksStep { step: string; desc: string; }\n\nexport const About: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n\n  const phrases = useMemo(\n    () => (t('aboutPage.phrases', { returnObjects: true }) as string[]) || [],\n    [t]\n  );\n  \n  const testimonials = useMemo(\n    () => (t('aboutPage.testimonials.reviews', { returnObjects: true }) as Testimonial[]) || [],\n    [t]\n  );\n\n  const coaches = useMemo(\n    () => (t('aboutPage.ourCoaches.coaches', { returnObjects: true }) as CoachTeaser[]) || [],\n    [t]\n  );\n\n  const whyUsCards = useMemo(\n    () => (t('aboutPage.whyUs.cards', { returnObjects: true }) as WhyUsCard[]) || [],\n    [t]\n  );\n  \n  const howItWorksSteps = useMemo(\n    () => (t('aboutPage.howItWorks.steps', { returnObjects: true }) as HowItWorksStep[]) || [],\n    [t]\n  );\n  \n  const missionPoints = useMemo(\n    () => (t('aboutPage.mission.points', { returnObjects: true }) as string[]) || [],\n    [t]\n  );\n\n\n  const [currentPhraseIndex, setCurrentPhraseIndex] = useState(0);\n  const [currentTestimonialIndex, setCurrentTestimonialIndex] = useState(0);\n\n  useEffect(() => {\n    // Эта проверка важна, чтобы избежать ошибок, если данные еще не загрузились\n    if (phrases.length === 0 || testimonials.length === 0) return;\n\n    const phraseInterval = setInterval(() => {\n      setCurrentPhraseIndex((prev) => (prev + 1) % phrases.length);\n    }, 4000);\n    const testimonialInterval = setInterval(() => {\n      setCurrentTestimonialIndex((prev) => (prev + 1) % testimonials.length);\n    }, 5000);\n    \n    return () => {\n      clearInterval(phraseInterval);\n      clearInterval(testimonialInterval);\n    };\n  }, [phrases.length, testimonials.length]);\n\n  return (\n    <Box sx={{ bgcolor: '#0e0e0e', color: 'white' }}>\n      {/* Hero Section */}\n      <Box sx={{\n        position: 'relative',\n        py: { xs: 10, md: 15 },\n        textAlign: 'center',\n        backgroundImage: 'linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.8)), url(\"/images/chess-cinematic-lg.jpg\")',\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundAttachment: 'fixed',\n      }}>\n        <Container maxWidth=\"md\">\n          <Typography variant=\"h2\" component=\"h1\" fontWeight=\"bold\" sx={{ textTransform: 'uppercase', letterSpacing: '2px' }}>\n            {t('aboutPage.mainTitle')}\n          </Typography>\n          <Box sx={{ height: '2.5em', my: 2 }}>\n            <SwitchTransition mode=\"out-in\">\n              <CSSTransition key={currentPhraseIndex} timeout={300} classNames=\"fade\">\n                <Typography variant=\"h5\" sx={{ color: '#FFD700', fontStyle: 'italic' }}>\n                  {phrases.length > 0 ? phrases[currentPhraseIndex] : ''}\n                </Typography>\n              </CSSTransition>\n            </SwitchTransition>\n          </Box>\n          <Stack direction={{ xs: 'column', sm: 'row' }} justifyContent=\"center\" spacing={2} mt={4}>\n            <Button variant=\"contained\" onClick={() => navigate('/register')} size=\"large\" sx={{ bgcolor: '#FFD700', color: 'black', borderRadius: '30px', px: 5, '&:hover': { bgcolor: '#FFC107' } }}>\n              {t('aboutPage.ctaStudent')}\n            </Button>\n            <Button variant=\"outlined\" onClick={() => navigate('/coaches')} size=\"large\" sx={{ color: 'white', borderColor: 'rgba(255,255,255,0.5)', borderRadius: '30px', px: 5, '&:hover': { borderColor: 'white', bgcolor: 'rgba(255,255,255,0.1)' } }}>\n              {t('aboutPage.ctaCoaches')}\n            </Button>\n          </Stack>\n        </Container>\n      </Box>\n\n      {/* Main Content */}\n      <Container maxWidth=\"lg\" sx={{ py: 8 }}>\n\n        {/* Mission Section */}\n        <Box sx={{ textAlign: 'center', my: 8 }}>\n          <Stack direction=\"row\" spacing={2} justifyContent=\"center\" alignItems=\"center\" sx={{ color: '#FFD700', mb: 1 }}>\n            <TrackChangesIcon fontSize=\"large\" />\n            <Typography variant=\"h4\" component=\"h2\" fontWeight=\"bold\">{t('aboutPage.mission.title')}</Typography>\n          </Stack>\n          <Typography variant=\"h6\" sx={{ maxWidth: 720, mx: 'auto', color: 'rgba(255,255,255,0.7)', mb: 3 }}>\n            {t('aboutPage.mission.subtitle')}\n          </Typography>\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2} justifyContent=\"center\">\n            {missionPoints.map((point, i) => (\n              <Stack direction=\"row\" alignItems=\"center\" spacing={1} key={i}>\n                <CheckCircleOutlineIcon sx={{ color: 'success.main' }}/>\n                <Typography>{point}</Typography>\n              </Stack>\n            ))}\n          </Stack>\n        </Box>\n        \n        <Divider sx={{ my: 8, borderColor: 'rgba(255,255,255,0.2)' }} />\n\n        {/* Why Us Section */}\n        <Box sx={{ my: 8 }}>\n          <Typography variant=\"h4\" component=\"h2\" fontWeight=\"bold\" align=\"center\" sx={{ mb: 6 }}>\n            {t('aboutPage.whyUs.title')}\n          </Typography>\n          <Grid container spacing={4}>\n            {whyUsCards.map((card, i) => (\n              <Grid item xs={12} md={4} key={i}>\n                <Paper sx={{ p: 4, bgcolor: '#1c1c1c', borderRadius: 4, textAlign: 'center', height: '100%', transition: 'all 0.3s ease', '&:hover': { transform: 'translateY(-10px)', boxShadow: '0 10px 20px rgba(255,215,0,0.15)' }}}>\n                  <Typography fontSize=\"3rem\">{card.icon}</Typography>\n                  <Typography variant=\"h6\" fontWeight=\"bold\" my={1}>{card.title}</Typography>\n                  <Typography sx={{ color: 'rgba(255,255,255,0.6)' }}>{card.description}</Typography>\n                </Paper>\n              </Grid>\n            ))}\n          </Grid>\n        </Box>\n\n        {/* How It Works Section */}\n        <Box sx={{ my: 8, py: 6, bgcolor: '#1c1c1c', borderRadius: 4 }}>\n          <Typography variant=\"h4\" component=\"h2\" fontWeight=\"bold\" align=\"center\" sx={{ mb: 6 }}>\n            {t('aboutPage.howItWorks.title')}\n          </Typography>\n          <Grid container spacing={4} sx={{ px: 4 }}>\n            {howItWorksSteps.map((item, idx) => (\n              <Grid item xs={12} md={4} key={idx}>\n                <Stack direction=\"row\" spacing={2} alignItems=\"center\">\n                  <Typography variant=\"h2\" fontWeight=\"bold\" sx={{ color: '#FFD700', opacity: 0.5 }}>{`0${idx + 1}`}</Typography>\n                  <Box>\n                    <Typography variant=\"h6\" fontWeight=\"bold\">{item.step}</Typography>\n                    <Typography sx={{ color: 'rgba(255,255,255,0.6)' }}>{item.desc}</Typography>\n                  </Box>\n                </Stack>\n              </Grid>\n            ))}\n          </Grid>\n        </Box>\n\n        {/* Testimonials & Coaches */}\n        <Grid container spacing={8} sx={{ my: 8 }}>\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"h4\" component=\"h2\" fontWeight=\"bold\" sx={{ mb: 3 }}>\n              {t('aboutPage.testimonials.title')}\n            </Typography>\n            <Paper sx={{ p: 4, bgcolor: '#1c1c1c', borderRadius: 4, minHeight: 180 }}>\n              <SwitchTransition>\n                <CSSTransition key={currentTestimonialIndex} timeout={300} classNames=\"fade\">\n                  <Box>\n                    {testimonials.length > 0 ? (\n                      <>\n                        <Typography fontStyle=\"italic\" fontSize=\"1.1rem\" sx={{ color: 'rgba(255,255,255,0.8)' }}>\n                          “{testimonials[currentTestimonialIndex].quote}”\n                        </Typography>\n                        <Typography fontWeight=\"bold\" mt={2} sx={{ color: '#FFD700' }}>\n                          — {testimonials[currentTestimonialIndex].name}\n                        </Typography>\n                      </>\n                    ) : null}\n                  </Box>\n                </CSSTransition>\n              </SwitchTransition>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12} md={6}>\n            <Typography variant=\"h4\" component=\"h2\" fontWeight=\"bold\" sx={{ mb: 3 }}>\n              {t('aboutPage.ourCoaches.title')}\n            </Typography>\n            <Stack spacing={2}>\n              {coaches.map((coach, idx) => (\n                <Paper key={idx} sx={{ p: 2, bgcolor: '#1c1c1c', borderRadius: 2 }}>\n                  <Typography variant=\"h6\" fontWeight=\"bold\">{coach.name}</Typography>\n                  <Typography variant=\"body2\" fontStyle=\"italic\" sx={{ color: 'rgba(255,255,255,0.6)' }}>{coach.quote}</Typography>\n                </Paper>\n              ))}\n              <Button variant=\"text\" onClick={() => navigate('/coaches')} sx={{ color: '#FFD700', alignSelf: 'flex-start' }}>\n                {t('aboutPage.ourCoaches.viewAll')} →\n              </Button>\n            </Stack>\n          </Grid>\n        </Grid>\n\n        <Divider sx={{ my: 8, borderColor: 'rgba(255,255,255,0.2)' }} />\n        \n        <Typography align=\"center\" fontWeight=\"bold\" variant=\"h5\" component=\"p\" sx={{ fontStyle: 'italic' }}>\n          {t('aboutPage.finalSlogan')}\n        </Typography>\n\n      </Container>\n    </Box>\n  );\n};","import React from 'react';\nimport { Container, Typography } from '@mui/material';\n\nexport const Achievements: React.FC = () => {\n  return (\n    <Container>\n      <Typography variant=\"h3\" gutterBottom>\n        Achievments\n      </Typography>\n    </Container>\n  );\n};\n","import React from 'react';\nimport { Navigate, Outlet } from 'react-router-dom';\n\nconst isAuthenticated = () => {\n  const token = localStorage.getItem('token');\n  return !!token; \n};\n\nconst PrivateRoute: React.FC = () => {\n  return isAuthenticated() ? <Outlet /> : <Navigate to=\"/login\" />;\n};\n\nexport default PrivateRoute;\n","import axiosInstance from '@/api';\nimport { ScheduleEvent } from '@/types/SheduleEvent'; \n\nexport const getScheduleByStudent = async (studentId: string): Promise<ScheduleEvent[]> => {\n  const response = await axiosInstance.get(`/schedule/student/${studentId}`);\n  return response.data;\n};\n","import axiosInstance from '@/api';\nimport { ScheduleEvent, ScheduleEventPayload } from '@/types/SheduleEvent'; \n\nexport const createScheduleEvent = async (payload: ScheduleEventPayload): Promise<ScheduleEvent> => {\n  const response = await axiosInstance.post('/schedule/create', payload);\n  return response.data;\n};\n","import axiosInstance from '@/api';\nimport { ScheduleEvent, ScheduleEventPayload } from '@/types/SheduleEvent';\n\nexport const updateScheduleEvent = async (eventId: string, payload: ScheduleEventPayload): Promise<ScheduleEvent> => {\n  const response = await axiosInstance.put(`/schedule/${eventId}`, payload);\n  return response.data;\n};","import axiosInstance from '@/api';\n\nexport const deleteScheduleEvent = async (eventId: string): Promise<void> => {\n  await axiosInstance.delete(`/schedule/${eventId}`);\n};","import axiosInstance from '@/api';\n\ninterface HomeworkPayload {\n  studentId: string;\n  scheduleId: string;\n  homeworkText?: string;\n  screenshot?: File;\n}\n\nexport const sendHomework = async (payload: HomeworkPayload): Promise<void> => {\n  const formData = new FormData();\n  formData.append('studentId', payload.studentId);\n  formData.append('scheduleId', payload.scheduleId);\n  \n  if (payload.homeworkText) {\n    formData.append('homeworkText', payload.homeworkText);\n  }\n  if (payload.screenshot) {\n    formData.append('screenshot', payload.screenshot);\n  }\n\n  await axiosInstance.post('/homework/send', formData);\n};\n","import axiosInstance from '@/api';\n\ninterface ReviewPayload {\n  status: 'approved' | 'rejected';\n  comment: string;\n}\n\nexport const reviewHomework = async (homeworkId: string, payload: ReviewPayload): Promise<any> => {\n  const response = await axiosInstance.put(`/homework/${homeworkId}/review`, payload);\n  return response.data;\n};","import axiosInstance from '@/api';\n\nexport const getHomeworksForReview = async (): Promise<any[]> => {\n  const response = await axiosInstance.get('/homework/coach');\n  return response.data;\n};\n","import axiosInstance from '@/api';\n\nexport const getHomeworkScreenshot = async (homeworkId: string): Promise<Blob> => {\n  const response = await axiosInstance.get(\n    `/homework/${homeworkId}/screenshot`, \n    { responseType: 'blob' } \n  );\n  return response.data;\n};","import React from 'react';\nimport { Paper, Box, Typography, Chip } from '@mui/material';\nimport moment from 'moment';\nimport { useTranslation } from 'react-i18next';\nimport { ScheduleEvent } from '@/types/SheduleEvent';\n\n// Icons\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\nimport HourglassEmptyIcon from '@mui/icons-material/HourglassEmpty';\nimport HighlightOffIcon from '@mui/icons-material/HighlightOff';\n\n// Стили статусов можно вынести сюда же\nconst statusStyles = {\n  scheduled: { icon: <HourglassEmptyIcon fontSize=\"small\" />, color: 'info' as const, labelKey: 'status.scheduled' },\n  pending: { icon: <HourglassEmptyIcon fontSize=\"small\" />, color: 'warning' as const, labelKey: 'status.pending' },\n  completed: { icon: <CheckCircleOutlineIcon fontSize=\"small\" />, color: 'success' as const, labelKey: 'status.completed' },\n  approved: { icon: <CheckCircleOutlineIcon fontSize=\"small\" />, color: 'success' as const, labelKey: 'status.approved' },\n  rejected: { icon: <HighlightOffIcon fontSize=\"small\" />, color: 'error' as const, labelKey: 'status.rejected' },\n};\ninterface EventCardProps {\n  event: ScheduleEvent;\n  variant?: 'light' | 'dark'; // <-- Добавляем вариант для стилизации\n  onSelect?: (event: ScheduleEvent) => void;\n}\n\nexport const EventCard: React.FC<EventCardProps> = ({ event, variant = 'light', onSelect }) => {\n  const { t } = useTranslation();\n  \n  const statusKey = event.status as keyof typeof statusStyles;\n  const style = statusStyles[statusKey] || statusStyles.scheduled;\n\n  // Определяем стили в зависимости от варианта\n  const paperStyles = variant === 'dark'\n    ? { bgcolor: '#2a2a2a', color: 'white' }\n    : { bgcolor: 'white', color: 'black' };\n\n  return (\n    <Paper \n      onClick={onSelect ? () => onSelect(event) : undefined}\n      sx={{ \n        ...paperStyles, // <-- Применяем нужные стили\n        p: 2, \n        borderRadius: 2,\n        cursor: onSelect ? 'pointer' : 'default',\n        transition: 'box-shadow 0.3s, transform 0.2s',\n        '&:hover': onSelect ? { boxShadow: 6, transform: 'translateY(-2px)' } : {},\n      }}\n    >\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 1 }}>\n        <Typography variant=\"h6\" fontWeight={500} noWrap>{event.title}</Typography>\n        <Chip icon={style.icon} label={t(style.labelKey)} color={style.color} size=\"small\"/>\n      </Box>\n      <Typography variant=\"body2\" color={variant === 'dark' ? 'grey.400' : 'text.secondary'}>\n        {moment(event.date).format('MMMM Do, YYYY [at] HH:mm')}\n      </Typography>\n      {event.description && <Typography variant=\"body2\" sx={{ mt: 1, color: variant === 'dark' ? 'grey.500' : 'text.secondary' }}>{event.description}</Typography>}\n    </Paper>\n  );\n};","import React, { useState, ChangeEvent } from 'react';\nimport {\n  TextField,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Avatar,\n  Box,\n  Link,\n} from '@mui/material';\nimport { updateProfile } from '@/api/profile';\nimport { notification } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\ninterface EditProfileProps {\n  user: any;\n  onClose: () => void;\n}\n\nexport const EditProfileForm: React.FC<EditProfileProps> = ({ user, onClose }) => {\n  const { t } = useTranslation();\n\n  const [firstName, setFirstName] = useState(user.firstName);\n  const [lastName, setLastName] = useState(user.lastName);\n  const [email, setEmail] = useState(user.email);\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n\n  const [showPassword, setShowPassword] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [avatarPreview, setAvatarPreview] = useState<string | undefined>(user.photoUrl);\n\n  const handleFileChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n      setAvatarPreview(URL.createObjectURL(file));\n    }\n  };\n\n  const handleSubmit = async () => {\n    try {\n      if (!showPassword) {\n        await updateProfile({\n          firstName,\n          lastName,\n          email,\n          avatar: selectedFile || undefined,\n        });\n        notification.success({\n          message: t('profile_edit.updated'),\n          description: undefined\n        });\n      } else {\n        if (!currentPassword || newPassword !== confirmPassword) {\n          notification.error({\n            message: t('profile_edit.passwordMismatch'),\n            description: undefined\n          });\n          return;\n        }\n\n        await updateProfile({\n          currentPassword,\n          newPassword,\n          avatar: selectedFile || undefined,\n        });\n\n        notification.success({\n          message: t('profile_edit.passwordChanged'),\n          description: undefined\n        });\n      }\n\n      onClose();\n      window.location.reload();\n    } catch (error) {\n      console.error(error);\n      notification.error({\n        message: t('profile_edit.updateFailed'),\n        description: undefined\n      });\n    }\n  };\n\n  return (\n    <Dialog open onClose={onClose} fullWidth maxWidth=\"sm\">\n      <DialogTitle>{t('profile_edit.editTitle')}</DialogTitle>\n      <DialogContent>\n        <Box display=\"flex\" alignItems=\"center\" flexDirection=\"column\" mb={2}>\n          <Avatar src={avatarPreview} sx={{ width: 96, height: 96, mb: 1 }} />\n          <Button variant=\"text\" size=\"small\" component=\"label\">\n            {t('profile_edit.uploadAvatar')}\n            <input hidden accept=\"image/*\" type=\"file\" onChange={handleFileChange} />\n          </Button>\n        </Box>\n\n        <TextField\n          margin=\"dense\"\n          label={t('profile_edit.firstName')}\n          fullWidth\n          value={firstName}\n          onChange={(e) => setFirstName(e.target.value)}\n        />\n        <TextField\n          margin=\"dense\"\n          label={t('profile_edit.lastName')}\n          fullWidth\n          value={lastName}\n          onChange={(e) => setLastName(e.target.value)}\n        />\n        <TextField\n          margin=\"dense\"\n          label={t('profile_edit.email')}\n          fullWidth\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n\n        {!showPassword && (\n          <Box mt={1}>\n            <Link component=\"button\" variant=\"body2\" onClick={() => setShowPassword(true)}>\n              {t('profile_edit.changePassword')}\n            </Link>\n          </Box>\n        )}\n\n        {showPassword && (\n          <Box mt={2}>\n            <TextField\n              margin=\"dense\"\n              label={t('profile_edit.currentPassword')}\n              fullWidth\n              type=\"password\"\n              value={currentPassword}\n              onChange={(e) => setCurrentPassword(e.target.value)}\n            />\n            <TextField\n              margin=\"dense\"\n              label={t('profile_edit.newPassword')}\n              fullWidth\n              type=\"password\"\n              value={newPassword}\n              onChange={(e) => setNewPassword(e.target.value)}\n            />\n            <TextField\n              margin=\"dense\"\n              label={t('profile_edit.confirmPassword')}\n              fullWidth\n              type=\"password\"\n              value={confirmPassword}\n              onChange={(e) => setConfirmPassword(e.target.value)}\n            />\n          </Box>\n        )}\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose}>{t('profile_edit.cancel')}</Button>\n        <Button variant=\"contained\" onClick={handleSubmit}>\n          {t('profile_edit.save')}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};","export const ROLE_PRIORITY: { [key: string]: number } = {\n  admin: 4,\n  coach: 3,\n  student: 2,\n  user: 1,\n};\n\nexport const getPrimaryRole = (roles: string[] = []): string => {\n  if (roles.length === 0) return 'user';\n  return [...roles].sort((a, b) => (ROLE_PRIORITY[b] || 0) - (ROLE_PRIORITY[a] || 0))[0];\n};","// src/pages/profile-page/components/ProfileHeader.tsx\n\nimport React from 'react';\nimport { Paper, Stack, Avatar, Box, Typography, Tooltip, Chip, Button, Link as MuiLink } from '@mui/material';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { User } from '@/types/User';\nimport { getPrimaryRole } from '@/utils';\nimport EditIcon from '@mui/icons-material/Edit';\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport SendIcon from '@mui/icons-material/Send';\n\ninterface ProfileHeaderProps {\n  user: User;\n  coach: User | null;\n  avatarUrl: string;\n  isMyProfile: boolean;\n  onEdit: () => void;\n  onLogout: () => void;\n  t: (key: string) => string;\n}\n\nexport const ProfileHeader: React.FC<ProfileHeaderProps> = ({ user, coach, avatarUrl, isMyProfile, onEdit, onLogout, t }) => {\n  const primaryRole = getPrimaryRole(user.roles);\n  const otherRoles = user.roles.filter(role => role !== primaryRole);\n  const roleChipColor = { admin: 'secondary', coach: 'primary', student: 'success', user: 'default' }[primaryRole] as \"secondary\" | \"primary\" | \"success\" | \"default\";\n  \n  return (\n    <Paper sx={{ p: { xs: 2, md: 4 }, mb: 4, bgcolor: '#1c1c1c', borderRadius: 4, color: 'white' }}>\n      <Stack direction={{ xs: 'column', md: 'row' }} spacing={4} alignItems=\"center\">\n        <Avatar src={avatarUrl} alt={`${user.firstName} ${user.lastName}`} sx={{ width: 120, height: 120, border: '4px solid #FFD700' }} />\n        <Box sx={{ flexGrow: 1, textAlign: { xs: 'center', md: 'left' } }}>\n          <Stack direction=\"row\" spacing={2} alignItems=\"center\" justifyContent={{xs: 'center', md: 'flex-start'}}>\n            <Typography variant=\"h4\" fontWeight=\"bold\">{user.firstName} {user.lastName}</Typography>\n            <Tooltip title={otherRoles.length > 0 ? `Also: ${otherRoles.join(', ')}` : ''} arrow>\n              <Chip label={primaryRole} color={roleChipColor} size=\"small\" sx={{ textTransform: 'capitalize' }} />\n            </Tooltip>\n          </Stack>\n          {coach && <Typography sx={{color: 'rgba(255,255,255,0.7)', mt: 1}}>Coach: <MuiLink component={RouterLink} to={`/profile/${coach._id}`} color=\"inherit\" sx={{textDecoration: 'underline'}}>{coach.firstName} {coach.lastName}</MuiLink></Typography>}\n          <Typography variant=\"body2\" sx={{ color: 'rgba(255, 255, 255, 0.5)', mt: 0.5 }}>{t('profile.registrationDate')}: {new Date(user.registrationDate).toLocaleDateString()}</Typography>\n        </Box>\n        <Stack direction=\"row\" spacing={2} sx={{ mt: { xs: 3, md: 0 } }}>\n            {isMyProfile ? (\n                <>\n                    <Button variant=\"outlined\" onClick={onEdit} startIcon={<EditIcon />} sx={{ color: '#FFD700', borderColor: 'rgba(255, 215, 0, 0.5)', '&:hover': {borderColor: '#FFD700'} }}>{t('profile.editProfile')}</Button>\n                    <Button variant=\"contained\" color=\"error\" onClick={onLogout} startIcon={<LogoutIcon />}>{t('profile.logout')}</Button>\n                </>\n            ) : (\n                primaryRole === 'coach' && <Button variant=\"contained\" color=\"primary\" startIcon={<SendIcon />}>Send Request</Button>\n            )}\n        </Stack>\n      </Stack>\n    </Paper>\n  );\n};","import React, { useMemo } from 'react';\nimport { Stack, Box, Typography, Skeleton, Paper, Divider } from '@mui/material';\nimport { ScheduleEvent } from '@/types/SheduleEvent';\nimport { EventCard } from '@/components/EventCard/EventCard'; // Переиспользуем нашу универсальную карточку\n\ninterface LessonsListProps {\n  schedule: ScheduleEvent[];\n  isLoading: boolean;\n  onEventSelect: (event: ScheduleEvent) => void;\n}\n\nexport const LessonsList: React.FC<LessonsListProps> = ({ schedule, isLoading, onEventSelect }) => {\n  // --- ЛОГИКА ЗАГРУЗКИ ---\n  if (isLoading) {\n    return (\n      <Stack spacing={2}>\n        <Skeleton variant=\"rectangular\" height={118} sx={{ borderRadius: 2, bgcolor: 'grey.800' }} />\n        <Skeleton variant=\"rectangular\" height={118} sx={{ borderRadius: 2, bgcolor: 'grey.800' }} />\n        <Skeleton variant=\"rectangular\" height={118} sx={{ borderRadius: 2, bgcolor: 'grey.800' }} />\n      </Stack>\n    );\n  }\n\n  // --- START: НОВАЯ ЛОГИКА РАЗДЕЛЕНИЯ И СОРТИРОВКИ ---\n  const { upcomingEvents, pastEvents } = useMemo(() => {\n    const now = new Date();\n    const upcoming: ScheduleEvent[] = [];\n    const past: ScheduleEvent[] = [];\n\n    schedule.forEach(event => {\n      if (new Date(event.date) >= now) {\n        upcoming.push(event);\n      } else {\n        past.push(event);\n      }\n    });\n\n    // Сортируем предстоящие от ближайшего к дальнему\n    upcoming.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\n    // Сортируем прошедшие от самого недавнего к самому старому (обратная сортировка)\n    past.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n\n    return { upcomingEvents: upcoming, pastEvents: past };\n  }, [schedule]);\n  // --- END: НОВАЯ ЛОГИКА ---\n\n  // Если вообще нет уроков\n  if (schedule.length === 0) {\n    return (\n      <Typography sx={{ color: 'grey.500', textAlign: 'center', p: 4 }}>\n        You have no scheduled lessons yet.\n      </Typography>\n    );\n  }\n\n  return (\n    // Используем React Fragment для группировки нескольких секций\n    <>\n      {/* --- СЕКЦИЯ ПРЕДСТОЯЩИХ УРОКОВ --- */}\n      <Box mb={5}>\n        <Typography variant=\"h5\" fontWeight=\"bold\" gutterBottom>\n          Upcoming\n        </Typography>\n        {upcomingEvents.length > 0 ? (\n          <Stack spacing={2}>\n            {upcomingEvents.map(event => (\n              <EventCard key={event._id} event={event} onSelect={onEventSelect} />\n            ))}\n          </Stack>\n        ) : (\n          <Paper sx={{ p: 4, textAlign: 'center' }}>\n            <Typography color=\"text.secondary\">You have no upcoming lessons.</Typography>\n          </Paper>\n        )}\n      </Box>\n\n      <Divider sx={{ borderColor: 'rgba(255, 255, 255, 0.12)' }} />\n\n      {/* --- СЕКЦИЯ АРХИВА (ПРОШЕДШИХ УРОКОВ) --- */}\n      <Box mt={4}>\n        <Typography variant=\"h5\" fontWeight=\"bold\" gutterBottom>\n          Archive\n        </Typography>\n        {pastEvents.length > 0 ? (\n          <Stack spacing={2}>\n            {pastEvents.map(event => (\n              <EventCard key={event._id} event={event} onSelect={onEventSelect} />\n            ))}\n          </Stack>\n        ) : (\n          <Paper sx={{ p: 4, textAlign: 'center' }}>\n            <Typography color=\"text.secondary\">Your lesson history is empty.</Typography>\n          </Paper>\n        )}\n      </Box>\n    </>\n  );\n};","import React from 'react';\nimport { Paper, Skeleton, Box, Typography, Button } from '@mui/material';\nimport { Link as RouterLink } from 'react-router-dom';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\nimport { ScheduleEvent } from '@/types/SheduleEvent';\nimport { EventCard } from '@/components/EventCard/EventCard';\n\ninterface NextLessonWidgetProps {\n  schedule: ScheduleEvent[];\n  isLoading: boolean;\n  onEventSelect: (event: ScheduleEvent) => void;\n}\n\nexport const NextLessonWidget: React.FC<NextLessonWidgetProps> = ({ schedule, isLoading, onEventSelect }) => {\n  if (isLoading) {\n    return <Paper sx={{ p: 2, bgcolor: '#2a2a2a', borderRadius: 3 }}><Skeleton variant=\"rectangular\" height={150} sx={{bgcolor: 'grey.700', borderRadius: 2}} /></Paper>;\n  }\n  \n  // Находим ОДНО, самое ближайшее будущее событие\n  const nextEvent = schedule\n    .filter(event => new Date(event.date) >= new Date())\n    .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime())[0]; // [0] - берем только первый элемент\n  \n  return (\n    <Box>\n      <Typography variant=\"h5\" fontWeight=\"bold\" sx={{ mb: 2 }}>Next Up</Typography>\n      {nextEvent ? (\n        // Если ближайший урок есть - показываем кликабельную карточку\n        <EventCard \n            event={nextEvent} \n            variant=\"dark\" \n            onSelect={onEventSelect} \n        />\n      ) : (\n        // Если уроков нет - показываем сообщение\n        <Paper sx={{ p: 4, bgcolor: '#2a2a2a', color: 'white', borderRadius: 3, textAlign: 'center' }}>\n            <Typography sx={{color: 'grey.500'}}>You have no upcoming lessons.</Typography>\n        </Paper>\n      )}\n\n      {/* Кнопка для перехода к полному списку ВСЕГДА видна, если есть хоть какие-то уроки */}\n      {schedule.length > 0 && (\n         <Button\n            component={RouterLink}\n            to=\"/students-shedule\" // Или на вкладку, если хотите\n            fullWidth\n            endIcon={<ArrowForwardIcon />}\n            sx={{ \n                mt: 2,\n                color: '#FFD700',\n                justifyContent: 'flex-start',\n                p: 1\n            }}\n        >\n            View Full Schedule\n        </Button>\n      )}\n    </Box>\n  );\n};","import React, { useState, useEffect } from 'react';\nimport { Dialog, DialogTitle, DialogContent, DialogActions, TextField, Button, Chip, Box, Typography, Link as MuiLink } from '@mui/material';\nimport { useTranslation } from 'react-i18next';\nimport moment from 'moment';\nimport BackupIcon from '@mui/icons-material/Backup';\nimport { notification } from 'antd';\nimport { ScheduleEvent } from '@/types/SheduleEvent';\n// Icons\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\nimport HourglassEmptyIcon from '@mui/icons-material/HourglassEmpty';\nimport HighlightOffIcon from '@mui/icons-material/HighlightOff';\n\n\n// Копируем statusStyles, т.к. они нужны для заголовка\nimport { HourglassEmpty } from '@mui/icons-material';\nconst statusStyles = {\n  scheduled: { icon: <HourglassEmpty fontSize=\"small\" />, color: 'info' as const, labelKey: 'status.scheduled' },\n  pending: { icon: <HourglassEmptyIcon fontSize=\"small\" />, color: 'warning' as const, labelKey: 'status.pending' },\n  completed: { icon: <CheckCircleOutlineIcon fontSize=\"small\" />, color: 'success' as const, labelKey: 'status.completed' },\n  approved: { icon: <CheckCircleOutlineIcon fontSize=\"small\" />, color: 'success' as const, labelKey: 'status.approved' },\n  rejected: { icon: <HighlightOffIcon fontSize=\"small\" />, color: 'error' as const, labelKey: 'status.rejected' },\n};\nconst MAX_FILE_SIZE_MB = 5;\n\ninterface HomeworkDialogProps {\n  event: ScheduleEvent | null;\n  open: boolean;\n  onClose: () => void;\n  onSendHomework: (text: string, file: File | null) => Promise<void>;\n}\n\nexport const HomeworkDialog: React.FC<HomeworkDialogProps> = ({ event, open, onClose, onSendHomework }) => {\n  const { t } = useTranslation();\n  const [homeworkText, setHomeworkText] = useState('');\n  const [screenshot, setScreenshot] = useState<File | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (!open) {\n      setHomeworkText('');\n      setScreenshot(null);\n      setIsSubmitting(false);\n    }\n  }, [open]);\n\n  if (!event) return null;\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      if (file.size > MAX_FILE_SIZE_MB * 1024 * 1024) {\n        notification.error({\n            message: t('errors.fileTooLarge', { size: MAX_FILE_SIZE_MB }),\n            description: undefined\n        });\n        return;\n      }\n      setScreenshot(file);\n    }\n  };\n\n  const handleSendClick = async () => {\n    if (!homeworkText.trim() && !screenshot) {\n      notification.error({\n          message: t('errors.emptyHomework'),\n          description: undefined\n      });\n      return;\n    }\n    setIsSubmitting(true);\n    try { await onSendHomework(homeworkText, screenshot); } \n    finally { setIsSubmitting(false); }\n  };\n\n  const statusKey = event.status as keyof typeof statusStyles;\n  const style = statusStyles[statusKey] || statusStyles.scheduled;\n\n  return (\n    <Dialog open={open} onClose={onClose} fullWidth maxWidth=\"sm\">\n      <DialogTitle sx={{ bgcolor: `${style.color}.main`, color: 'white' }}>{t('studentSchedule.eventDetails')}</DialogTitle>\n      <DialogContent sx={{ pt: 3 }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <Typography variant=\"h6\">{event.title}</Typography>\n          <Chip icon={style.icon} label={t(style.labelKey)} color={style.color} size=\"small\"/>\n        </Box>\n        <Typography variant=\"body2\" color=\"text.secondary\">{moment(event.date).format('dddd, MMMM Do, YYYY [at] HH:mm')}</Typography>\n        {event.description && <Typography variant=\"body1\" sx={{ mt: 2 }}>{event.description}</Typography>}\n        {event.link && <Typography variant=\"body2\" sx={{ mt: 1 }}>{t('studentSchedule.form_link')}: <MuiLink href={event.link} target=\"_blank\" rel=\"noopener noreferrer\">{event.link}</MuiLink></Typography>}\n        {event.type === 'homework' && (\n          <Box sx={{ mt: 4 }}>\n            <Typography variant=\"h6\" sx={{mb: 2}}>{t('studentSchedule.sendHomeworkTitle')}</Typography>\n            <TextField label={t('studentSchedule.form_description')} fullWidth multiline rows={4} value={homeworkText} onChange={(e) => setHomeworkText(e.target.value)} variant=\"outlined\" disabled={isSubmitting} />\n            <Button sx={{mt: 2}} variant=\"outlined\" component=\"label\" startIcon={<BackupIcon />} disabled={isSubmitting}>\n              {screenshot ? screenshot.name : t('studentSchedule.uploadScreenshot')}\n              <input type=\"file\" hidden accept=\"image/*\" onChange={handleFileUpload} />\n            </Button>\n          </Box>\n        )}\n      </DialogContent>\n      <DialogActions sx={{ p: 2 }}>\n        <Button onClick={onClose} disabled={isSubmitting}>{t('common.close')}</Button>\n        {event.type === 'homework' && <Button onClick={handleSendClick} variant=\"contained\" color=\"primary\" disabled={isSubmitting}>{t('studentSchedule.send')}</Button>}\n      </DialogActions>\n    </Dialog>\n  );\n};","import React, { useEffect, useState, useMemo, useContext } from 'react';\nimport { Container, Typography, CircularProgress, Box, Tabs, Tab } from '@mui/material';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { notification } from 'antd';\n\nimport { getAvatarUrl, getUserProfileById } from '@/api/profile';\nimport { getCoachById } from '@/api/coaches';\nimport { getScheduleByStudent } from '@/api/schedule';\nimport { sendHomework } from '@/api/homework';\nimport { createNotification } from '@/api/notifications';\nimport { AuthContext } from '@/context/AuthContext'; \n\nimport { User } from '@/types/User';\nimport { ScheduleEvent } from '@/types/SheduleEvent';\n\nimport { ProfileHeader, EditProfileForm} from '@/components/Profile';\nimport { LessonsList } from '@/components/LessonsList/LessonsList';\nimport { NextLessonWidget } from '@/components/NextLessonWidget/NextLessonWidget';\nimport { HomeworkDialog } from '@/components/HomeworkDialog/HomeworkDialog';\n\nfunction TabPanel(props: { children?: React.ReactNode; index: number; value: number; }) {\n  const { children, value, index, ...other } = props;\n  return <div role=\"tabpanel\" hidden={value !== index} {...other}>{value === index && <Box sx={{ pt: 3 }}>{children}</Box>}</div>;\n}\n\nexport const ProfilePage: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { userId } = useParams<{ userId: string }>();\n  \n  const auth = useContext(AuthContext);\n  if (!auth) throw new Error(\"AuthContext is not available\");\n  const { user: loggedInUser, logout, loading: authLoading, refetchUser } = auth;\n\n  const [profileUser, setProfileUser] = useState<User | null>(null);\n  const [coach, setCoach] = useState<User | null>(null);\n  const [schedule, setSchedule] = useState<ScheduleEvent[]>([]);\n  const [loading, setLoading] = useState({ profile: true, coach: false, schedule: false });\n  const [error, setError] = useState<string | null>(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [activeTab, setActiveTab] = useState(0);\n  const [selectedEvent, setSelectedEvent] = useState<ScheduleEvent | null>(null);\n\n  useEffect(() => {\n    if (authLoading) return; \n    \n    if (!userId) {\n      setError(\"User ID is missing from the URL.\");\n      setLoading(prev => ({ ...prev, profile: false }));\n      return;\n    }\n\n    const fetchData = async () => {\n      setLoading({ profile: true, coach: false, schedule: false }); \n      try {\n        const data = await getUserProfileById(userId);\n        setProfileUser(data);\n      } catch (err) { setError(t('profile.errorLoadingProfile')); } \n      finally { setLoading(prev => ({ ...prev, profile: false })); }\n    };\n\n    fetchData();\n  }, [t, userId, authLoading]);\n\n  useEffect(() => {\n    if (profileUser) {\n      const isMyProfile = loggedInUser?._id === profileUser._id;\n      \n      if (profileUser.trainer) {\n        setLoading(prev => ({ ...prev, coach: true }));\n        getCoachById(profileUser.trainer).then(setCoach).catch(err => console.error(\"Failed to fetch coach\", err)).finally(() => setLoading(prev => ({ ...prev, coach: false })));\n      } else { setCoach(null); }\n      \n      if (isMyProfile && profileUser.roles.some(r => ['student', 'user'].includes(r))) {\n        setLoading(prev => ({ ...prev, schedule: true }));\n        getScheduleByStudent(profileUser._id).then(setSchedule).catch(err => console.error(\"Failed to fetch schedule\", err)).finally(() => setLoading(prev => ({ ...prev, schedule: false })));\n      } else { setSchedule([]); }\n    }\n  }, [profileUser, loggedInUser?._id]);\n  \n  const handleLogout = () => { logout(); navigate('/login'); };\n  const handleTabChange = (_: React.SyntheticEvent, newValue: number) => setActiveTab(newValue);\n  const handleSendHomework = async (homeworkText: string, screenshot: File | null) => {\n    if (!loggedInUser || !selectedEvent) return;\n    try {\n      await sendHomework({\n        studentId: loggedInUser._id,\n        scheduleId: selectedEvent._id,\n        homeworkText: homeworkText.trim() || undefined,\n        screenshot: screenshot || undefined,\n      });\n\n      if (selectedEvent.coach) {\n        await createNotification({\n            recipient: selectedEvent.coach,\n            type: 'homework_submission',\n            content: `New homework from ${loggedInUser.firstName} for: \"${selectedEvent.title}\"`,\n            metadata: { scheduleId: selectedEvent._id },\n        });\n      }\n      notification.success({\n        message: t('studentSchedule.homeworkSentSuccess', 'Homework sent successfully!'),\n        description: undefined\n      });\n      setSelectedEvent(null);\n      setSchedule(prev => prev.map(e => e._id === selectedEvent._id ? { ...e, status: 'pending' } : e));\n    } catch (err) {\n      notification.error({\n        message: t('errors.sendHomework', 'Failed to send homework.'),\n        description: undefined\n      });\n    }\n  };\n    const isMyProfile = loggedInUser?._id === userId;\n  const avatarUrl = useMemo(() => profileUser?._id ? getAvatarUrl(profileUser._id) : '', [profileUser]);\n\n  if (authLoading || loading.profile) {\n    return <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh', bgcolor: '#0e0e0e' }}><CircularProgress sx={{ color: '#FFD700' }} /></Box>;\n  }\n\n  if (error || !profileUser) {\n    return <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh', bgcolor: '#0e0e0e' }}><Typography color=\"error\">{error || 'User not found'}</Typography></Box>;\n  }\n  \n  return (\n      <Box sx={{ bgcolor: '#0e0e0e', color: 'white', minHeight: '100vh', py: 5 }}>\n        <Container maxWidth=\"lg\">\n          <Box sx={{ textAlign: 'center', mb: 5 }}>\n            <Typography variant=\"h2\" component=\"h1\" fontWeight=\"bold\">{isMyProfile ? t('profile.title') : `${profileUser.firstName}'s Profile`}</Typography>\n            <Typography variant=\"h6\" sx={{ mt: 1, color: 'rgba(255, 255, 255, 0.7)' }}>{isMyProfile && t('profile.subtitle')}</Typography>\n          </Box>\n          \n          <ProfileHeader \n            user={profileUser}\n            coach={coach}\n            avatarUrl={avatarUrl}\n            isMyProfile={isMyProfile}\n            onEdit={() => setIsEditing(true)}\n            onLogout={handleLogout}\n            t={t}\n          />\n          \n          <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n              <Tabs value={activeTab} onChange={handleTabChange} textColor=\"inherit\" TabIndicatorProps={{ sx: { backgroundColor: '#FFD700' } }}>\n                  <Tab label={t('profile.tabs.overview', 'Overview')} />\n                  {isMyProfile && profileUser.roles.some(r => ['student', 'user'].includes(r)) && \n                      <Tab label={t('profile.tabs.lessons', 'All Lessons')} />\n                  }\n                  <Tab label={t('profile.tabs.statistics', 'Statistics')} disabled />\n              </Tabs>\n          </Box>\n  \n          <TabPanel value={activeTab} index={0}>\n            {isMyProfile ? (\n              <NextLessonWidget \n                  schedule={schedule}\n                  isLoading={loading.schedule}\n                  onEventSelect={setSelectedEvent}\n              />\n            ) : (\n              <Typography sx={{ color: 'grey.500', textAlign: 'center', p: 4 }}>\n                This is a public profile overview.\n              </Typography>\n            )}\n          </TabPanel>\n  \n          {isMyProfile && profileUser.roles.some(r => ['student', 'user'].includes(r)) &&\n              <TabPanel value={activeTab} index={1}>\n                  <LessonsList \n                      schedule={schedule}\n                      isLoading={loading.schedule}\n                      onEventSelect={setSelectedEvent}\n                  />\n              </TabPanel>\n          }\n          \n          <TabPanel value={activeTab} index={isMyProfile && profileUser.roles.some(r => ['student', 'user'].includes(r)) ? 2 : 1}>\n             <Typography sx={{ color: 'grey.500', textAlign: 'center', p: 4 }}>\n                Game statistics and analytics are coming soon!\n              </Typography>\n          </TabPanel>\n  \n          {isMyProfile && isEditing && (\n            <EditProfileForm \n                user={profileUser} \n                onClose={() => {\n                  setIsEditing(false);\n                  refetchUser();\n                }} \n            />\n          )}\n          \n          {isMyProfile && (\n               <HomeworkDialog \n                  event={selectedEvent}\n                  open={!!selectedEvent}\n                  onClose={() => setSelectedEvent(null)}\n                  onSendHomework={handleSendHomework}\n              />\n          )}\n        </Container>\n      </Box>\n    );\n};","// src/shared/components/CustomTable/CustomTable.tsx\n\nimport React, { useState } from 'react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  TextField,\n  TablePagination,\n} from '@mui/material';\n\n// Универсальный тип строки таблицы. Гарантирует наличие `id`.\ninterface RowData {\n  id: string | number;\n  [key: string]: any;\n}\n\n// ИСПРАВЛЕНИЕ: Мы экспортируем этот тип, чтобы другие компоненты могли его использовать.\n// Также, `field` теперь может быть специальным значением 'actions',\n// а для таких полей мы добавим опциональный `render`.\nexport interface Column<T> {\n  field: keyof T | 'actions';\n  label: string;\n  render?: (row: T) => React.ReactNode;\n}\n\n// Пропсы для нашего универсального компонента.\ninterface CustomTableProps<T extends RowData> {\n  columns: Column<T>[];\n  data: T[];\n}\n\nconst CustomTable = <T extends RowData>({ columns, data }: CustomTableProps<T>) => {\n  const [search, setSearch] = useState<string>('');\n  const [rowsPerPage, setRowsPerPage] = useState<number>(10);\n  const [page, setPage] = useState<number>(0);\n\n  const handleSearch = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSearch(event.target.value);\n    setPage(0); // Сбрасываем на первую страницу при поиске\n  };\n\n  const handleChangePage = (_event: unknown, newPage: number) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n  \n  const filteredData = data.filter((row) =>\n    columns.some((column) => {\n      // Не ищем по колонке 'actions'\n      if (column.field === 'actions') return false;\n      const value = row[column.field as keyof T];\n      return value?.toString().toLowerCase().includes(search.toLowerCase());\n    })\n  );\n\n  return (\n    <Paper>\n      <TextField\n        fullWidth\n        label=\"Поиск\"\n        variant=\"outlined\"\n        value={search}\n        onChange={handleSearch}\n        style={{ padding: '16px' }}\n      />\n      <TableContainer>\n        <Table>\n          <TableHead>\n            <TableRow>\n              {columns.map((column) => (\n                <TableCell key={String(column.field)}>{column.label}</TableCell>\n              ))}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {filteredData.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((row) => (\n              <TableRow key={row.id}>\n                {columns.map((column) => (\n                  <TableCell key={String(column.field)}>\n                    {column.render ? column.render(row) : row[column.field as keyof T]}\n                  </TableCell>\n                ))}\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <TablePagination\n        rowsPerPageOptions={[10, 20, 50, 100]}\n        component=\"div\"\n        count={filteredData.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onPageChange={handleChangePage}\n        onRowsPerPageChange={handleChangeRowsPerPage}\n      />\n    </Paper>\n  );\n};\n\nexport default CustomTable;","// src/pages/users-page/users-page.tsx\n\nimport React, { useEffect, useState } from \"react\";\nimport {\n  Container,\n  Typography,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  MenuItem,\n  Select,\n  FormControl,\n  InputLabel,\n  Snackbar,\n  Alert,\n  IconButton,\n} from \"@mui/material\";\nimport { Delete, Edit } from \"@mui/icons-material\";\n\nimport axiosInstance from \"@/api\"; \nimport CustomTable, { Column } from \"@/shared/components/CustomTable/CustomTable\";\nimport { User } from \"@/types/User\";\n\n// Обновляем тип для данных с бэкенда, чтобы он соответствовал реальности\ninterface BackendUser {\n  _id: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  roles: string[];\n  registrationDate: string; // С бэкенда приходит строка!\n  // Добавляем опциональные поля, если они могут прийти\n  students?: any[]; // Замените any на Student, если есть импорт\n  trainer?: string;\n  trainerEmail?: string;\n  firebaseUID?: string;\n}\n\nexport const UsersPage: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [newRole, setNewRole] = useState<string>(\"\");\n  const [actionType, setActionType] = useState<\"add\" | \"remove\">(\"add\");\n  const [open, setOpen] = useState<boolean>(false);\n  const [confirmDeleteOpen, setConfirmDeleteOpen] = useState<boolean>(false);\n  const [snackbar, setSnackbar] = useState<{ open: boolean; message: string; severity: \"success\" | \"error\" }>({\n    open: false,\n    message: \"\",\n    severity: \"success\",\n  });\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await axiosInstance.get<BackendUser[]>(\"/users\");\n\n        // ИСПРАВЛЕНИЕ: Создаем объекты, которые ПОЛНОСТЬЮ соответствуют типу User\n        const mappedUsers: User[] = response.data.map((user: any) => ({\n          id: user._id,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          email: user.email,\n          roles: user.roles,\n          \n          // 👇 Вот ключевые исправления, которые решают ошибку\n          _id: user._id, // 1. Добавляем обязательное поле _id\n          registrationDate: new Date(user.registrationDate), // 2. Преобразуем строку в объект Date\n\n          // 3. (Хорошая практика) Прокидываем опциональные поля\n          firebaseUID: user.firebaseUID,\n          students: user.students,\n          trainer: user.trainer,\n          trainerEmail: user.trainerEmail,\n        }));\n        setUsers(mappedUsers);\n      } catch (error) {\n        console.error(\"Ошибка при получении списка пользователей:\", error);\n      }\n    };\n    fetchUsers();\n  }, []);\n\n  // ... остальной код компонента без изменений ...\n  const handleOpen = (user: User) => {\n    setSelectedUser(user);\n    setNewRole(\"\");\n    setActionType(\"add\");\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setSelectedUser(null);\n    setOpen(false);\n  };\n\n  const handleConfirmDeleteOpen = (user: User) => {\n    setSelectedUser(user);\n    setConfirmDeleteOpen(true);\n  };\n\n  const handleConfirmDeleteClose = () => {\n    setConfirmDeleteOpen(false);\n    setSelectedUser(null);\n  };\n\n  const handleRoleChange = async () => {\n    if (!selectedUser) return;\n    try {\n      await axiosInstance.put(\"/admin/update-role\", {\n        userEmail: selectedUser.email,\n        role: newRole,\n        action: actionType,\n      });\n\n      setUsers(users.map(user =>\n        user.id === selectedUser.id\n          ? {\n              ...user,\n              roles: actionType === \"add\" ? [...user.roles, newRole] : user.roles.filter(role => role !== newRole),\n            }\n          : user\n      ));\n      setSnackbar({ open: true, message: \"Роль успешно изменена\", severity: \"success\" });\n      handleClose();\n    } catch (error) {\n      console.error(\"Ошибка при изменении роли:\", error);\n      setSnackbar({ open: true, message: \"Ошибка при изменении роли\", severity: \"error\" });\n    }\n  };\n\n  const handleDeleteUser = async () => {\n    if (!selectedUser) return;\n    try {\n      await axiosInstance.delete(`/admin/delete-user/${selectedUser.id}`);\n      setUsers(users.filter(user => user.id !== selectedUser.id));\n      setSnackbar({ open: true, message: \"Пользователь удалён\", severity: \"success\" });\n      handleConfirmDeleteClose();\n    } catch (error) {\n      console.error(\"Ошибка при удалении пользователя:\", error);\n      setSnackbar({ open: true, message: \"Ошибка при удалении пользователя\", severity: \"error\" });\n    }\n  };\n\n  const columns: Column<User>[] = [\n    { field: \"firstName\", label: \"Имя\" },\n    { field: \"lastName\", label: \"Фамилия\" },\n    { field: \"email\", label: \"Email\" },\n    { field: \"roles\", label: \"Роли\", render: (user) => user.roles.join(', ') },\n    {\n      field: \"actions\",\n      label: \"Действия\",\n      render: (user: User) => (\n        <>\n          <IconButton size=\"small\" onClick={() => handleOpen(user)}>\n            <Edit />\n          </IconButton>\n          <IconButton size=\"small\" color=\"error\" onClick={() => handleConfirmDeleteOpen(user)}>\n            <Delete />\n          </IconButton>\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" gutterBottom>Список пользователей</Typography>\n      <CustomTable columns={columns} data={users} />\n\n      {/* Диалоговые окна без изменений... */}\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xs\">\n        <DialogTitle>Управление ролями</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Пользователь: <strong>{selectedUser?.firstName} {selectedUser?.lastName}</strong>\n          </DialogContentText>\n          <FormControl fullWidth sx={{ marginTop: 2 }}>\n            <InputLabel>Роль</InputLabel>\n            <Select value={newRole} onChange={(e) => setNewRole(e.target.value)} label=\"Роль\">\n              <MenuItem value=\"student\">Студент</MenuItem>\n              <MenuItem value=\"coach\">Тренер</MenuItem>\n            </Select>\n          </FormControl>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose}>Отмена</Button>\n          <Button onClick={handleRoleChange} color=\"primary\" disabled={!newRole}>Сохранить</Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog open={confirmDeleteOpen} onClose={handleConfirmDeleteClose}>\n        <DialogTitle>Подтвердите удаление</DialogTitle>\n        <DialogContent>\n            <DialogContentText>\n                Вы уверены, что хотите удалить пользователя {selectedUser?.email}? Это действие необратимо.\n            </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleConfirmDeleteClose}>Нет</Button>\n          <Button onClick={handleDeleteUser} color=\"error\">Да, удалить</Button>\n        </DialogActions>\n      </Dialog>\n      <Snackbar open={snackbar.open} autoHideDuration={4000} onClose={() => setSnackbar({ ...snackbar, open: false })}>\n        <Alert severity={snackbar.severity} onClose={() => setSnackbar({ ...snackbar, open: false })} variant=\"filled\">\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Container>\n  );\n};","import React, { useEffect, useState, useCallback } from 'react';\nimport {\n    Dialog, DialogTitle, DialogContent, DialogActions, Button, TextField,\n    MenuItem, Select, FormControl, InputLabel, Grid, Paper, IconButton,\n    Stack, Typography, Box, SelectChangeEvent, Tooltip,\n} from '@mui/material';\nimport { Calendar, momentLocalizer, Event as BigCalendarEvent } from 'react-big-calendar';\nimport moment from 'moment';\nimport { notification } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\n// MUI Icons\nimport CloseIcon from '@mui/icons-material/Close';\nimport AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\nimport SaveIcon from '@mui/icons-material/Save';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EventNoteIcon from '@mui/icons-material/EventNote';\nimport PeopleIcon from '@mui/icons-material/People';\nimport AssignmentIcon from '@mui/icons-material/Assignment';\nimport MenuBookIcon from '@mui/icons-material/MenuBook';\nimport EmojiEventsIcon from '@mui/icons-material/EmojiEvents';\n\n// Local Imports\nimport {\n  getScheduleByStudent, createScheduleEvent,\n  updateScheduleEvent, deleteScheduleEvent\n} from '@/api/schedule';\nimport { Student } from '@/types/Student';\nimport { ScheduleEvent, ScheduleEventPayload } from '@/types/SheduleEvent';\n\n// SCSS Styles\nimport './styles.scss';\n\nconst localizer = momentLocalizer(moment);\n\n// Иконки для типов событий\nconst eventTypeIcons = {\n  individual_lesson: <EventNoteIcon fontSize=\"small\" />,\n  group_lesson: <PeopleIcon fontSize=\"small\" />,\n  homework: <AssignmentIcon fontSize=\"small\" />,\n  opening_study: <MenuBookIcon fontSize=\"small\" />,\n  tournament_participation: <EmojiEventsIcon fontSize=\"small\" />,\n};\n\nconst eventTypes: (keyof typeof eventTypeIcons)[] = [\n    \"individual_lesson\", \"group_lesson\", \"homework\",\n    \"opening_study\", \"tournament_participation\"\n];\n\n// Кастомный компонент для отображения события в календаре\nconst CustomEvent: React.FC<{ event: BigCalendarEvent & Partial<ScheduleEvent> }> = ({ event }) => {\n  const eventType = event.type as keyof typeof eventTypeIcons;\n  if (!eventType) return null;\n\n  const icon = eventTypeIcons[eventType];\n  const className = `custom-event rbc-event--${eventType}`;\n\n  return (\n    <Tooltip title={event.description || event.title} placement=\"top\">\n      <div className={className}>\n        {icon}\n        <Typography variant=\"caption\" noWrap component=\"span\">{event.title}</Typography>\n      </div>\n    </Tooltip>\n  );\n};\n\n\ninterface EditScheduleModalProps {\n    open: boolean;\n    onClose: () => void;\n    student: Student | null;\n}\n\nconst EditScheduleModal: React.FC<EditScheduleModalProps> = ({ open, onClose, student }) => {\n    const { t } = useTranslation();\n    const [events, setEvents] = useState<ScheduleEvent[]>([]);\n    const [selectedEvent, setSelectedEvent] = useState<Partial<ScheduleEvent>>({});\n    const [selectedDate, setSelectedDate] = useState<Date | null>(null);\n\n    if (!student) return null;\n\n    const studentName = `${student.firstName} ${student.lastName}`;\n\n    const resetForm = useCallback(() => {\n        setSelectedEvent({\n            student: student._id, status: 'scheduled',\n            title: '', type: 'individual_lesson', date: '',\n            description: '', link: ''\n        });\n        setSelectedDate(null);\n    }, [student]);\n\n    const fetchSchedule = useCallback(async () => {\n        if (!student._id) return;\n        try {\n            const studentSchedule = await getScheduleByStudent(student._id);\n            setEvents(studentSchedule);\n        } catch (error) {\n            console.error('Failed to fetch schedule:', error);\n            notification.error({\n                message: t('schedule.fetchError'),\n                description: undefined\n            });\n        }\n    }, [student, t]);\n    \n    // --- ПОЛНАЯ ЛОГИКА СОХРАНЕНИЯ ---\n    const handleSaveEvent = async () => {\n        const { date, type, title } = selectedEvent;\n        if (!date || !type || !title) {\n            notification.error({\n                message: t('schedule.fieldRequired'),\n                description: undefined\n            });\n            return;\n        }\n\n        const payload: ScheduleEventPayload = {\n            studentId: student._id,\n            date: new Date(date).toISOString(),\n            title: title,\n            description: selectedEvent.description || \"\",\n            link: selectedEvent.link || \"\",\n            type: type,\n            status: selectedEvent.status || 'scheduled',\n        };\n\n        try {\n            const isUpdating = !!selectedEvent._id;\n            if (isUpdating) {\n                await updateScheduleEvent(selectedEvent._id!, payload);\n            } else {\n                await createScheduleEvent(payload);\n            }\n            notification.success({\n                message: t(isUpdating ? 'schedule.updateSuccess' : 'schedule.createSuccess'),\n                description: undefined\n            });\n            await fetchSchedule();\n            resetForm();\n        } catch (error) {\n            console.error('Failed to save event:', error);\n        }\n    };\n    \n    // --- ПОЛНАЯ ЛОГИКА УДАЛЕНИЯ ---\n    const handleDeleteEvent = async () => {\n        if (!selectedEvent._id) return;\n        try {\n            await deleteScheduleEvent(selectedEvent._id);\n            notification.success({\n                message: t('schedule.deleteSuccess'),\n                description: undefined\n            });\n            await fetchSchedule();\n            resetForm();\n        } catch (error) {\n            console.error('Failed to delete event:', error);\n        }\n    };\n\n    useEffect(() => {\n        if (open && student) {\n            fetchSchedule();\n            resetForm();\n        }\n    }, [open, student, fetchSchedule, resetForm]);\n\n    const handleSelectSlot = useCallback(({ start }: { start: Date }) => {\n        resetForm();\n        setSelectedDate(start);\n        setSelectedEvent(prev => ({\n            ...prev,\n            date: moment(start).format('YYYY-MM-DDTHH:mm'),\n        }));\n    }, [resetForm]);\n\n    const handleSelectEvent = useCallback((event: BigCalendarEvent & Partial<ScheduleEvent>) => {\n        setSelectedDate(event.date ? new Date(event.date) : null);\n        setSelectedEvent({\n            ...event,\n            date: event.date ? moment(event.date).format('YYYY-MM-DDTHH:mm') : '',\n        });\n    }, []);\n\n    const calendarEvents = events.map(event => ({\n      ...event, id: event._id, start: new Date(event.date),\n      end: moment(event.date).add(1, 'hour').toDate(), title: event.title,\n    }));\n    \n    const dayPropGetter = useCallback((date: Date) => ({\n        className: (selectedDate && moment(date).isSame(selectedDate, 'day'))\n            ? 'rbc-selected-slot-custom'\n            : '',\n    }), [selectedDate]);\n\n    const handleFormInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n        const { name, value } = e.target;\n        setSelectedEvent(prev => ({ ...prev, [name]: value }));\n    };\n    \n    const handleTypeChange = (e: SelectChangeEvent<string>) => {\n        setSelectedEvent(prev => ({ ...prev, type: e.target.value as ScheduleEvent['type'] }));\n    };\n\n    return (\n        <Dialog open={open} onClose={onClose} fullWidth maxWidth=\"lg\" className=\"schedule-dialog\">\n            <DialogTitle className=\"schedule-dialog__header\">\n                <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                    <Typography variant=\"h6\" component=\"div\">{t('schedule.editScheduleTitle', { studentName })}</Typography>\n                    <IconButton aria-label=\"close\" onClick={onClose} className=\"schedule-dialog__close-btn\">\n                        <CloseIcon />\n                    </IconButton>\n                </Stack>\n            </DialogTitle>\n            <DialogContent dividers className=\"schedule-dialog__content\">\n                <Grid container spacing={3}>\n                    <Grid item xs={12} md={7}>\n                        <Calendar\n                            localizer={localizer}\n                            events={calendarEvents}\n                            startAccessor=\"start\" endAccessor=\"end\"\n                            selectable onSelectSlot={handleSelectSlot}\n                            onSelectEvent={handleSelectEvent}\n                            components={{ event: CustomEvent }}\n                            dayPropGetter={dayPropGetter}\n                            className=\"schedule-calendar\"\n                        />\n                    </Grid>\n                    <Grid item xs={12} md={5}>\n                        <Paper component=\"form\" className=\"event-form\" onSubmit={(e) => { e.preventDefault(); handleSaveEvent(); }}>\n                            <Typography variant=\"h6\" className=\"event-form__header\">\n                                {selectedEvent._id\n                                    ? t('schedule.eventDetails')\n                                    : selectedDate\n                                    ? t('schedule.addEventForDate', { date: moment(selectedDate).format('MMMM Do, YYYY') })\n                                    : t('schedule.addEvent')\n                                }\n                            </Typography>\n                            <Stack spacing={2.5} className=\"event-form__fields\">\n                                <TextField name=\"title\" label={t('schedule.form_title')} variant=\"filled\" fullWidth\n                                    value={selectedEvent.title || ''} onChange={handleFormInputChange} className=\"event-form__field\"/>\n                                \n                                <FormControl variant=\"filled\" fullWidth className=\"event-form__field\">\n                                    <InputLabel>{t('schedule.form_type')}</InputLabel>\n                                    <Select name=\"type\" value={selectedEvent.type || ''} onChange={handleTypeChange}>\n                                        {eventTypes.map(type => (\n                                            <MenuItem key={type} value={type}>{t(`schedule.eventTypes.${type}`)}</MenuItem>\n                                        ))}\n                                    </Select>\n                                </FormControl>\n                                \n                                <TextField name=\"description\" label={t('schedule.form_description')} variant=\"filled\" fullWidth multiline rows={3}\n                                    value={selectedEvent.description || ''} onChange={handleFormInputChange} className=\"event-form__field\"/>\n\n                                <TextField name=\"link\" label={t('schedule.form_link')} variant=\"filled\" fullWidth\n                                    value={selectedEvent.link || ''} onChange={handleFormInputChange} className=\"event-form__field\"/>\n                                \n                                <TextField name=\"date\" label={t('schedule.form_date')} type=\"datetime-local\" variant=\"filled\" fullWidth\n                                    value={selectedEvent.date || ''} onChange={handleFormInputChange}\n                                    InputLabelProps={{ shrink: true }} className=\"event-form__field\"/>\n                            </Stack>\n                        </Paper>\n                    </Grid>\n                </Grid>\n            </DialogContent>\n            <DialogActions className=\"schedule-dialog__actions\">\n                <Button onClick={onClose} className=\"action-button action-button--close\">{t('common.close')}</Button>\n                <Box sx={{ flex: '1 1 auto' }} /> \n                {selectedEvent._id && (\n                    <Button onClick={handleDeleteEvent} variant=\"outlined\" startIcon={<DeleteIcon />} className=\"action-button action-button--delete\">\n                        {t('common.delete')}\n                    </Button>\n                )}\n                <Button onClick={handleSaveEvent} variant=\"contained\" startIcon={selectedEvent._id ? <SaveIcon /> : <AddCircleOutlineIcon />} className=\"action-button action-button--save\">\n                    {selectedEvent._id ? t('common.save') : t('common.add')}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nexport default EditScheduleModal;","import React, { useEffect, useState, useMemo, useCallback } from 'react';\nimport { Container, Typography, Table, TableBody, TableCell, TableHead, TableRow, Paper, Button, CircularProgress } from '@mui/material';\nimport { useTranslation } from \"react-i18next\";\nimport { notification } from 'antd';\n\nimport { \n  getStudentIdsByCoach, \n  getStudentDetails, \n  removeStudentFromCoach \n} from '@/api/coaches';\n\nimport { Student } from '@/types/Student';\nimport EditScheduleModal from '../../components/Schedule/EditScheduleModal';\n\nexport const StudentsPage: React.FC = () => {\n  const { t } = useTranslation();\n  const [students, setStudents] = useState<Student[]>([]);\n  const [selectedStudent, setSelectedStudent] = useState<Student | null>(null);\n  const [openModal, setOpenModal] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const coachEmail = useMemo(() => {\n    const userStr = localStorage.getItem('user');\n    return userStr ? JSON.parse(userStr).email : null;\n  }, []);\n\n  const fetchStudents = useCallback(async () => {\n    if (!coachEmail) {\n      setIsLoading(false);\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const studentIds = await getStudentIdsByCoach(coachEmail);\n\n      if (!Array.isArray(studentIds) || studentIds.length === 0) {\n  setStudents([]);\n  return;\n}\n\n      const studentDetailsPromises = studentIds.map(id => getStudentDetails(coachEmail, id));\n\n      \n      const studentDetails = await Promise.all(studentDetailsPromises);\n      \n      setStudents(studentDetails.filter((student): student is Student => student !== null));\n\n    } catch (error) {\n      console.error('Ошибка при получении списка учеников:', error);\n      notification.error({\n        message: t('studentsPage.fetchError'),\n        description: undefined\n      });\n      setStudents([]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [coachEmail, t]);\n\n\n  const handleRemoveStudent = async (studentId: string) => {\n    if (!coachEmail) return;\n    try {\n      await removeStudentFromCoach(coachEmail, studentId);\n      notification.success({\n        message: t('studentsPage.studentDeletedSuccess'),\n        description: undefined\n      });\n      setStudents(prevStudents => prevStudents.filter(s => s._id !== studentId));\n    } catch (error) {\n      console.error('Ошибка при удалении ученика:', error);\n    }\n  };\n\n  const handleEditSchedule = (student: Student) => {\n    setSelectedStudent(student);\n    setOpenModal(true);\n  };\n  \n  useEffect(() => {\n    fetchStudents();\n  }, [fetchStudents]);\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" gutterBottom>\n        {t(\"studentsPage.studentsListTitle\")}\n      </Typography>\n      <Paper>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>{t(\"studentsPage.firstName\")}</TableCell>\n              <TableCell>{t(\"studentsPage.lastName\")}</TableCell>\n              <TableCell>{t(\"studentsPage.email\")}</TableCell>\n              <TableCell align=\"right\">{t(\"studentsPage.actions\")}</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {isLoading ? (\n              <TableRow>\n                <TableCell colSpan={4} align=\"center\">\n                  <CircularProgress />\n                  <Typography sx={{ mt: 1 }}>{t('common.loading')}</Typography>\n                </TableCell>\n              </TableRow>\n            ) : students.length > 0 ? (\n              students.map((student) => (\n                <TableRow key={student._id}>\n                  <TableCell>{student.firstName}</TableCell>\n                  <TableCell>{student.lastName}</TableCell>\n                  <TableCell>{student.email}</TableCell>\n                  <TableCell align=\"right\">\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={() => handleEditSchedule(student)}\n                      style={{ marginRight: 10 }}\n                    >\n                      {t(\"studentsPage.editSchedule\")}\n                    </Button>\n                    <Button\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      onClick={() => handleRemoveStudent(student._id)}\n                    >\n                      {t(\"studentsPage.delete\")}\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))\n            ) : (\n              <TableRow>\n                <TableCell colSpan={4} align=\"center\">{t('studentsPage.noStudents')}</TableCell>\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </Paper>\n\n      {selectedStudent && (\n        <EditScheduleModal\n          open={openModal}\n          onClose={() => setOpenModal(false)}\n          student={selectedStudent}\n        />\n      )}\n    </Container>\n  );\n};","\nimport { Chess, Square, Move } from 'chess.js';\n\nexport interface IGameStatus {\n  isCheckmate: boolean;\n  isStalemate: boolean;\n  isThreefoldRepetition: boolean;\n  isInsufficientMaterial: boolean;\n  isDraw: boolean;\n  turn: 'w' | 'b';\n}\n\nexport class ChessGameEngine {\n  private game: Chess;\n  private fullHistory: string[] = []; \n\n  constructor(fen?: string) {\n    this.game = fen ? new Chess(fen) : new Chess();\n    this.fullHistory = this.game.history();\n  }\n\n  getFen(): string {\n    return this.game.fen();\n  }\n\n  getTurn(): 'w' | 'b' {\n    return this.game.turn();\n  }\n\n  getHistory(): string[] {\n    return this.fullHistory;\n  }\n\n  getMovesForSquare(square: Square): Move[] {\n    return this.game.moves({ square, verbose: true });\n  }\n\n  getStatus(): IGameStatus {\n    return {\n      isCheckmate: this.game.isCheckmate(),\n      isStalemate: this.game.isStalemate(),\n      isThreefoldRepetition: this.game.isThreefoldRepetition(),\n      isInsufficientMaterial: this.game.isInsufficientMaterial(),\n      isDraw: this.game.isDraw(),\n      turn: this.game.turn(),\n    };\n  }\n\n  handleMove(source: Square, target: Square): Move | null {\n    try {\n      const move = this.game.move({ from: source, to: target, promotion: 'q' });\n      if (move) {\n        this.fullHistory = this.game.history();\n      }\n      return move;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  resetGame(): void {\n    this.game.reset();\n    this.fullHistory = []; \n  }\n\n  loadPgn(pgn: string): boolean {\n    try {\n      this.game.loadPgn(pgn);\n\n      this.fullHistory = this.game.history(); \n      return true; \n    } catch (e) {\n      console.error(\"Invalid PGN:\", e); \n      return false;\n    }\n  }\n  \n  goToMove(moveIndex: number): void {\n    const tempGame = new Chess();\n    for (let i = 0; i < moveIndex; i++) {\n        if (this.fullHistory[i]) {\n            tempGame.move(this.fullHistory[i]);\n        }\n    }\n    this.game = tempGame;\n  }\n\n  uciToSan(uci: string): string | null {\n    const move = this.game.move({\n      from: uci.substring(0, 2),\n      to: uci.substring(2, 4),\n      promotion: uci.length === 5 ? uci.substring(4) : undefined,\n    });\n    if (move) {\n      this.game.undo();\n      return move.san;\n    }\n    return null;\n  }\n}\n\nexport default ChessGameEngine;","// src/features/Chess/hooks/useChessGame.ts\n\nimport { useState, useMemo, useCallback, useRef } from 'react';\nimport { Square } from 'chess.js';\nimport ChessGameEngine from '../engine/ChessGameEngine';\n\nexport const useChessGame = (initialFen?: string) => {\n    const engine = useMemo(() => new ChessGameEngine(initialFen), [initialFen]);\n\n    const [fen, setFen] = useState(engine.getFen());\n    const [history, setHistory] = useState<string[]>(engine.getHistory());\n    const [currentMoveIndex, setCurrentMoveIndex] = useState(history.length);\n\n    const [selectedSquare, setSelectedSquare] = useState<Square | null>(null);\n    const [moveOptions, setMoveOptions] = useState<{ [key: string]: React.CSSProperties }>({});\n\n    const fenRef = useRef(fen);\n    fenRef.current = fen;\n\n    const updateGameState = useCallback(() => {\n        setFen(engine.getFen());\n        const newHistory = engine.getHistory();\n        setHistory(newHistory);\n        setCurrentMoveIndex(newHistory.length);\n    }, [engine]);\n\n    const clearHighlights = useCallback(() => {\n        setSelectedSquare(null);\n        setMoveOptions({});\n    }, []);\n\n    const handleMove = useCallback((sourceSquare: Square, targetSquare: Square) => {\n        const moveSuccessful = engine.handleMove(sourceSquare, targetSquare);\n        if (moveSuccessful) {\n            updateGameState();\n            clearHighlights();\n            return true;\n        }\n        return false;\n    }, [engine, updateGameState, clearHighlights]);\n\n    const onSquareClick = useCallback((square: Square) => {\n        if (square === selectedSquare) {\n            clearHighlights();\n            return;\n        }\n\n        const moves = engine.getMovesForSquare(square);\n        if (moves.length === 0) {\n            clearHighlights();\n            return;\n        }\n\n        const newOptions: { [key: string]: React.CSSProperties } = {};\n        moves.forEach(move => {\n            newOptions[move.to] = {\n                background: move.flags.includes('c') \n                    ? 'radial-gradient(circle, rgba(0,0,0,0) 85%, rgba(0,0,0,0.2) 85%)'\n                    : 'radial-gradient(circle, rgba(0,0,0,0.2) 25%, transparent 30%)',\n                borderRadius: '50%',\n            };\n        });\n\n        setMoveOptions(newOptions);\n        setSelectedSquare(square);\n    }, [engine, selectedSquare, clearHighlights]);\n\n    const resetGame = useCallback(() => {\n        engine.resetGame();\n        updateGameState();\n        clearHighlights();\n    }, [engine, updateGameState, clearHighlights]);\n\n    const loadPgn = useCallback((pgn: string): boolean => {\n        const success = engine.loadPgn(pgn.trim());\n        if (success) {\n            updateGameState();\n            clearHighlights();\n        }\n        return success;\n    }, [engine, updateGameState, clearHighlights]);\n\n    const goToMove = useCallback((moveIndex: number) => {\n        engine.goToMove(moveIndex);\n        setFen(engine.getFen());\n        setCurrentMoveIndex(moveIndex);\n        clearHighlights();\n    }, [engine, clearHighlights]);\n\n\n    return {\n        fen,\n        history,\n        currentMoveIndex,\n        moveOptions,\n        actions: {\n            handleMove,\n            onSquareClick,\n            resetGame,\n            loadPgn,\n            goToMove,\n        }\n    };\n};","\nimport React from 'react';\nimport { Chessboard } from 'react-chessboard';\nimport { Square } from 'chess.js';\n\ninterface ChessBoardProps {\n  fen: string;\n  onPieceDrop: (sourceSquare: Square, targetSquare: Square) => boolean;\n  onSquareClick: (square: Square) => void; \n  squareStyles?: { [square: string]: React.CSSProperties }; \n}\n\nexport const ChessBoard: React.FC<ChessBoardProps> = ({ \n  fen, \n  onPieceDrop,\n  onSquareClick,\n  squareStyles  \n}) => {\n  return (\n    <Chessboard\n      position={fen}\n      onPieceDrop={onPieceDrop}\n      onSquareClick={onSquareClick}\n      customSquareStyles={squareStyles}\n      customBoardStyle={{ borderRadius: '4px', boxShadow: '0 5px 15px rgba(0, 0, 0, 0.5)' }}\n      customDarkSquareStyle={{ backgroundColor: '#779952' }}\n      customLightSquareStyle={{ backgroundColor: '#edeed1' }}\n    />\n  );\n};","import React from 'react';\nimport { Paper, Grid, Box, Typography } from '@mui/material';\n\nexport interface AnnotatedMove {\n  san: string;\n  evaluation?: number;\n}\n\ninterface MoveHistoryProps {\n  history: AnnotatedMove[];\n  currentMoveIndex: number;\n  onMoveClick: (moveIndex: number) => void;\n}\n\nconst getEvaluationSymbol = (evaluation?: number): string => {\n  if (evaluation === undefined) return '';\n  const evalAbs = Math.abs(evaluation);\n\n  if (evalAbs < 0.4) return ' =';\n  if (evalAbs < 1.0) return evaluation > 0 ? ' += ' : ' -= ';\n  if (evalAbs < 2.0) return evaluation > 0 ? ' ±' : ' ∓';\n  return evaluation > 0 ? ' +-' : ' -+';\n};\n\nconst getSymbolColor = (evaluation?: number): string => {\n    if (evaluation === undefined) return 'text.secondary';\n    if (Math.abs(evaluation) < 0.4) return 'text.secondary';\n    return evaluation > 0 ? 'success.light' : 'error.light';\n};\n\nexport const MoveHistory: React.FC<MoveHistoryProps> = ({\n  history,\n  currentMoveIndex,\n  onMoveClick,\n}) => {\n  const movePairs = React.useMemo(() => {\n    const pairs: { white: AnnotatedMove; black: AnnotatedMove | null }[] = [];\n    for (let i = 0; i < history.length; i += 2) {\n      pairs.push({ white: history[i], black: history[i + 1] || null });\n    }\n    return pairs;\n  }, [history]);\n\n  return (\n    <Paper variant=\"outlined\" sx={{ p: 1.5, height: '100%', overflowY: 'auto', bgcolor: '#1c1c1c', borderColor: 'rgba(255,255,255,0.2)' }}>\n      <Grid container rowSpacing={0.5} columnSpacing={1} sx={{ fontSize: '1rem', color: 'white' }}>\n        {movePairs.map((pair, index) => {\n          const whiteMoveIndex = index * 2 + 1;\n          const blackMoveIndex = index * 2 + 2;\n\n          return (\n            <React.Fragment key={index}>\n              <Grid item xs={2} sx={{ color: 'rgba(255, 255, 255, 0.6)', textAlign: 'right', pt: '4px' }}>\n                {index + 1}.\n              </Grid>\n              <Grid item xs={5}>\n                <Box\n                  onClick={() => onMoveClick(whiteMoveIndex)}\n                  sx={{ display: 'flex', alignItems: 'center', cursor: 'pointer', p: '2px 5px', borderRadius: '4px', bgcolor: currentMoveIndex === whiteMoveIndex ? 'rgba(255, 215, 0, 0.3)' : 'transparent', '&:hover': { bgcolor: 'rgba(255,255,255,0.1)' } }}\n                >\n                  <Typography component=\"span\">{pair.white.san}</Typography>\n                  <Typography component=\"span\" sx={{ color: getSymbolColor(pair.white.evaluation), fontWeight: 'bold', ml: 0.5 }}>\n                    {getEvaluationSymbol(pair.white.evaluation)}\n                  </Typography>\n                </Box>\n              </Grid>\n              <Grid item xs={5}>\n                {pair.black && (\n                  <Box\n                    onClick={() => onMoveClick(blackMoveIndex)}\n                    sx={{ display: 'flex', alignItems: 'center', cursor: 'pointer', p: '2px 5px', borderRadius: '4px', bgcolor: currentMoveIndex === blackMoveIndex ? 'rgba(255, 215, 0, 0.3)' : 'transparent', '&:hover': { bgcolor: 'rgba(255,255,255,0.1)' } }}\n                  >\n                    <Typography component=\"span\">{pair.black.san}</Typography>\n                    <Typography component=\"span\" sx={{ color: getSymbolColor(pair.black.evaluation), fontWeight: 'bold', ml: 0.5 }}>\n                        {getEvaluationSymbol(pair.black.evaluation)}\n                    </Typography>\n                  </Box>\n                )}\n              </Grid>\n            </React.Fragment>\n          );\n        })}\n      </Grid>\n    </Paper>\n  );\n};","import React from 'react';\nimport { Paper, Stack, Typography, Divider, Box, Switch, FormControlLabel } from '@mui/material';\n\ninterface AnalysisPanelProps {\n  evaluation: string | null;\n  depth: number;\n  principalVariation: string; // Теперь это будет отформатированная строка SAN\n  isAnalyzing: boolean;\n  isEngineOn: boolean;\n  onToggleEngine: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport const AnalysisPanel: React.FC<AnalysisPanelProps> = ({\n  evaluation,\n  depth,\n  principalVariation,\n  isAnalyzing,\n  isEngineOn,\n  onToggleEngine,\n}) => {\n  return (\n    <Paper variant=\"outlined\" sx={{ p: 2, borderColor: 'rgba(255,255,255,0.2)', borderRadius: 2 }}>\n      <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n        <Typography variant=\"h4\" fontWeight=\"bold\" sx={{ color: '#FFD700' }}>\n          {evaluation ?? <Typography component=\"span\" color=\"text.secondary\">...</Typography>}\n        </Typography>\n        <Stack direction=\"row\" alignItems=\"center\" spacing={1}>\n          <Stack alignItems=\"flex-end\">\n            <Typography variant=\"body2\" color=\"text.secondary\">Depth: {depth}</Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">SF 16</Typography>\n          </Stack>\n          <FormControlLabel\n            control={\n              <Switch\n                checked={isEngineOn}\n                onChange={onToggleEngine}\n                sx={{\n                  '& .MuiSwitch-switchBase.Mui-checked': {\n                    color: '#FFD700',\n                  },\n                  '& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track': {\n                    backgroundColor: '#FFD700',\n                  },\n                }}\n              />\n            }\n            label=\"\"\n            sx={{ mr: 0 }}\n          />\n        </Stack>\n      </Stack>\n      <Divider sx={{ my: 1, borderColor: 'rgba(255,255,255,0.2)' }} />\n      <Box sx={{ minHeight: '4em', overflowX: 'auto', whiteSpace: 'nowrap' }}>\n        <Typography variant=\"body1\">\n          {principalVariation || (isAnalyzing ? 'Analyzing...' : <Typography component=\"span\" color=\"text.secondary\">-</Typography>)}\n        </Typography>\n      </Box>\n    </Paper>\n  );\n};","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Chess, Square } from 'chess.js';\nimport { Container, Typography, Grid, Box, Paper, Stack, TextField, Button, IconButton } from '@mui/material';\nimport { notification } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\n// Импорт хука и компонентов\nimport { useChessGame } from '../hooks/useChessGame';\nimport { ChessBoard } from '../components/ChessBoard';\nimport { MoveHistory, AnnotatedMove } from '../components/MoveHistory';\nimport { AnalysisPanel } from '../components/AnalysisPanel';\n\n// Иконки\nimport ReplayIcon from '@mui/icons-material/Replay';\nimport UploadFileIcon from '@mui/icons-material/UploadFile';\nimport SkipPreviousIcon from '@mui/icons-material/SkipPrevious';\nimport ArrowLeftIcon from '@mui/icons-material/ArrowLeft';\nimport ArrowRightIcon from '@mui/icons-material/ArrowRight';\nimport SkipNextIcon from '@mui/icons-material/SkipNext';\n\nexport const AnalysisPage: React.FC = () => {\n    const { t } = useTranslation();\n    const { fen, history, currentMoveIndex, moveOptions, actions } = useChessGame();\n\n    // Состояния для анализа\n    const [annotatedHistory, setAnnotatedHistory] = useState<AnnotatedMove[]>([]);\n    const [inputPgn, setInputPgn] = useState('');\n    const [engineWorker, setEngineWorker] = useState<Worker | null>(null);\n    const [isLiveAnalyzing, setIsLiveAnalyzing] = useState(false);\n    const [liveEvaluation, setLiveEvaluation] = useState<string | null>(null);\n    const [liveDepth, setLiveDepth] = useState(0);\n    const [livePV, setLivePV] = useState(''); // Теперь это будет отформатированная SAN-строка\n    const [isEngineOn, setIsEngineOn] = useState(false);\n\n    const fenRef = useRef(fen);\n    useEffect(() => { fenRef.current = fen; }, [fen]);\n\n    useEffect(() => {\n        setAnnotatedHistory(history.map(san => ({ san })));\n    }, [history]);\n    \n    // --- Функции-обертки для действий из хука ---\n    const resetAnalysisData = () => {\n        setLiveEvaluation(null);\n        setLiveDepth(0);\n        setLivePV('');\n    };\n\n    const handleLoadPgn = () => {\n        if (actions.loadPgn(inputPgn)) {\n            resetAnalysisData();\n            notification.success({\n                message: t('chessGame.pgnLoadSuccess'),\n                description: undefined\n            });\n        } else {\n            notification.error({\n                message: t('chessGame.pgnLoadError'),\n                description: undefined\n            });\n        }\n    };\n    \n    const handleResetGame = () => {\n        actions.resetGame();\n        resetAnalysisData();\n        notification.success({\n            message: t('chessGame.resetSuccess'),\n            description: undefined\n        });\n    };\n\n    const handleGoToMove = (moveIndex: number) => {\n        actions.goToMove(moveIndex);\n        resetAnalysisData();\n    };\n\n    // --- Логика анализа ---\n\n    const liveAnalyzePosition = useCallback(() => {\n        if (engineWorker && !isLiveAnalyzing) {\n            setIsLiveAnalyzing(true);\n            resetAnalysisData();\n            engineWorker.postMessage(`position fen ${fen}`);\n            engineWorker.postMessage('go depth 18');\n        }\n    }, [engineWorker, fen, isLiveAnalyzing]);\n\n    useEffect(() => {\n        if (isEngineOn) {\n            liveAnalyzePosition();\n        } else if (engineWorker) {\n            engineWorker.postMessage('stop');\n            setIsLiveAnalyzing(false);\n        }\n    }, [fen, isEngineOn, liveAnalyzePosition, engineWorker]);\n    \n    const handleToggleEngine = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setIsEngineOn(event.target.checked);\n    };\n\n    // ВОЗВРАЩАЕМ ЭТУ ФУНКЦИЮ\n    const formatUCIToSAN = useCallback((uciLine: string, startFen: string) => {\n        try {\n            const tempGame = new Chess(startFen);\n            const moves = uciLine.split(' ');\n            let sanLine = '';\n            for (const uci of moves) {\n                const moveResult = tempGame.move({ from: uci.substring(0, 2) as Square, to: uci.substring(2, 4) as Square, promotion: uci.length === 5 ? uci.substring(4) : undefined });\n                if (moveResult) {\n                    if (tempGame.turn() === 'b') { // Ход только что сделали белые\n                        sanLine += `${tempGame.moveNumber()}. ${moveResult.san} `;\n                    } else {\n                        sanLine += `${moveResult.san} `;\n                    }\n                } else { break; }\n            }\n            return sanLine.trim();\n        } catch (e) { return uciLine; }\n    }, []);\n\n    useEffect(() => {\n        const worker = new Worker('/workers/stockfish.js');\n        setEngineWorker(worker);\n        worker.postMessage('uci');\n\n        worker.onmessage = (event) => {\n            const message = event.data as string;\n            if (message === 'uciok') return;\n\n            if (message.startsWith('info depth')) {\n                const depthMatch = message.match(/depth (\\d+)/);\n                const scoreMatch = message.match(/score (cp|mate) (-?\\d+)/);\n                const pvMatch = message.match(/ pv (.+)/);\n                if (depthMatch) setLiveDepth(parseInt(depthMatch[1], 10));\n                if (scoreMatch) {\n                    const turn = new Chess(fenRef.current).turn();\n                    const type = scoreMatch[1];\n                    let value = parseInt(scoreMatch[2], 10);\n                    if (turn === 'b') value *= -1;\n                    const evalString = type === 'cp' ? (value / 100).toFixed(2) : `M${Math.abs(value)}`;\n                    setLiveEvaluation(evalString);\n                }\n                if (pvMatch) {\n                    // Используем formatUCIToSAN для преобразования\n                    const formattedPV = formatUCIToSAN(pvMatch[1], fenRef.current);\n                    setLivePV(formattedPV);\n                }\n            }\n            if (message.startsWith('bestmove')) { setIsLiveAnalyzing(false); }\n        };\n\n        return () => worker.terminate();\n    }, [formatUCIToSAN]);\n\n    return (\n        <Box sx={{ bgcolor: '#0e0e0e', color: 'white', minHeight: '100vh', py: { xs: 2, md: 5 } }}>\n            <Container maxWidth=\"xl\">\n                <Box sx={{ textAlign: 'center', mb: 4 }}>\n                    <Typography variant=\"h2\" component=\"h1\" fontWeight=\"bold\">{t('chessGame.title')}</Typography>\n                    <Typography variant=\"h6\" sx={{ mt: 1, color: 'rgba(255, 255, 255, 0.7)' }}>{t('chessGame.subtitle')}</Typography>\n                </Box>\n                <Grid container spacing={4}>\n                    <Grid item xs={12} md={7}>\n                        <Paper sx={{ p: 2, bgcolor: '#1c1c1c', borderRadius: 4, aspectRatio: '1 / 1', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                            <ChessBoard\n                                fen={fen}\n                                onPieceDrop={actions.handleMove}\n                                onSquareClick={actions.onSquareClick}\n                                squareStyles={moveOptions}\n                            />\n                        </Paper>\n                    </Grid>\n                    <Grid item xs={12} md={5}>\n                        <Paper sx={{ p: 2, bgcolor: '#1c1c1c', borderRadius: 4, height: '100%' }}>\n                            <Stack spacing={2} height=\"100%\">\n                                <AnalysisPanel\n                                  evaluation={liveEvaluation}\n                                  depth={liveDepth}\n                                  principalVariation={livePV}\n                                  isAnalyzing={isLiveAnalyzing}\n                                  isEngineOn={isEngineOn}\n                                  onToggleEngine={handleToggleEngine}\n                                />\n                                <Box sx={{ flexGrow: 1, height: '250px' }}>\n                                    <MoveHistory history={annotatedHistory} currentMoveIndex={currentMoveIndex} onMoveClick={handleGoToMove} />\n                                </Box>\n                                <Stack direction=\"row\" spacing={1} justifyContent=\"center\" alignItems=\"center\">\n                                    <IconButton onClick={() => handleGoToMove(0)} disabled={currentMoveIndex === 0}><SkipPreviousIcon /></IconButton>\n                                    <IconButton onClick={() => handleGoToMove(currentMoveIndex - 1)} disabled={currentMoveIndex === 0}><ArrowLeftIcon /></IconButton>\n                                    <IconButton onClick={() => handleGoToMove(currentMoveIndex + 1)} disabled={currentMoveIndex === history.length}><ArrowRightIcon /></IconButton>\n                                    <IconButton onClick={() => handleGoToMove(history.length)} disabled={currentMoveIndex === history.length}><SkipNextIcon /></IconButton>\n                                </Stack>\n                                <Stack spacing={1}>\n                                    <TextField label={t('chessGame.pgnInputLabel')} fullWidth multiline rows={2} variant=\"filled\" value={inputPgn} onChange={(e) => setInputPgn(e.target.value)} sx={{ '& .MuiFilledInput-root': { backgroundColor: 'rgba(255,255,255,0.1)' } }} />\n                                    <Stack direction=\"row\" spacing={1}>\n                                        <Button variant=\"outlined\" onClick={handleResetGame} startIcon={<ReplayIcon />} fullWidth>{t('chessGame.reset')}</Button>\n                                        <Button variant=\"outlined\" onClick={handleLoadPgn} startIcon={<UploadFileIcon />} fullWidth>{t('chessGame.loadPgn')}</Button>\n                                    </Stack>\n                                </Stack>\n                            </Stack>\n                        </Paper>\n                    </Grid>\n                </Grid>\n            </Container>\n        </Box>\n    );\n};","import { Square } from 'chess.js';\nimport React from 'react';\nimport { Chessboard } from 'react-chessboard';\n\ninterface ChessBoardProps {\n  position: string;\n  onMove?: (source: Square, target: Square) => boolean;\n  onSquareClick?: (square: Square) => void;\n  boardWidth?: number;\n}\n\nconst ChessBoard: React.FC<ChessBoardProps> = ({ position, onMove, onSquareClick, boardWidth = 500 }) => {\n  return (\n    <Chessboard\n      position={position}\n      boardWidth={boardWidth}\n      onPieceDrop={onMove ? (source, target) => onMove(source, target) : undefined}\n      onSquareClick={onSquareClick}\n    />\n  );\n};\n\nexport default ChessBoard;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Chess, Square, PieceSymbol, Color } from 'chess.js';\nimport {\n  Checkbox,\n  Container,\n  Stack,\n  Button,\n  TextField,\n  Typography,\n  Box,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  FormGroup,\n  Paper,\n} from '@mui/material';\nimport { notification } from 'antd';\nimport ChessBoard from '../ChessGame/ChessBoard';\n\ninterface PuzzleEditorProps {\n  initialFen?: string;\n}\n\nconst PuzzleEditor: React.FC<PuzzleEditorProps> = ({ initialFen }) => {\n  const defaultFen = initialFen || '8/8/8/8/8/8/8/8 w - - 0 1';\n  const [isCursorOnBoard, setIsCursorOnBoard] = useState(false);\n  const [chess] = useState(() => {\n    const instance = new Chess();\n    instance.clear();\n    return instance;\n  });\n  const [fen, setFen] = useState(defaultFen);\n  const [draggedPiece, setDraggedPiece] = useState<{\n    icon: string;\n    type: PieceSymbol;\n    color: Color;\n  } | null>(null);\n  const [cursorStyle, setCursorStyle] = useState<React.CSSProperties | null>(null);\n\n  const pieces: { type: PieceSymbol; color: Color; icon: string }[] = [\n    { type: 'k', color: 'b', icon: '♚' },\n    { type: 'q', color: 'b', icon: '♛' },\n    { type: 'r', color: 'b', icon: '♜' },\n    { type: 'b', color: 'b', icon: '♝' },\n    { type: 'n', color: 'b', icon: '♞' },\n    { type: 'p', color: 'b', icon: '♟' },\n    { type: 'k', color: 'w', icon: '♔' },\n    { type: 'q', color: 'w', icon: '♕' },\n    { type: 'r', color: 'w', icon: '♖' },\n    { type: 'b', color: 'w', icon: '♗' },\n    { type: 'n', color: 'w', icon: '♘' },\n    { type: 'p', color: 'w', icon: '♙' },\n  ];\n\n  const boardRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!draggedPiece || !isCursorOnBoard || !boardRef.current) return;\n  \n      const rect = boardRef.current.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n  \n      if (x >= 0 && y >= 0 && x <= rect.width && y <= rect.height) {\n        setCursorStyle({\n          left: x,\n          top: y,\n        });\n      }\n    };\n  \n    window.addEventListener('mousemove', handleMouseMove);\n    return () => window.removeEventListener('mousemove', handleMouseMove);\n  }, [draggedPiece, isCursorOnBoard]);\n  \n  \n\n  const updateCastlingRights = (\n    _rights: string,\n    checked: boolean,\n    flag: 'K' | 'Q' | 'k' | 'q'\n  ) => {\n    let parts = fen.split(' ');\n    let castling = parts[2] === '-' ? '' : parts[2];\n    if (checked) {\n      castling = (castling + flag).split('').sort().join('');\n    } else {\n      castling = castling.replace(flag, '');\n    }\n    parts[2] = castling || '-';\n    const updatedFen = parts.join(' ');\n    try {\n      chess.load(updatedFen);\n      setFen(updatedFen);\n    } catch {\n      notification.error({\n        message: 'Ошибка рокировки',\n        description: undefined\n      });\n    }\n  };\n\n  const handleSquareClick = (square: Square) => {\n    const [file, rank] = [square.charCodeAt(0) - 97, 8 - parseInt(square[1])];\n    const board = chess.board();\n    const existingPiece = board[rank][file];\n  \n    if (draggedPiece) {\n      // если фигура уже стоит там — удалим её\n      if (\n        existingPiece &&\n        existingPiece.type === draggedPiece.type &&\n        existingPiece.color === draggedPiece.color\n      ) {\n        chess.remove(square);\n      } else {\n        chess.put(draggedPiece, square);\n      }\n      setFen(chess.fen());\n      return;\n    }\n  \n    if (existingPiece) {\n      chess.remove(square);\n      setFen(chess.fen());\n    }\n  };\n  \n\n  const clearBoard = () => {\n    chess.clear();\n    setFen(chess.fen());\n    notification.success({\n      message: 'Доска очищена!',\n      description: undefined\n    });\n  };\n\n  const setInitialPosition = () => {\n    chess.reset();\n    setFen(chess.fen());\n    notification.success({\n      message: 'Установлена начальная позиция!',\n      description: undefined\n    });\n  };\n\n  const removeDraggedPiece = () => {\n    setDraggedPiece(null);\n    setCursorStyle(null);\n  };\n\n  const savePosition = () => {\n    const kingCount = fen.split('').filter((char) => char.toLowerCase() === 'k').length;\n    if (kingCount < 2) {\n      notification.error({\n        message: 'Некорректная позиция',\n        description: 'На доске должно быть как минимум два короля.',\n      });\n      return;\n    }\n\n    try {\n      chess.load(fen);\n      notification.success({ message: 'Позиция сохранена', description: `FEN: ${fen}` });\n    } catch (error) {\n      notification.error({\n        message: 'Ошибка сохранения',\n        description: 'Некорректная FEN-позиция',\n      });\n    }\n  };\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" gutterBottom>\n        Редактор шахматной позиции\n      </Typography>\n\n      <Box display=\"flex\">\n      <Box\n  onMouseEnter={() => setIsCursorOnBoard(true)}\n  onMouseLeave={() => setIsCursorOnBoard(false)}\n  style={{\n    cursor: draggedPiece ? 'none' : 'default',\n    position: 'relative',\n    width: 500, // такой же как boardWidth\n    height: 500,\n  }}\n>\n  <ChessBoard\n    position={fen}\n    onSquareClick={handleSquareClick}\n    boardWidth={500}\n  />\n  {cursorStyle && draggedPiece && (\n    <div\n      style={{\n        ...cursorStyle,\n        position: 'absolute',\n        pointerEvents: 'none',\n        left: cursorStyle.left,\n        top: cursorStyle.top,\n        fontSize: '32px',\n        zIndex: 1000,\n      }}\n    >\n      {draggedPiece.icon}\n    </div>\n  )}\n</Box>\n\n\n        <Box ml={3} display=\"flex\" flexDirection=\"column\">\n          <Paper elevation={3} style={{ padding: '10px', marginBottom: '20px' }}>\n            <Typography variant=\"h6\" gutterBottom>Фигуры</Typography>\n            <Box display=\"grid\" gridTemplateColumns=\"repeat(2, 1fr)\" gap={1}>\n              {pieces.map((piece, idx) => (\n                <Box\n                  key={idx}\n                  onClick={() => setDraggedPiece(piece)}\n                  style={{\n                    textAlign: 'center',\n                    cursor: 'pointer',\n                    padding: 6,\n                    border: '1px solid #aaa',\n                    borderRadius: 4,\n                    fontSize: 24,\n                    backgroundColor: draggedPiece === piece ? '#1976d2' : '#f5f5f5',\n                    color: draggedPiece === piece ? '#fff' : 'inherit',\n                  }}\n                >\n                  {piece.icon}\n                </Box>\n              ))}\n            </Box>\n          </Paper>\n\n          <Paper elevation={3} style={{ padding: '10px', marginBottom: '20px' }}>\n            <Typography variant=\"h6\">Рокировка</Typography>\n            <FormGroup row>\n              <FormControlLabel\n                control={<Checkbox checked={fen.includes('K')} onChange={(e) => updateCastlingRights(fen, e.target.checked, 'K')} />}\n                label=\"Белые 0-0\"\n              />\n              <FormControlLabel\n                control={<Checkbox checked={fen.includes('Q')} onChange={(e) => updateCastlingRights(fen, e.target.checked, 'Q')} />}\n                label=\"Белые 0-0-0\"\n              />\n              <FormControlLabel\n                control={<Checkbox checked={fen.includes('k')} onChange={(e) => updateCastlingRights(fen, e.target.checked, 'k')} />}\n                label=\"Чёрные 0-0\"\n              />\n              <FormControlLabel\n                control={<Checkbox checked={fen.includes('q')} onChange={(e) => updateCastlingRights(fen, e.target.checked, 'q')} />}\n                label=\"Чёрные 0-0-0\"\n              />\n            </FormGroup>\n          </Paper>\n\n          <Paper elevation={3} style={{ padding: '10px' }}>\n            <Typography variant=\"h6\">Ход</Typography>\n            <RadioGroup\n              row\n              value={chess.turn()}\n              onChange={(e) => {\n                const newFen = fen.split(' ');\n                newFen[1] = e.target.value;\n                const updatedFen = newFen.join(' ');\n                try {\n                  chess.load(updatedFen);\n                  setFen(updatedFen);\n                } catch {\n                  notification.error({\n                    message: 'Ошибка изменения хода',\n                    description: undefined\n                  });\n                }\n              }}\n            >\n              <FormControlLabel value=\"w\" control={<Radio />} label=\"Белые\" />\n              <FormControlLabel value=\"b\" control={<Radio />} label=\"Чёрные\" />\n            </RadioGroup>\n          </Paper>\n        </Box>\n      </Box>\n\n      <Stack direction=\"row\" spacing={2} mt={3}>\n        <Button variant=\"contained\" onClick={clearBoard}>Очистить доску</Button>\n        <Button variant=\"contained\" onClick={setInitialPosition}>Начальная позиция</Button>\n        <Button variant=\"contained\" onClick={removeDraggedPiece}>Убрать фигуру</Button>\n        <Button variant=\"contained\" color=\"primary\" onClick={savePosition}>Сохранить</Button>\n      </Stack>\n\n      <TextField\n        label=\"FEN\"\n        value={fen}\n        fullWidth\n        multiline\n        rows={2}\n        onChange={(e) => {\n          const newFen = e.target.value;\n          try {\n            chess.load(newFen);\n            setFen(newFen);\n          } catch {\n            notification.error({\n              message: 'Некорректный FEN',\n              description: undefined\n            });\n          }\n        }}\n        style={{ marginTop: 20 }}\n      />\n\n      {cursorStyle && draggedPiece && (\n        <div style={cursorStyle}>{draggedPiece.icon}</div>\n      )}\n    </Container>\n  );\n};\n\nexport default PuzzleEditor;\n","import axiosInstance from '@/api';\n\nexport const checkVerificationStatus = async (email: string): Promise<{ emailVerified: boolean }> => {\n  const response = await axiosInstance.get('/auth/check-verification', {\n    params: { email }, \n  });\n  return response.data;\n};","import axiosInstance from '@/api';\n\nexport const resendVerificationEmail = async (email: string): Promise<{ msg: string }> => {\n  const response = await axiosInstance.post('/auth/resend-verification', { email });\n  return response.data;\n};","import React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { Typography, Button, Box, CircularProgress } from '@mui/material';\nimport { useTranslation } from 'react-i18next';\n\nimport { checkVerificationStatus, resendVerificationEmail } from '@/api/email-verify';\n\nexport const VerifyEmailPage: React.FC = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { t } = useTranslation();\n  \n  const { firstName, lastName, email } = location.state || {};\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [isPolling, setIsPolling] = useState(true); \n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const [resendDisabled, setResendDisabled] = useState(false);\n\n  const intervalIdRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (!email) {\n      console.error(\"Email not found in location state. Redirecting to register.\");\n      navigate('/register');\n      return;\n    }\n    \n    intervalIdRef.current = setInterval(async () => {\n      try {\n        const { emailVerified } = await checkVerificationStatus(email);\n        if (emailVerified) {\n          setIsPolling(false);\n          navigate('/login', { state: { message: t('verifyEmail.verifiedAndReadyToLogin') } });\n        }\n      } catch (error) {\n        console.error('Polling error:', error);\n      }\n    }, 5000);\n\n    return () => {\n      if (intervalIdRef.current) {\n        clearInterval(intervalIdRef.current);\n      }\n    };\n  }, [email, navigate, t]);\n\n  const handleResendEmail = async () => {\n    if (!email) return;\n\n    setIsLoading(true);\n    setSuccessMessage(null);\n    setErrorMessage(null);\n    try {\n      await resendVerificationEmail(email); \n\n      setSuccessMessage(t('verifyEmail.resendSuccess'));\n      setResendDisabled(true);\n      setTimeout(() => setResendDisabled(false), 120000); \n    } catch (error: any) {\n      if (error.response?.status === 429) {\n        setErrorMessage(t('verifyEmail.resendErrorTooMany'));\n      } else {\n        setErrorMessage(t('verifyEmail.resendError'));\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  return (\n    <Box textAlign=\"center\" mt={5} p={2}>\n      {isPolling && <CircularProgress sx={{ mb: 2 }} />}\n      <Typography variant=\"h4\" gutterBottom>\n        {t('verifyEmail.pageTitle')}\n      </Typography>\n      <Typography variant=\"body1\" gutterBottom>\n        <b>{t('verifyEmail.greeting', { firstName: firstName || '', lastName: lastName || '' })}</b>\n      </Typography>\n      <Typography variant=\"body1\" gutterBottom>\n        {t('verifyEmail.sentTo', { email: email || t('verifyEmail.yourEmail') })}\n      </Typography>\n      <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mt: 2, maxWidth: '600px', mx: 'auto' }}>\n        {t('verifyEmail.instruction')}\n      </Typography>\n\n      {successMessage && !errorMessage && (\n        <Typography variant=\"body2\" color=\"primary.main\" sx={{ mt: 2, fontWeight: 'bold' }}>\n          {successMessage}\n        </Typography>\n      )}\n\n      {errorMessage && (\n        <Typography variant=\"body2\" color=\"error\" sx={{ mt: 2, fontWeight: 'bold' }}>\n          {errorMessage}\n        </Typography>\n      )}\n\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleResendEmail}\n        disabled={resendDisabled || isLoading}\n        sx={{ mt: 3, mb: 2 }}\n      >\n        {isLoading ? t('verifyEmail.sending') : t('verifyEmail.resendButton')}\n      </Button>\n      \n      <Typography variant=\"caption\" display=\"block\">\n        {t('verifyEmail.didNotReceive')}\n      </Typography>\n    </Box>\n  );\n};","import axiosInstance from '@/api'; \n\nexport const fetchRequests = async () => {\n  const response = await axiosInstance.get('/trainer/requests', {\n  });\n  return response.data;\n};\n\n","import axiosInstance from '@/api'; \n\nexport const handleRequest = async (requestId: string, status: 'approved' | 'rejected') => {\n    await axiosInstance.patch(\n      `/trainer/request?request_id=${requestId}`,\n      { status },\n    );\n  };","import axiosInstance from '@/api'; \n\nexport const createRequest = async (coachId: string, experience: string, goals: string) => {\n  const response = await axiosInstance.post(\n      '/trainer/request', \n      {\n        coachId,\n        experience,\n        goals,\n      }\n    );\n    return response.data;\n};","import React, { useState, useEffect } from 'react';\nimport {\n  Container, Typography, Grid, Card, CardContent, Button, Dialog, DialogTitle,\n  DialogContent, DialogActions, TextField, Select, MenuItem, InputLabel,\n  FormControl, Divider, Box, Stack, Chip, Avatar, IconButton, InputAdornment, Paper,\n  CardMedia\n} from '@mui/material';\nimport { getCoaches } from '@/api/coaches';\nimport { notification } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { createRequest } from '@/api/requests';\n\n// Icons\nimport WorkHistoryIcon from '@mui/icons-material/WorkHistory';\nimport AttachMoneyIcon from '@mui/icons-material/AttachMoney';\nimport CloseIcon from '@mui/icons-material/Close';\nimport EditIcon from '@mui/icons-material/Edit';\nimport SendIcon from '@mui/icons-material/Send';\nimport SearchIcon from '@mui/icons-material/Search';\n\ninterface Coach {\n  _id: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  photoUrl?: string;\n  coachProfile?: {\n    title?: string;\n    experience?: string;\n    bio?: string;\n    price?: number;\n    services?: string[];\n  };\n}\n\n// Helper for styling form inputs\nconst formInputStyles = {\n  '& .MuiInputBase-root': {\n    backgroundColor: 'rgba(255, 255, 255, 0.08)',\n    '&:hover': {\n      backgroundColor: 'rgba(255, 255, 255, 0.12)',\n    }\n  },\n  '& .MuiInputLabel-root': {\n    color: 'rgba(255, 255, 255, 0.6)'\n  },\n  '& .MuiInputBase-input': {\n    color: 'white'\n  },\n   '& .MuiSelect-icon': {\n    color: 'rgba(255, 255, 255, 0.6)'\n  }\n};\n\n\nexport const CoachesPage: React.FC = () => {\n  const { t } = useTranslation();\n  const [coaches, setCoaches] = useState<Coach[]>([]);\n  const [selectedCoach, setSelectedCoach] = useState<Coach | null>(null);\n  const [filter, setFilter] = useState('');\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n\n  const currentUserEmail = localStorage.getItem('email');\n\n  const [formValues, setFormValues] = useState({\n    userName: '',\n    userEmail: '',\n    experienceLevel: 'Intermediate', // Using a key for state\n    goals: '',\n  });\n\n  const [editProfile, setEditProfile] = useState({\n    title: '',\n    experience: '',\n    bio: '',\n    price: '',\n    services: '',\n  });\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const data = await getCoaches();\n        setCoaches(data);\n      } catch (error) {\n        notification.error({\n          message: t('coaches.fetchError'),\n          description: undefined\n        });\n      }\n    };\n    fetchData();\n  }, [t]);\n\n  const handleOpenDialog = (coach: Coach) => {\n    setSelectedCoach(coach);\n    setIsDialogOpen(true);\n    setShowForm(false);\n    setIsEditMode(false);\n\n    setEditProfile({\n      title: coach.coachProfile?.title || '',\n      experience: coach.coachProfile?.experience || '',\n      bio: coach.coachProfile?.bio || '',\n      price: coach.coachProfile?.price?.toString() || '',\n      services: (coach.coachProfile?.services || []).join(', '),\n    });\n  };\n\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n    setTimeout(() => {\n      setSelectedCoach(null);\n      setShowForm(false);\n      setIsEditMode(false);\n      setFormValues({ userName: '', userEmail: '', experienceLevel: 'Intermediate', goals: '' });\n    }, 300);\n  };\n\n  const handleSendRequest = async () => {\n    if (!selectedCoach) return;\n    \n    try {\n      setIsLoading(true);\n      await createRequest(selectedCoach._id, formValues.experienceLevel, formValues.goals);\n      notification.success({\n        message: t('coaches.successMessage'),\n        description: undefined\n      });\n      handleCloseDialog();\n    } catch (error) {\n      notification.error({\n        message: t('coaches.submitError'),\n        description: undefined\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSaveEdit = async () => {\n    console.log(\"Saving profile:\", editProfile);\n    notification.success({\n      message: t('coaches.updated'),\n      description: undefined\n    });\n    handleCloseDialog();\n  };\n\n  const filteredCoaches = coaches.filter((c) =>\n    `${c.firstName} ${c.lastName}`.toLowerCase().includes(filter.toLowerCase())\n  );\n\n  const coachName = selectedCoach ? `${selectedCoach.firstName} ${selectedCoach.lastName}` : '';\n  \n  return (\n    <Box sx={{ bgcolor: '#0e0e0e', color: 'white', minHeight: '100vh', py: 8 }}>\n      <Container maxWidth=\"lg\">\n        <Box sx={{ textAlign: 'center', mb: 8 }}>\n          <Typography variant=\"h2\" component=\"h1\" fontWeight=\"bold\">{t('coaches.title')}</Typography>\n          <Typography variant=\"h6\" sx={{ mt: 1, color: 'rgba(255, 255, 255, 0.7)' }}>\n            {t('coaches.subtitle')}\n          </Typography>\n        </Box>\n\n        <Box sx={{ mb: 5, maxWidth: '600px', mx: 'auto' }}>\n          <TextField\n            fullWidth\n            variant=\"outlined\"\n            placeholder={t('coaches.searchByName')}\n            value={filter}\n            onChange={(e) => setFilter(e.target.value)}\n            sx={{\n              '& .MuiOutlinedInput-root': {\n                borderRadius: '30px',\n                backgroundColor: '#1c1c1c',\n                '& fieldset': { borderColor: 'rgba(255, 255, 255, 0.2)' },\n                '&:hover fieldset': { borderColor: '#FFD700' },\n                '&.Mui-focused fieldset': { borderColor: '#FFD700' },\n              },\n              '& .MuiInputBase-input': { color: 'white' },\n            }}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <SearchIcon sx={{ color: 'rgba(255, 255, 255, 0.5)' }} />\n                </InputAdornment>\n              ),\n            }}\n          />\n        </Box>\n\n        <Grid container spacing={4}>\n          {filteredCoaches.map((coach) => (\n            <Grid item xs={12} sm={6} md={4} key={coach._id}>\n              <Card sx={{\n                bgcolor: '#1c1c1c',\n                color: 'white',\n                borderRadius: 4,\n                height: '100%',\n                display: 'flex',\n                flexDirection: 'column',\n                transition: 'transform 0.3s ease, box-shadow 0.3s ease',\n                '&:hover': {\n                  transform: 'translateY(-8px)',\n                  boxShadow: '0 12px 24px rgba(255, 215, 0, 0.2)'\n                }\n              }}>\n                <CardMedia\n                  component=\"img\"\n                  height=\"250\"\n                  image={coach.photoUrl || '/images/default-avatar.png'}\n                  alt={`${coach.firstName} ${coach.lastName}`}\n                />\n                <CardContent sx={{ flexGrow: 1 }}>\n                  <Typography variant=\"h5\" component=\"div\" fontWeight=\"bold\">\n                    {coach.firstName} {coach.lastName}\n                  </Typography>\n                  <Typography variant=\"body1\" sx={{ color: '#FFD700', mb: 2 }}>\n                    {coach.coachProfile?.title || 'Chess Master'}\n                  </Typography>\n                  <Stack spacing={1}>\n                    <Box sx={{ display: 'flex', alignItems: 'center', color: 'rgba(255,255,255,0.7)' }}>\n                      <WorkHistoryIcon fontSize=\"small\" sx={{ mr: 1 }} />\n                      <Typography variant=\"body2\">{coach.coachProfile?.experience || 'N/A'}</Typography>\n                    </Box>\n                    <Box sx={{ display: 'flex', alignItems: 'center', color: 'rgba(255,255,255,0.7)' }}>\n                      <AttachMoneyIcon fontSize=\"small\" sx={{ mr: 1 }} />\n                      <Typography variant=\"body2\">{coach.coachProfile?.price ? `${coach.coachProfile.price}$ / hour` : 'Contact for price'}</Typography>\n                    </Box>\n                  </Stack>\n                </CardContent>\n                <Box sx={{ p: 2, pt: 0 }}>\n                  <Button\n                    variant=\"contained\"\n                    fullWidth\n                    onClick={() => handleOpenDialog(coach)}\n                    sx={{ \n                      backgroundColor: '#FFD700', color: 'black', fontWeight: 'bold', borderRadius: '20px',\n                      '&:hover': { backgroundColor: '#FFC107' }\n                    }}\n                  >\n                    {t('coaches.viewProfile')}\n                  </Button>\n                </Box>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n\n        {/* --- DIALOG MODAL - KEY CHANGES BELOW --- */}\n        <Dialog open={isDialogOpen} onClose={handleCloseDialog} fullWidth maxWidth=\"md\" PaperProps={{\n          sx: { bgcolor: '#1c1c1c', color: 'white', borderRadius: 4, backgroundImage: 'none' }\n        }}>\n          {selectedCoach && ( // Ensure selectedCoach exists before rendering\n          <>\n            <DialogTitle sx={{ p: 3, pb: 1 }}>\n              <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\n                <Typography variant=\"h5\" fontWeight=\"bold\">\n                  {isEditMode ? t('coaches.editProfile') : t('coaches.profileOf', { coachName })}\n                </Typography>\n                <IconButton onClick={handleCloseDialog} sx={{ color: 'rgba(255,255,255,0.7)' }}>\n                  <CloseIcon />\n                </IconButton>\n              </Stack>\n            </DialogTitle>\n            <DialogContent>\n              {isEditMode ? (\n                <Stack spacing={2} sx={{ pt: 1 }}>\n                  {/* Edit form remains the same */}\n                </Stack>\n              ) : (\n                <>\n                  <Grid container spacing={4} sx={{ pt: 1 }}>\n                    <Grid item xs={12} md={4}>\n                      <Avatar src={selectedCoach.photoUrl || '/images/default-avatar.png'} sx={{ width: '100%', height: 'auto', aspectRatio: '1 / 1', borderRadius: 3 }} variant=\"rounded\" />\n                    </Grid>\n                    <Grid item xs={12} md={8}>\n                      <Stack spacing={2.5}>\n                        <Box>\n                          <Typography fontWeight=\"bold\" color=\"#FFD700\">{t('coaches.bio')}</Typography>\n                          <Typography sx={{ color: 'rgba(255,255,255,0.8)', whiteSpace: 'pre-wrap' }}>\n                            {selectedCoach.coachProfile?.bio || <span style={{ color: 'rgba(255,255,255,0.5)', fontStyle: 'italic' }}>No bio provided.</span>}\n                          </Typography>\n                        </Box>\n                        <Box>\n                          <Typography fontWeight=\"bold\" color=\"#FFD700\">{t('coaches.services')}</Typography>\n                          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1, mt: 1 }}>\n                            {selectedCoach.coachProfile?.services?.length ? selectedCoach.coachProfile.services.map(s => <Chip key={s} label={s} sx={{ bgcolor: 'rgba(255,255,255,0.2)', color: 'white' }}/>) : <Typography sx={{ color: 'rgba(255,255,255,0.5)', fontStyle: 'italic' }}>No services listed.</Typography>}\n                          </Box>\n                        </Box>\n                      </Stack>\n                    </Grid>\n                  </Grid>\n\n                  <Divider sx={{ my: 3, borderColor: 'rgba(255,255,255,0.2)' }} />\n                  \n                  <Box>\n                    {!showForm ? (\n                      <Button fullWidth variant=\"outlined\" onClick={() => setShowForm(true)} sx={{ color: '#FFD700', borderColor: '#FFD700', '&:hover': { borderColor: '#FFC107', bgcolor: 'rgba(255, 215, 0, 0.1)' }}}>\n                        {t('coaches.requestTitle', { coachName: selectedCoach.firstName })}\n                      </Button>\n                    ) : (\n                      <Paper elevation={0} sx={{ p: {xs: 2, sm: 3}, bgcolor: 'rgba(0,0,0,0.25)', borderRadius: 2 }}>\n                        <Typography variant=\"h6\" fontWeight=\"bold\" sx={{ mb: 2 }}>\n                          {t('coaches.requestTitle', { coachName })}\n                        </Typography>\n                        <Stack spacing={2}>\n                          <TextField fullWidth label={t('coaches.yourName')} value={formValues.userName} onChange={(e) => setFormValues({ ...formValues, userName: e.target.value })} variant=\"filled\" sx={formInputStyles} />\n                          <TextField fullWidth label={t('coaches.yourEmail')} value={formValues.userEmail} onChange={(e) => setFormValues({ ...formValues, userEmail: e.target.value })} variant=\"filled\" sx={formInputStyles} />\n                          <FormControl fullWidth variant=\"filled\" sx={formInputStyles}>\n                            <InputLabel id=\"level-select-label\">{t('coaches.level')}</InputLabel>\n                            <Select\n                              labelId=\"level-select-label\"\n                              value={formValues.experienceLevel}\n                              onChange={(e) => setFormValues({ ...formValues, experienceLevel: e.target.value })}\n                            >\n                              <MenuItem value=\"Beginner\">{t('coaches.levelBeginner')}</MenuItem>\n                              <MenuItem value=\"Intermediate\">{t('coaches.levelIntermediate')}</MenuItem>\n                              <MenuItem value=\"Advanced\">{t('coaches.levelAdvanced')}</MenuItem>\n                            </Select>\n                          </FormControl>\n                          <TextField fullWidth multiline rows={3} label={t('coaches.goals')} value={formValues.goals} onChange={(e) => setFormValues({ ...formValues, goals: e.target.value })} variant=\"filled\" sx={formInputStyles} />\n                        </Stack>\n                      </Paper>\n                    )}\n                  </Box>\n                </>\n              )}\n            </DialogContent>\n            <DialogActions sx={{ p: 3, pt: 2 }}>\n              {isEditMode ? (\n                <>\n                  <Button onClick={() => setIsEditMode(false)} sx={{ color: 'rgba(255,255,255,0.7)' }}>{t('coaches.cancel')}</Button>\n                  <Button variant=\"contained\" onClick={handleSaveEdit} startIcon={<EditIcon />} sx={{ bgcolor: '#FFD700', color: 'black', '&:hover': { bgcolor: '#FFC107' } }}>{t('coaches.save')}</Button>\n                </>\n              ) : showForm ? (\n                <>\n                  <Button variant=\"outlined\" onClick={() => setShowForm(false)} sx={{ color: 'rgba(255,255,255,0.7)', borderColor: 'rgba(255,255,255,0.3)' }}>\n                    {t('coaches.cancel')}\n                  </Button>\n                  <Button variant=\"contained\" onClick={handleSendRequest} disabled={isLoading} startIcon={<SendIcon />} sx={{ bgcolor: '#FFD700', color: 'black', '&:hover': { bgcolor: '#FFC107' } }}>\n                    {t('coaches.sendRequest')}\n                  </Button>\n                </>\n              ) : (\n                selectedCoach.email === currentUserEmail && (\n                  <Button variant=\"text\" onClick={() => setIsEditMode(true)} startIcon={<EditIcon />} sx={{ color: '#FFD700' }}>\n                    {t('coaches.editProfile')}\n                  </Button>\n                )\n              )}\n            </DialogActions>\n          </>\n          )}\n        </Dialog>\n      </Container>\n    </Box>\n  );\n};","import React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Container,\n  Grid,\n  Paper,\n  Typography,\n  Button,\n  List,\n  ListItemText,\n  ListItemButton,\n  CircularProgress,\n  Box,\n  TextField,\n  Divider,\n  Tabs,\n  Tab,\n  Link,\n} from '@mui/material';\nimport { notification } from 'antd';\nimport { useTranslation } from 'react-i18next';\n\nimport { fetchRequests, handleRequest } from '@/api/requests';\nimport { getHomeworksForReview, reviewHomework, getHomeworkScreenshot } from '@/api/homework';\n\ninterface Request {\n  _id: string;\n  student: { _id: string; firstName: string; lastName: string; email: string; };\n  experience?: string;\n  goals?: string;\n  createdAt: string;\n  status: 'pending' | 'approved' | 'rejected';\n}\n\ninterface Homework {\n  _id: string;\n  student: { _id: string; firstName: string; lastName: string; };\n  schedule: { title: string; };\n  text?: string;\n  hasScreenshot?: boolean;\n  submittedAt: string;\n  status: 'pending' | 'approved' | 'rejected';\n}\n\ntype InboxItem = Request | Homework;\ntype ViewType = 'requests' | 'homework';\n\nconst isRequest = (item: InboxItem): item is Request => 'createdAt' in item;\n\nexport const InboxPage: React.FC = () => {\n  const { t } = useTranslation();\n  const [view, setView] = useState<ViewType>('requests');\n  const [items, setItems] = useState<InboxItem[]>([]);\n  const [selectedItem, setSelectedItem] = useState<InboxItem | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [reviewComment, setReviewComment] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [screenshotUrl, setScreenshotUrl] = useState<string | null>(null);\n  const [isLoadingScreenshot, setIsLoadingScreenshot] = useState(false);\n\n  const fetchData = useCallback(async (currentView: ViewType) => {\n    setIsLoading(true);\n    setSelectedItem(null);\n    try {\n      const data = currentView === 'requests'\n        ? await fetchRequests()\n        : await getHomeworksForReview();\n      setItems(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error(`Error loading ${currentView}:`, error); // Console log for developers can remain in English\n      notification.error({\n        message: t('inbox.errors.loadFailed'),\n        description: undefined\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  }, [t]);\n\n  useEffect(() => {\n    fetchData(view);\n  }, [view, fetchData]);\n\n  useEffect(() => {\n    let objectUrl: string | null = null;\n  \n    const fetchScreenshot = async () => {\n      if (!selectedItem || isRequest(selectedItem) || !selectedItem.hasScreenshot) {\n        setScreenshotUrl(null);\n        return;\n      }\n      setIsLoadingScreenshot(true);\n      try {\n        const screenshotBlob = await getHomeworkScreenshot(selectedItem._id);\n        objectUrl = URL.createObjectURL(screenshotBlob);\n        setScreenshotUrl(objectUrl);\n      } catch (error) {\n        console.error(\"Screenshot load error:\", error);\n        notification.error({\n          message: t('inbox.errors.loadScreenshotFailed'),\n          description: undefined\n        });\n      } finally {\n        setIsLoadingScreenshot(false);\n      }\n    };\n  \n    fetchScreenshot();\n    setReviewComment('');\n  \n    return () => {\n      if (objectUrl) {\n        URL.revokeObjectURL(objectUrl);\n      }\n    };\n  }, [selectedItem, t]);\n  \n  const handleRequestAction = async (action: 'approved' | 'rejected') => {\n    if (!selectedItem || !isRequest(selectedItem)) return;\n    setIsSubmitting(true);\n    try {\n      await handleRequest(selectedItem._id, action);\n      notification.success({\n        message: t('inbox.success.requestHandled', {\n          action: t(action === 'approved' ? 'inbox.success.actions.approved' : 'inbox.success.actions.rejected')\n        }),\n        description: undefined\n      });\n      await fetchData('requests');\n    } catch (error) {\n      console.error('Error handling request:', error);\n      notification.error({\n        message: t('inbox.errors.handleRequestFailed'),\n        description: undefined\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleHomeworkAction = async (action: 'approved' | 'rejected') => {\n    if (!selectedItem || isRequest(selectedItem)) return;\n    setIsSubmitting(true);\n    try {\n      await reviewHomework(selectedItem._id, { status: action, comment: reviewComment });\n      notification.success({\n        message: t('inbox.success.homeworkReviewed'),\n        description: undefined\n      });\n      await fetchData('homework');\n    } catch (error) {\n      console.error('Error reviewing homework:', error);\n      notification.error({\n        message: t('inbox.errors.reviewHomeworkFailed'),\n        description: undefined\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const renderItemDetails = () => {\n    if (isLoading && !selectedItem) return null;\n    if (!selectedItem) {\n      return <Typography color=\"text.secondary\">{t('inbox.selectItemPrompt')}</Typography>;\n    }\n\n    if (isRequest(selectedItem)) {\n      return (\n        <>\n          <Typography variant=\"h6\">{selectedItem.student.firstName} {selectedItem.student.lastName}</Typography>\n          <Typography>{t('inbox.details.email')}: {selectedItem.student.email}</Typography>\n          <Typography>{t('inbox.details.sent')}: {new Date(selectedItem.createdAt).toLocaleString()}</Typography>\n          <Divider sx={{ my: 2 }} />\n          <Typography><strong>{t('inbox.details.experience')}:</strong> {selectedItem.experience || t('inbox.details.notSpecified')}</Typography>\n          <Typography><strong>{t('inbox.details.goals')}:</strong> {selectedItem.goals || t('inbox.details.notSpecified')}</Typography>\n          <Box mt={3} display=\"flex\" gap={2}>\n            <Button variant=\"contained\" color=\"primary\" onClick={() => handleRequestAction('approved')} disabled={isSubmitting || selectedItem.status !== 'pending'}>\n              {t('inbox.actions.approve')}\n            </Button>\n            <Button variant=\"contained\" color=\"secondary\" onClick={() => handleRequestAction('rejected')} disabled={isSubmitting || selectedItem.status !== 'pending'}>\n              {t('inbox.actions.reject')}\n            </Button>\n          </Box>\n        </>\n      );\n    } else {\n      return (\n        <>\n          <Typography variant=\"h5\" gutterBottom>{selectedItem.schedule?.title || t('inbox.list.untitled')}</Typography>\n          <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom>\n            {t('inbox.details.student')}: {selectedItem.student.firstName} {selectedItem.student.lastName}\n          </Typography>\n          <Divider sx={{ my: 2 }} />\n          {selectedItem.text && (\n            <Box mb={2}>\n              <Typography variant=\"h6\">{t('inbox.details.responseText')}:</Typography>\n              <Typography sx={{ whiteSpace: 'pre-wrap', p: 1, bgcolor: 'action.hover', borderRadius: 1 }}>{selectedItem.text}</Typography>\n            </Box>\n          )}\n          \n          {selectedItem.hasScreenshot && (\n            <Box mb={2}>\n              <Typography variant=\"h6\">{t('inbox.details.screenshot')}:</Typography>\n              {isLoadingScreenshot && <Box sx={{display: 'flex', alignItems: 'center', my: 2}}><CircularProgress size={24} sx={{mr: 2}} /> {t('inbox.loading')}</Box>}\n              {screenshotUrl && !isLoadingScreenshot && (\n                <Link href={screenshotUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <img \n                    src={screenshotUrl} \n                    alt={t('inbox.details.screenshotAlt')}\n                    style={{ maxWidth: '100%', height: 'auto', borderRadius: '8px', border: '1px solid #ddd', display: 'block', cursor: 'pointer' }} \n                  />\n                </Link>\n              )}\n            </Box>\n          )}\n          \n          <Divider sx={{ my: 2 }} />\n          <Typography variant=\"h6\">{t('inbox.details.feedback')}:</Typography>\n          <TextField \n            fullWidth \n            multiline \n            rows={4} \n            label={t('inbox.details.commentLabel')}\n            value={reviewComment} \n            onChange={(e) => setReviewComment(e.target.value)} \n            margin=\"normal\" \n            disabled={isSubmitting}\n          />\n          <Box mt={2} display=\"flex\" gap={2}>\n            <Button variant=\"contained\" color=\"success\" onClick={() => handleHomeworkAction('approved')} disabled={isSubmitting}>\n              {t('inbox.actions.approve')}\n            </Button>\n            <Button variant=\"contained\" color=\"error\" onClick={() => handleHomeworkAction('rejected')} disabled={isSubmitting}>\n              {t('inbox.actions.sendForRevision')}\n            </Button>\n          </Box>\n        </>\n      );\n    }\n  };\n\n  return (\n    <Container sx={{ py: 4 }}>\n      <Typography variant=\"h4\" gutterBottom>{t('inbox.title')}</Typography>\n\n      <Box sx={{ borderBottom: 1, borderColor: 'divider', mb: 2 }}>\n        <Tabs value={view} onChange={(_e, newValue) => setView(newValue)} aria-label=\"inbox tabs\">\n          <Tab label={t('inbox.tabs.requests')} value=\"requests\" />\n          <Tab label={t('inbox.tabs.homework')} value=\"homework\" />\n        </Tabs>\n      </Box>\n\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={4}>\n          <Paper style={{ maxHeight: '80vh', overflow: 'auto' }}>\n            {isLoading ? (\n                <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}><CircularProgress /></Box>\n            ) : (\n              <List component=\"nav\">\n                {items.length > 0 ? items.map((item) => (\n                  <ListItemButton key={item._id} selected={selectedItem?._id === item._id} onClick={() => setSelectedItem(item)}>\n                    <ListItemText\n                      primaryTypographyProps={{ style: { fontWeight: selectedItem?._id === item._id ? 'bold' : 'normal' } }}\nprimary={\n    item.student \n    ? `${item.student.firstName} ${item.student.lastName}`\n    : t('inbox.unknownStudent', 'Unknown Student')\n}                     \nsecondary={\n  isRequest(item) \n    ? t('inbox.list.requestSecondary', { date: new Date(item.createdAt).toLocaleDateString() }) \n    : t('inbox.list.homeworkSecondary', { title: item.schedule?.title || t('inbox.list.untitled', 'Без темы') })\n}\n                    />\n                  </ListItemButton>\n                )) : <Typography sx={{ p: 2, textAlign: 'center' }}>{t('inbox.empty')}</Typography>}\n              </List>\n            )}\n          </Paper>\n        </Grid>\n        <Grid item xs={12} md={8}>\n          <Paper style={{ padding: 24, minHeight: '50vh', display: 'flex', flexDirection: 'column' }}>\n            {renderItemDetails()}\n          </Paper>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};","// Файл: components/StudentSchedule/StudentsSchedule.tsx\n\nimport React, { useMemo } from 'react';\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport moment from 'moment';\nimport { Paper, Tooltip, Typography } from '@mui/material';\n\n// Иконки\nimport EventNoteIcon from '@mui/icons-material/EventNote';\nimport PeopleIcon from '@mui/icons-material/People';\nimport AssignmentIcon from '@mui/icons-material/Assignment';\nimport MenuBookIcon from '@mui/icons-material/MenuBook';\nimport EmojiEventsIcon from '@mui/icons-material/EmojiEvents';\n\n// Типы\nimport { ScheduleEvent } from '@/types/SheduleEvent';\n\n// Стили\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport './styles.scss';\n\n// --- НАСТРОЙКИ И УТИЛИТЫ ---\nconst localizer = momentLocalizer(moment);\n\nconst eventTypeIcons = {\n  individual_lesson: <EventNoteIcon fontSize=\"small\" />,\n  group_lesson: <PeopleIcon fontSize=\"small\" />,\n  homework: <AssignmentIcon fontSize=\"small\" />,\n  opening_study: <MenuBookIcon fontSize=\"small\" />,\n  tournament_participation: <EmojiEventsIcon fontSize=\"small\" />,\n};\n\n// --- КОМПОНЕНТЫ ДЛЯ КАЛЕНДАРЯ ---\n\n// Наш кастомный компонент для события в календаре\nconst CustomEvent: React.FC<{ event: ScheduleEvent & { start?: Date; end?: Date; } }> = ({ event }) => {\n  const icon = eventTypeIcons[event.type as keyof typeof eventTypeIcons];\n  const className = `custom-event rbc-event--${event.type}`;\n  return (\n    <Tooltip title={event.description || event.title} placement=\"top\">\n      <div className={className}>\n        {icon}\n        <Typography variant=\"caption\" noWrap component=\"span\">{event.title}</Typography>\n      </div>\n    </Tooltip>\n  );\n};\n\n// --- ОСНОВНОЙ КОМПОНЕНТ КАЛЕНДАРЯ ---\n\n// Определяем, какие пропсы будет принимать наш компонент\ninterface StudentScheduleProps {\n  events: ScheduleEvent[]; // Массив событий для отображения\n  onSelectEvent: (event: ScheduleEvent) => void; // Функция, которая вызовется при клике на событие\n}\n\nconst StudentSchedule: React.FC<StudentScheduleProps> = ({ events, onSelectEvent }) => {\n\n  // Преобразуем входящие события в формат, который понимает react-big-calendar\n  const calendarEvents = useMemo(() => {\n    return events.map(event => ({\n      ...event, // Копируем все поля из нашего оригинального события\n      start: new Date(event.date),\n      end: moment(event.date).add(1, 'hour').toDate(), // Длительность 1 час для примера\n    }));\n  }, [events]); // Этот хук будет перезапускаться только если изменится пропс events\n\n  return (\n    <Paper className=\"schedule-paper\" style={{ height: '70vh', padding: '16px' }}>\n        <Calendar\n          localizer={localizer}\n          events={calendarEvents} // <-- Используем преобразованные события\n          startAccessor=\"start\"\n          endAccessor=\"end\"\n          views={['month', 'week', 'day', 'agenda']}\n          components={{ event: CustomEvent as any }}\n          onSelectEvent={onSelectEvent} // <-- Привязываем обработчик клика\n          className=\"schedule-calendar-standalone\"\n        />\n    </Paper>\n  );\n};\n\nexport default StudentSchedule;","import React, { useEffect, useState, useMemo } from 'react';\nimport {\n  Container, Typography, Paper, Button, Dialog, DialogTitle,\n  DialogContent, DialogActions, TextField, CircularProgress, Box, Chip, Link as MuiLink,\n  ToggleButton, ToggleButtonGroup\n} from '@mui/material';\nimport moment from 'moment';\nimport { notification } from 'antd';\nimport { TFunction } from 'i18next';\nimport { useTranslation } from 'react-i18next';\n\n// Icons\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\nimport HourglassEmptyIcon from '@mui/icons-material/HourglassEmpty';\nimport HighlightOffIcon from '@mui/icons-material/HighlightOff';\nimport BackupIcon from '@mui/icons-material/Backup';\n\n// API & Types\nimport { getScheduleByStudent } from '@/api/schedule';\nimport { sendHomework } from '@/api/homework';\nimport { createNotification } from '@/api/notifications';\nimport { ScheduleEvent } from '@/types/SheduleEvent';\n\n// Импортируем готовый компонент календаря\nimport StudentSchedule from '@/components/StudentSchedule/StudentsSchedule';\n\n// Styles\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport './styles.scss';\n\n// --- КОНСТАНТЫ И УТИЛИТЫ ---\nconst MAX_FILE_SIZE_MB = 5;\n\nconst statusStyles = {\n  scheduled: { icon: <HourglassEmptyIcon fontSize=\"small\" />, color: 'info', labelKey: 'status.scheduled' },\n  pending: { icon: <HourglassEmptyIcon fontSize=\"small\" />, color: 'warning', labelKey: 'status.pending' },\n  completed: { icon: <CheckCircleOutlineIcon fontSize=\"small\" />, color: 'success', labelKey: 'status.completed' },\n  approved: { icon: <CheckCircleOutlineIcon fontSize=\"small\" />, color: 'success', labelKey: 'status.approved' },\n  rejected: { icon: <HighlightOffIcon fontSize=\"small\" />, color: 'error', labelKey: 'status.rejected' },\n};\nconst STATUS_KEYS = Object.keys(statusStyles);\n\n// --- === ДОЧЕРНИЕ КОМПОНЕНТЫ === ---\n\n// --- 1. Карточка События ---\nconst EventCard: React.FC<{ event: ScheduleEvent; onSelect: (event: ScheduleEvent) => void; t: TFunction; }> = ({ event, onSelect, t }) => {\n  const statusKey = event.status as keyof typeof statusStyles;\n  const style = statusStyles[statusKey] || statusStyles.scheduled;\n  return (\n    <Paper className={`event-card event-card--${style.color}`} onClick={() => onSelect(event)}>\n      <Box className=\"event-card__header\">\n        <Typography variant=\"h6\" className=\"event-card__title\">{event.title}</Typography>\n        <Chip icon={style.icon} label={t(style.labelKey)} color={style.color as any} size=\"small\"/>\n      </Box>\n      <Typography variant=\"body2\" className=\"event-card__date\">{moment(event.date).format('MMMM Do, YYYY [at] HH:mm')}</Typography>\n      {event.description && <Typography variant=\"body2\" className=\"event-card__description\">{event.description}</Typography>}\n    </Paper>\n  );\n};\n\n// --- 2. Список Событий ---\nconst EventList: React.FC<{ events: ScheduleEvent[]; onSelectEvent: (event: ScheduleEvent) => void; t: TFunction; }> = ({ events, onSelectEvent, t }) => (\n  <Box className=\"event-list\">\n    {events.length === 0 ? (\n      <Paper className=\"event-list__empty\"><Typography>{t('studentSchedule.noEventsForDay')}</Typography></Paper>\n    ) : (\n      events.map(event => <EventCard key={event._id} event={event} onSelect={onSelectEvent} t={t} />)\n    )}\n  </Box>\n);\n\n// --- 3. Панель Фильтров ---\nconst EventListControls: React.FC<{ statusFilters: string[]; onFilterChange: (filters: string[]) => void; t: TFunction; }> = ({ statusFilters, onFilterChange, t }) => {\n  const handleFilterChange = (_event: React.MouseEvent<HTMLElement>, newFilters: string[]) => onFilterChange(newFilters);\n  return (\n    <Paper className=\"event-controls\">\n        <Typography variant=\"button\" className=\"event-controls__label\">{t('common.filterByStatus')}:</Typography>\n        <ToggleButtonGroup value={statusFilters} onChange={handleFilterChange} size=\"small\">\n          {STATUS_KEYS.map(key => (<ToggleButton key={key} value={key} className=\"filter-toggle-button\">{t(statusStyles[key as keyof typeof statusStyles].labelKey)}</ToggleButton>))}\n        </ToggleButtonGroup>\n    </Paper>\n  );\n};\n\n// --- 4. Модальное окно ДЗ ---\nconst HomeworkDialog: React.FC<{\n  event: ScheduleEvent | null; open: boolean; onClose: () => void;\n  onSendHomework: (text: string, file: File | null) => Promise<void>; t: TFunction;\n}> = ({ event, open, onClose, onSendHomework, t }) => {\n  const [homeworkText, setHomeworkText] = useState('');\n  const [screenshot, setScreenshot] = useState<File | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (!open) {\n      setHomeworkText('');\n      setScreenshot(null);\n      setIsSubmitting(false);\n    }\n  }, [open]);\n\n  if (!event) return null;\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      if (file.size > MAX_FILE_SIZE_MB * 1024 * 1024) {\n        notification.error({\n          message: t('errors.fileTooLarge', { size: MAX_FILE_SIZE_MB }),\n          description: undefined\n        });\n        return;\n      }\n      setScreenshot(file);\n    }\n  };\n\n  const handleSendClick = async () => {\n    if (!homeworkText.trim() && !screenshot) {\n      notification.error({\n        message: t('errors.emptyHomework'),\n        description: undefined\n      });\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      await onSendHomework(homeworkText, screenshot);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const statusKey = event.status as keyof typeof statusStyles;\n  const style = statusStyles[statusKey] || statusStyles.scheduled;\n\n  return (\n    <Dialog open={open} onClose={onClose} fullWidth maxWidth=\"sm\" className=\"details-dialog\">\n      <DialogTitle className={`details-dialog__header details-dialog__header--${style.color}`}>{t('studentSchedule.eventDetails')}</DialogTitle>\n      <DialogContent className=\"details-dialog__content\">\n        <Box className=\"details-dialog__info\">\n          <Typography variant=\"h6\" className=\"details-dialog__title\">{event.title}</Typography>\n          <Chip icon={style.icon} label={t(style.labelKey)} color={style.color as any} size=\"small\"/>\n        </Box>\n        <Typography variant=\"body2\">{moment(event.date).format('dddd, MMMM Do, YYYY [at] HH:mm')}</Typography>\n        {event.description && <Typography variant=\"body1\" sx={{ mt: 2 }}>{event.description}</Typography>}\n        {event.link && <Typography variant=\"body2\" sx={{ mt: 1 }}>{t('studentSchedule.form_link')}: <MuiLink href={event.link} target=\"_blank\" rel=\"noopener noreferrer\">{event.link}</MuiLink></Typography>}\n        {event.type === 'homework' && (\n          <Box className=\"homework-form\">\n            <Typography variant=\"h6\" className=\"homework-form__title\">{t('studentSchedule.sendHomeworkTitle')}</Typography>\n            <TextField label={t('studentSchedule.form_description')} fullWidth multiline rows={4} value={homeworkText} onChange={(e) => setHomeworkText(e.target.value)} variant=\"filled\" disabled={isSubmitting} />\n            <Button variant=\"outlined\" component=\"label\" startIcon={<BackupIcon />} disabled={isSubmitting}>\n              {screenshot ? screenshot.name : t('studentSchedule.uploadScreenshot')}\n              <input type=\"file\" hidden accept=\"image/*\" onChange={handleFileUpload} />\n            </Button>\n          </Box>\n        )}\n      </DialogContent>\n      <DialogActions className=\"details-dialog__actions\">\n        <Button onClick={onClose} disabled={isSubmitting}>{t('common.close')}</Button>\n        {event.type === 'homework' && <Button onClick={handleSendClick} variant=\"contained\" color=\"primary\" disabled={isSubmitting}>{t('studentSchedule.send')}</Button>}\n      </DialogActions>\n    </Dialog>\n  );\n};\n\n// --- === ГЛАВНЫЙ КОМПОНЕНТ СТРАНИЦЫ === ---\nconst StudentSchedulePage: React.FC = () => {\n  const { t } = useTranslation();\n  const [allEvents, setAllEvents] = useState<ScheduleEvent[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedEventForDialog, setSelectedEventForDialog] = useState<ScheduleEvent | null>(null);\n  const [statusFilters, setStatusFilters] = useState<string[]>([]);\n\n  // Переносим логику получения ID и загрузку данных в один useEffect.\n  useEffect(() => {\n    const fetchScheduleForStudent = async () => {\n      const userStr = localStorage.getItem('user');\n      let studentId = null;\n      try {\n        if (userStr && userStr !== 'undefined' && userStr !== 'null') {\n            studentId = JSON.parse(userStr)._id;\n        }\n      } catch (error) {\n        console.error(\"Ошибка парсинга пользователя из localStorage:\", error);\n      }\n      \n      if (!studentId) {\n        setLoading(false);\n        notification.error({\n          message: t('errors.userNotFound'),\n          description: undefined\n        });\n        return;\n      }\n      \n      setLoading(true);\n      try {\n        const scheduleData = await getScheduleByStudent(studentId);\n        setAllEvents(scheduleData);\n      } catch (error) {\n        console.error('Ошибка при загрузке расписания:', error);\n        notification.error({\n          message: t('errors.fetchSchedule'),\n          description: undefined\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchScheduleForStudent();\n  }, [t]); // Зависимость от 't' нужна для доступа к переводам в notification.\n\n  const handleOpenDialog = (event: ScheduleEvent) => setSelectedEventForDialog(event);\n  const handleCloseDialog = () => setSelectedEventForDialog(null);\n  \n  const handleSendHomework = async (homeworkText: string, screenshot: File | null) => {\n    // Получаем ID студента снова, чтобы не хранить его в состоянии\n    const userStr = localStorage.getItem('user');\n    const studentId = userStr ? JSON.parse(userStr)._id : null;\n    if (!studentId || !selectedEventForDialog) return;\n\n    try {\n      await sendHomework({\n        studentId,\n        scheduleId: selectedEventForDialog._id,\n        homeworkText: homeworkText.trim() ? homeworkText : undefined,\n        screenshot: screenshot || undefined,\n      });\n\n      if (selectedEventForDialog.coach) {\n        await createNotification({\n            recipient: selectedEventForDialog.coach,\n            type: 'homework_submission',\n            content: `Ученик отправил домашнее задание по теме: \"${selectedEventForDialog.title}\"`,\n            metadata: { scheduleId: selectedEventForDialog._id },\n        });\n      }\n      notification.success({\n        message: t('studentSchedule.homeworkSentSuccess'),\n        description: undefined\n      });\n      handleCloseDialog();\n      // Чтобы не делать еще один запрос к API, можно обновить состояние локально.\n      // Это быстрее для пользователя.\n      setAllEvents(prevEvents => \n        prevEvents.map(event => \n          event._id === selectedEventForDialog._id ? { ...event, status: 'pending' } : event\n        )\n      );\n    } catch (error) {\n      console.error('Ошибка при отправке ДЗ:', error);\n      notification.error({\n        message: t('errors.sendHomework'),\n        description: undefined\n      });\n    }\n  };\n\n  const filteredEvents = useMemo(() => {\n    let events = [...allEvents];\n    if (statusFilters.length > 0) {\n      events = events.filter(event => statusFilters.includes(event.status));\n    }\n    return events.sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\n  }, [allEvents, statusFilters]);\n\n  return (\n    <Box className=\"student-schedule-v2-page\">\n      <Container maxWidth=\"lg\">\n        <Typography variant=\"h4\" component=\"h1\" className=\"page-title\">{t('studentSchedule.myScheduleTitle')}</Typography>\n\n        {/* Передаем отфильтрованные данные и обработчик в дочерний компонент календаря */}\n        <StudentSchedule \n          events={filteredEvents} \n          onSelectEvent={handleOpenDialog} \n        />\n\n        <Box className=\"list-controls-container\">\n            <Typography variant=\"h5\" component=\"h2\">{t('studentSchedule.eventListTitle')}</Typography>\n            <EventListControls \n                statusFilters={statusFilters}\n                onFilterChange={setStatusFilters}\n                t={t}\n            />\n        </Box>\n        \n        {loading ? ( <Box className=\"loader-container\"><CircularProgress className=\"loader\" /></Box> ) \n                 : ( <EventList events={filteredEvents} onSelectEvent={handleOpenDialog} t={t} /> )}\n      </Container>\n      \n      <HomeworkDialog\n        event={selectedEventForDialog} open={!!selectedEventForDialog}\n        onClose={handleCloseDialog} onSendHomework={handleSendHomework}\n        t={t}\n      />\n    </Box>\n  );\n};\n\nexport default StudentSchedulePage;","import React, { useContext } from 'react';\nimport { Navigate, Outlet } from 'react-router-dom';\nimport { CircularProgress, Box } from '@mui/material';\nimport { AuthContext } from '@/context/AuthContext';\n\nconst GuestRoute: React.FC = () => {\n  const auth = useContext(AuthContext);\n  if (!auth) throw new Error(\"GuestRoute must be used within an AuthProvider\");\n\n  const { isAuthenticated, user, loading } = auth;\n\n  if (loading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (isAuthenticated && user) {\n    return <Navigate to={`/profile/${user._id}`} replace />;\n  }\n\n  return <Outlet />;\n};\n\nexport default GuestRoute;","import { Routes, Route, useLocation } from 'react-router-dom';\nimport { Suspense } from 'react';\nimport { AuthPage } from '@/pages/auth-page';\nimport { Navbar } from '@/components/Navbar/Navbar';\nimport { Home } from '@/pages/home-page/home-page';\nimport { About } from '@/pages/about-page/about-page';\nimport { Achievements } from '@/pages/achievements-page/achievements-page';\nimport PrivateRoute from '@/components/PrivateRoute/PrivateRoute';\nimport { ProfilePage } from '@/pages/profile-page/profile-page';\nimport { UsersPage } from '@/pages/users-page/users-page';\nimport { StudentsPage } from '@/pages/students-page/students-page';\nimport { AnalysisPage } from '@/features/Chess/pages/AnalysisPage';\n// import AnalysisPage from '@/pages/analisys-page/analisys-page';\n// import ChallengesPage from '@/pages/challenges-page/challenges-page';\nimport PuzzleEditor from './components/PuzzleEditor/PuzzleEditor';\nimport { VerifyEmailPage } from './pages/verify-email-page/verify-email-page';\nimport { CoachesPage } from './pages/coaches-page/coaches-page';\nimport { InboxPage } from './pages/inbox-page/inbox-page';\n// import { Footer } from './components/Footer/Footer';\nimport StudentSchedulePage from './pages/students-shedule-page/students-shedule-page';\nimport { CssBaseline } from '@mui/material';\nimport GuestRoute from './components/GuestRoute/GuestRoute';\n\nfunction MainLayout() {\n  const location = useLocation();\n  const authPaths = ['/login', '/register'];\n  const hideNavbar = authPaths.includes(location.pathname);\n\n  return (\n    <>\n    <CssBaseline /> \n      {!hideNavbar && <Navbar />}\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path=\"/about\" element={<About />} />\n        <Route path=\"/achievements\" element={<Achievements />} />\n        <Route element={<GuestRoute />}>\n          <Route path=\"/login\" element={<AuthPage />} />\n          <Route path=\"/register\" element={<AuthPage />} />\n        </Route>\n        {/* <Route path=\"/chess\" element={<ChessGame></ChessGame>} /> */}\n        <Route path=\"/analysis\" element={<AnalysisPage />} />\n        {/* <Route path=\"/chess\" element={<ChessProvider><GamePage /></ChessProvider>} /> */}\n        {/* <Route path=\"/challenges\" element={<ChallengesPage/>}/> */}\n        <Route path=\"/verify-email\" element={<VerifyEmailPage />} />\n        <Route path=\"/coaches\" element={<CoachesPage />} />\n\n        <Route element={<PrivateRoute />}>\n          <Route path=\"/editor\" element={<PuzzleEditor />} />\n          <Route path=\"/profile\" element={<ProfilePage />} />\n          <Route \n            path=\"/profile/:userId\" \n            element={<ProfilePage />} \n            key={location.pathname}\n          /> \n          <Route path=\"/users\" element={<UsersPage />} />\n          <Route path=\"/students-shedule\" element={<StudentSchedulePage />} />\n          <Route path=\"/students\" element={<StudentsPage />} />\n          <Route path=\"/puzzle-editor\" element={<PuzzleEditor />} />\n          <Route path=\"/inbox\" element={<InboxPage />} />\n        </Route>\n      </Routes>\n      {/* {!hideNavbar && <Footer />} */}\n    </>\n  );\n}\n\nfunction App() {\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <MainLayout />\n    </Suspense>\n  );\n}\n\nexport default App;\n","import { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom'; \n// import { ThemeProvider } from '@/shared/theme/ThemeProvider';\nimport { AuthProvider } from '@/context/AuthContext.tsx';\nimport '@/styles'; \nimport './index.css';\nimport './i18n'; \nimport App from './App.tsx';\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) throw new Error('Failed to find the root element');\nconst root = createRoot(rootElement);\n\nroot.render(\n  <StrictMode>\n    <BrowserRouter> \n      {/* <ThemeProvider>  */}\n        <AuthProvider>\n          <App />\n        </AuthProvider>\n      {/* </ThemeProvider> */}\n    </BrowserRouter>\n  </StrictMode>\n);"],"names":["i18n","HttpBackend","initReactI18next","API_URL","axiosInstance","axios","reduceMessage","arr","acc","item","getIssueMessage","error","description","notification","config","token","language","response","_a","_c","_b","_d","data","_e","message","key","getProfile","updateProfile","formData","value","getAvatarUrl","userId","baseURL","getUserProfileById","AuthContext","createContext","AuthProvider","children","isAuthenticated","setIsAuthenticated","useState","user","setUser","loading","setLoading","logout","useCallback","useEffect","profile","userData","jsx","loginUser","credentials","registerUser","nameValidation","t","_","loginValidation","passwordValidation","AuthForm","mode","useTranslation","navigate","useNavigate","auth","useContext","authLogin","isLoginMode","handleLogin","values","handleRegister","registeredEmail","jsxs","FaChessKing","Typography","Form","Fragment","Input","Button","AuthPage","useLocation","LanguageSwitcher","className","handleChange","event","selectedLanguage","Select","MenuItem","createNotification","getNotifications","markAsRead","notificationId","deleteNotification","Notifications","navigateToRequests","notifications","setNotifications","anchorEl","setAnchorEl","open","unreadCount","n","fetchNotifications","interval","handleMenuOpen","handleMenuClose","handleDeleteNotification","prev","handleNotificationClick","handleViewAllClick","IconButton","Badge","NotificationsIcon","Menu","Box","ListItemText","ListItemSecondaryAction","MuiIconButton","DeleteIcon","Divider","Navbar","isDrawerOpen","setIsDrawerOpen","AppBar","Toolbar","CircularProgress","isAdmin","isCoach","isStudent","handleLogout","handleGetStarted","toggleDrawer","handleMenuClick","path","MenuIcon","Drawer","CloseOutlined","List","ListItemButton","ListItemIcon","HomeOutlined","InfoCircleOutlined","TrophyOutlined","TeamOutlined","PlayCircleOutlined","UserOutlined","LogoutOutlined","RocketOutlined","getCoaches","getCoachById","coachId","getCoachesByEmail","emails","getStudentDetails","coachEmail","studentId","getStudentIdsByCoach","removeStudentFromCoach","CoachesBlock","coaches","setCoaches","Grid","coach","Card","CardMedia","CardContent","i","StarIcon","Home","currentYear","whyChessItems","howItWorksSteps","formatItems","SchoolIcon","GroupIcon","Container","icon","descKey","Paper","num","titleKey","type","buttonKey","About","phrases","useMemo","testimonials","whyUsCards","missionPoints","currentPhraseIndex","setCurrentPhraseIndex","currentTestimonialIndex","setCurrentTestimonialIndex","phraseInterval","testimonialInterval","SwitchTransition","CSSTransition","Stack","TrackChangesIcon","point","CheckCircleOutlineIcon","card","idx","Achievements","PrivateRoute","Outlet","Navigate","getScheduleByStudent","createScheduleEvent","payload","updateScheduleEvent","eventId","deleteScheduleEvent","sendHomework","reviewHomework","homeworkId","getHomeworksForReview","getHomeworkScreenshot","statusStyles","HourglassEmptyIcon","HighlightOffIcon","EventCard","variant","onSelect","statusKey","style","paperStyles","Chip","EditProfileForm","onClose","firstName","setFirstName","lastName","setLastName","email","setEmail","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","selectedFile","setSelectedFile","avatarPreview","setAvatarPreview","handleFileChange","e","file","handleSubmit","Dialog","DialogTitle","DialogContent","Avatar","TextField","Link","DialogActions","ROLE_PRIORITY","getPrimaryRole","roles","a","b","ProfileHeader","avatarUrl","isMyProfile","onEdit","onLogout","primaryRole","otherRoles","role","roleChipColor","Tooltip","MuiLink","RouterLink","EditIcon","LogoutIcon","SendIcon","LessonsList","schedule","isLoading","onEventSelect","Skeleton","upcomingEvents","pastEvents","now","upcoming","past","NextLessonWidget","nextEvent","ArrowForwardIcon","HourglassEmpty","MAX_FILE_SIZE_MB","HomeworkDialog","onSendHomework","homeworkText","setHomeworkText","screenshot","setScreenshot","isSubmitting","setIsSubmitting","handleFileUpload","handleSendClick","moment","BackupIcon","TabPanel","props","index","other","ProfilePage","useParams","loggedInUser","authLoading","refetchUser","profileUser","setProfileUser","setCoach","setSchedule","setError","isEditing","setIsEditing","activeTab","setActiveTab","selectedEvent","setSelectedEvent","err","r","handleTabChange","newValue","handleSendHomework","Tabs","Tab","CustomTable","columns","search","setSearch","rowsPerPage","setRowsPerPage","page","setPage","handleSearch","handleChangePage","_event","newPage","handleChangeRowsPerPage","filteredData","row","column","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","TablePagination","UsersPage","users","setUsers","selectedUser","setSelectedUser","newRole","setNewRole","actionType","setActionType","setOpen","confirmDeleteOpen","setConfirmDeleteOpen","snackbar","setSnackbar","mappedUsers","handleOpen","handleClose","handleConfirmDeleteOpen","handleConfirmDeleteClose","handleRoleChange","handleDeleteUser","Edit","Delete","DialogContentText","FormControl","InputLabel","Snackbar","Alert","localizer","momentLocalizer","eventTypeIcons","EventNoteIcon","PeopleIcon","AssignmentIcon","MenuBookIcon","EmojiEventsIcon","eventTypes","CustomEvent","eventType","EditScheduleModal","student","events","setEvents","selectedDate","setSelectedDate","studentName","resetForm","fetchSchedule","studentSchedule","handleSaveEvent","date","title","isUpdating","handleDeleteEvent","handleSelectSlot","start","handleSelectEvent","calendarEvents","dayPropGetter","handleFormInputChange","name","handleTypeChange","CloseIcon","Calendar","SaveIcon","AddCircleOutlineIcon","StudentsPage","students","setStudents","selectedStudent","setSelectedStudent","openModal","setOpenModal","setIsLoading","userStr","fetchStudents","studentIds","studentDetailsPromises","id","studentDetails","handleRemoveStudent","prevStudents","s","handleEditSchedule","ChessGameEngine","fen","__publicField","Chess","square","source","target","move","pgn","moveIndex","tempGame","uci","useChessGame","initialFen","engine","setFen","history","setHistory","currentMoveIndex","setCurrentMoveIndex","selectedSquare","setSelectedSquare","moveOptions","setMoveOptions","fenRef","useRef","updateGameState","newHistory","clearHighlights","handleMove","sourceSquare","targetSquare","onSquareClick","moves","newOptions","resetGame","loadPgn","success","goToMove","ChessBoard","onPieceDrop","squareStyles","Chessboard","getEvaluationSymbol","evaluation","evalAbs","getSymbolColor","MoveHistory","onMoveClick","movePairs","React","pairs","pair","whiteMoveIndex","blackMoveIndex","AnalysisPanel","depth","principalVariation","isAnalyzing","isEngineOn","onToggleEngine","FormControlLabel","Switch","AnalysisPage","actions","annotatedHistory","setAnnotatedHistory","inputPgn","setInputPgn","engineWorker","setEngineWorker","isLiveAnalyzing","setIsLiveAnalyzing","liveEvaluation","setLiveEvaluation","liveDepth","setLiveDepth","livePV","setLivePV","setIsEngineOn","san","resetAnalysisData","handleLoadPgn","handleResetGame","handleGoToMove","liveAnalyzePosition","handleToggleEngine","formatUCIToSAN","uciLine","startFen","sanLine","moveResult","worker","depthMatch","scoreMatch","pvMatch","turn","evalString","formattedPV","SkipPreviousIcon","ArrowLeftIcon","ArrowRightIcon","SkipNextIcon","ReplayIcon","UploadFileIcon","position","onMove","boardWidth","PuzzleEditor","defaultFen","isCursorOnBoard","setIsCursorOnBoard","chess","instance","draggedPiece","setDraggedPiece","cursorStyle","setCursorStyle","pieces","boardRef","handleMouseMove","rect","x","y","updateCastlingRights","_rights","checked","flag","parts","castling","updatedFen","handleSquareClick","rank","existingPiece","clearBoard","setInitialPosition","removeDraggedPiece","savePosition","char","piece","FormGroup","Checkbox","RadioGroup","newFen","Radio","checkVerificationStatus","resendVerificationEmail","VerifyEmailPage","location","isPolling","setIsPolling","successMessage","setSuccessMessage","errorMessage","setErrorMessage","resendDisabled","setResendDisabled","intervalIdRef","emailVerified","handleResendEmail","fetchRequests","handleRequest","requestId","status","createRequest","experience","goals","formInputStyles","CoachesPage","selectedCoach","setSelectedCoach","filter","setFilter","isDialogOpen","setIsDialogOpen","showForm","setShowForm","isEditMode","setIsEditMode","currentUserEmail","formValues","setFormValues","editProfile","setEditProfile","handleOpenDialog","_f","handleCloseDialog","handleSendRequest","handleSaveEdit","filteredCoaches","c","coachName","InputAdornment","SearchIcon","WorkHistoryIcon","AttachMoneyIcon","isRequest","InboxPage","view","setView","items","setItems","selectedItem","setSelectedItem","reviewComment","setReviewComment","screenshotUrl","setScreenshotUrl","isLoadingScreenshot","setIsLoadingScreenshot","fetchData","currentView","objectUrl","screenshotBlob","handleRequestAction","action","handleHomeworkAction","renderItemDetails","StudentSchedule","onSelectEvent","STATUS_KEYS","EventList","EventListControls","statusFilters","onFilterChange","handleFilterChange","newFilters","ToggleButtonGroup","ToggleButton","StudentSchedulePage","allEvents","setAllEvents","selectedEventForDialog","setSelectedEventForDialog","setStatusFilters","scheduleData","prevEvents","filteredEvents","GuestRoute","MainLayout","hideNavbar","CssBaseline","Routes","Route","App","Suspense","rootElement","root","createRoot","StrictMode","BrowserRouter"],"mappings":"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"}