{"version":3,"file":"uncontrollable-CbeKjXrC.js","sources":["../../node_modules/uncontrollable/lib/esm/utils.js","../../node_modules/uncontrollable/lib/esm/uncontrollable.js"],"sourcesContent":["import invariant from 'invariant';\n\nvar noop = function noop() {};\n\nfunction readOnlyPropType(handler, name) {\n  return function (props, propName) {\n    if (props[propName] !== undefined) {\n      if (!props[handler]) {\n        return new Error(\"You have provided a `\" + propName + \"` prop to `\" + name + \"` \" + (\"without an `\" + handler + \"` handler prop. This will render a read-only field. \") + (\"If the field should be mutable use `\" + defaultKey(propName) + \"`. \") + (\"Otherwise, set `\" + handler + \"`.\"));\n      }\n    }\n  };\n}\n\nexport function uncontrolledPropTypes(controlledValues, displayName) {\n  var propTypes = {};\n  Object.keys(controlledValues).forEach(function (prop) {\n    // add default propTypes for folks that use runtime checks\n    propTypes[defaultKey(prop)] = noop;\n\n    if (process.env.NODE_ENV !== 'production') {\n      var handler = controlledValues[prop];\n      !(typeof handler === 'string' && handler.trim().length) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Uncontrollable - [%s]: the prop `%s` needs a valid handler key name in order to make it uncontrollable', displayName, prop) : invariant(false) : void 0;\n      propTypes[prop] = readOnlyPropType(handler, displayName);\n    }\n  });\n  return propTypes;\n}\nexport function isProp(props, prop) {\n  return props[prop] !== undefined;\n}\nexport function defaultKey(key) {\n  return 'default' + key.charAt(0).toUpperCase() + key.substr(1);\n}\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nexport function canAcceptRef(component) {\n  return !!component && (typeof component !== 'function' || component.prototype && component.prototype.isReactComponent);\n}","import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nvar _jsxFileName = \"/Users/jquense/src/uncontrollable/src/uncontrollable.js\";\nimport React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport invariant from 'invariant';\nimport * as Utils from './utils';\nexport default function uncontrollable(Component, controlledValues, methods) {\n  if (methods === void 0) {\n    methods = [];\n  }\n\n  var displayName = Component.displayName || Component.name || 'Component';\n  var canAcceptRef = Utils.canAcceptRef(Component);\n  var controlledProps = Object.keys(controlledValues);\n  var PROPS_TO_OMIT = controlledProps.map(Utils.defaultKey);\n  !(canAcceptRef || !methods.length) ? process.env.NODE_ENV !== \"production\" ? invariant(false, '[uncontrollable] stateless function components cannot pass through methods ' + 'because they have no associated instances. Check component: ' + displayName + ', ' + 'attempting to pass through methods: ' + methods.join(', ')) : invariant(false) : void 0;\n\n  var UncontrolledComponent =\n  /*#__PURE__*/\n  function (_React$Component) {\n    _inheritsLoose(UncontrolledComponent, _React$Component);\n\n    function UncontrolledComponent() {\n      var _this;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n      _this.handlers = Object.create(null);\n      controlledProps.forEach(function (propName) {\n        var handlerName = controlledValues[propName];\n\n        var handleChange = function handleChange(value) {\n          if (_this.props[handlerName]) {\n            var _this$props;\n\n            _this._notifying = true;\n\n            for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n\n            (_this$props = _this.props)[handlerName].apply(_this$props, [value].concat(args));\n\n            _this._notifying = false;\n          }\n\n          if (!_this.unmounted) _this.setState(function (_ref) {\n            var _extends2;\n\n            var values = _ref.values;\n            return {\n              values: _extends(Object.create(null), values, (_extends2 = {}, _extends2[propName] = value, _extends2))\n            };\n          });\n        };\n\n        _this.handlers[handlerName] = handleChange;\n      });\n      if (methods.length) _this.attachRef = function (ref) {\n        _this.inner = ref;\n      };\n      var values = Object.create(null);\n      controlledProps.forEach(function (key) {\n        values[key] = _this.props[Utils.defaultKey(key)];\n      });\n      _this.state = {\n        values: values,\n        prevProps: {}\n      };\n      return _this;\n    }\n\n    var _proto = UncontrolledComponent.prototype;\n\n    _proto.shouldComponentUpdate = function shouldComponentUpdate() {\n      //let setState trigger the update\n      return !this._notifying;\n    };\n\n    UncontrolledComponent.getDerivedStateFromProps = function getDerivedStateFromProps(props, _ref2) {\n      var values = _ref2.values,\n          prevProps = _ref2.prevProps;\n      var nextState = {\n        values: _extends(Object.create(null), values),\n        prevProps: {}\n      };\n      controlledProps.forEach(function (key) {\n        /**\n         * If a prop switches from controlled to Uncontrolled\n         * reset its value to the defaultValue\n         */\n        nextState.prevProps[key] = props[key];\n\n        if (!Utils.isProp(props, key) && Utils.isProp(prevProps, key)) {\n          nextState.values[key] = props[Utils.defaultKey(key)];\n        }\n      });\n      return nextState;\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.unmounted = true;\n    };\n\n    _proto.render = function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          innerRef = _this$props2.innerRef,\n          props = _objectWithoutPropertiesLoose(_this$props2, [\"innerRef\"]);\n\n      PROPS_TO_OMIT.forEach(function (prop) {\n        delete props[prop];\n      });\n      var newProps = {};\n      controlledProps.forEach(function (propName) {\n        var propValue = _this2.props[propName];\n        newProps[propName] = propValue !== undefined ? propValue : _this2.state.values[propName];\n      });\n      return React.createElement(Component, _extends({}, props, newProps, this.handlers, {\n        ref: innerRef || this.attachRef\n      }));\n    };\n\n    return UncontrolledComponent;\n  }(React.Component);\n\n  polyfill(UncontrolledComponent);\n  UncontrolledComponent.displayName = \"Uncontrolled(\" + displayName + \")\";\n  UncontrolledComponent.propTypes = _extends({\n    innerRef: function innerRef() {}\n  }, Utils.uncontrolledPropTypes(controlledValues, displayName));\n  methods.forEach(function (method) {\n    UncontrolledComponent.prototype[method] = function $proxiedMethod() {\n      var _this$inner;\n\n      return (_this$inner = this.inner)[method].apply(_this$inner, arguments);\n    };\n  });\n  var WrappedComponent = UncontrolledComponent;\n\n  if (React.forwardRef) {\n    WrappedComponent = React.forwardRef(function (props, ref) {\n      return React.createElement(UncontrolledComponent, _extends({}, props, {\n        innerRef: ref,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }));\n    });\n    WrappedComponent.propTypes = UncontrolledComponent.propTypes;\n  }\n\n  WrappedComponent.ControlledComponent = Component;\n  /**\n   * useful when wrapping a Component and you want to control\n   * everything\n   */\n\n  WrappedComponent.deferControlTo = function (newComponent, additions, nextMethods) {\n    if (additions === void 0) {\n      additions = {};\n    }\n\n    return uncontrollable(newComponent, _extends({}, controlledValues, additions), nextMethods);\n  };\n\n  return WrappedComponent;\n}"],"names":["noop","uncontrolledPropTypes","controlledValues","displayName","propTypes","prop","defaultKey","isProp","props","key","canAcceptRef","component","_jsxFileName","uncontrollable","Component","methods","Utils.canAcceptRef","controlledProps","PROPS_TO_OMIT","Utils.defaultKey","invariant","UncontrolledComponent","_React$Component","_inheritsLoose","_this","_len","args","_key","propName","handlerName","handleChange","value","_this$props","_len2","_key2","_ref","_extends2","values","_extends","ref","_proto","_ref2","prevProps","nextState","Utils.isProp","_this2","_this$props2","innerRef","_objectWithoutPropertiesLoose","newProps","propValue","React","polyfill","Utils.uncontrolledPropTypes","method","_this$inner","WrappedComponent","newComponent","additions","nextMethods"],"mappings":"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","x_google_ignoreList":[0,1]}