var zs=Object.defineProperty;var $s=(s,t,r)=>t in s?zs(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var De=(s,t,r)=>$s(s,typeof t!="symbol"?t+"":t,r);import{r as i,j as e,a as Oe}from"./react-CvHEjaVo.js";import{c as Bs}from"./react-dom-D1dbQIcV.js";import{a as Hs}from"./axios-DGDcxXwr.js";import{i as hs}from"./i18next-D9VJDghF.js";import{B as Os}from"./i18next-http-backend-BfZSjpC0.js";import{i as qs,u as $}from"./react-i18next-CkKBCMHl.js";import{s as _,T as qe,F as me,I as Ce,B as Us}from"./antd-vw_2xf0X.js";import{F as Ys}from"./react-icons-C3dNpHPf.js";import{u as he,a as Me,O as us,N as ms,L as xs,b as Ks,R as Gs,c as z,B as Vs}from"./react-router-Dl3PYC8W.js";import{S as Fe,M as V,I as G,B as Js,N as Xs,a as Qs,b as f,T as l,L as Y,c as Zs,D as We,d as J,A as Ue,e as Ye,C as te,f as C,g as et,h as st,i as gs,j as ee,k as se,G as E,l as ps,m as fs,n as js,o as tt,p as B,P as M,q as rt,r as nt,s as W,t as ot,u as ae,v as je,H as pe,w as Te,x as ie,y as le,z as ce,E as Le,F as L,J as Se,K as de,O as ze,Q as _e,R as at,U as bs,V as Pe,W as it,X as vs,Y as ys,Z as ye,_ as lt,$ as Ss,a0 as ws,a1 as xe,a2 as U,a3 as Cs,a4 as ct,a5 as Ke,a6 as $e,a7 as Be,a8 as dt,a9 as ht,aa as ks,ab as ut,ac as mt,ad as Is,ae as Ns,af as Ps,ag as _s,ah as Fs,ai as oe,aj as xt,ak as gt,al as pt,am as ft,an as jt,ao as bt,ap as vt,aq as yt,ar as ke,as as St,at as Ge,au as wt,av as Ct,aw as kt,ax as It,ay as Nt,az as Pt,aA as _t}from"./@mui-D847rJGD.js";import{f as Ft,x as Et,y as Dt,z as At,A as Ie,B as Rt,C as Mt,D as Wt,E as Tt}from"./@ant-design-Bks4O0NN.js";import{S as Ve,C as Je}from"./react-transition-group-CwyNQDxX.js";import{h as K}from"./moment-C5S46NFB.js";import{m as Es,C as Ds}from"./react-big-calendar-D6ss7NAI.js";import{C as ge}from"./chess.js-D61LfqgS.js";import{C as As}from"./react-chessboard-D79mwW4A.js";import"./classnames-D3cBJY9G.js";import"./scheduler-CKyTKYc2.js";import"./rc-util-SZQLh1vV.js";import"./@babel-DlrNZQSW.js";import"./rc-resize-observer-MNGAtJ6Y.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-csAWsXJs.js";import"./@rc-component-COpoWvuY.js";import"./dayjs-QiaqYO4y.js";import"./rc-input-Byq_4lnI.js";import"./rc-field-form-Zk3m5T-Z.js";import"./scroll-into-view-if-needed-BZeNfFF0.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./rc-notification-DFa78zIu.js";import"./rc-pagination-DP2MtHOE.js";import"./rc-picker-CirFycse.js";import"./rc-tooltip-CR8cfE2b.js";import"./rc-textarea-CTz5dyJK.js";import"./copy-to-clipboard-CfLLryBf.js";import"./toggle-selection-DGa8lynz.js";import"./cookie--_YQFYBD.js";import"./clsx-B-dksMZM.js";import"./@emotion-M6yQISDD.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./stylis-YPZU7XtI.js";import"./@popperjs-B2yVk2E7.js";import"./dom-helpers-CYz2yaWn.js";import"./invariant-CtPH8gXt.js";import"./uncontrollable-BvgrQciZ.js";import"./react-lifecycles-compat-AfN2QaV3.js";import"./prop-types-C2eHv_HJ.js";import"./date-arithmetic-DrY26MJF.js";import"./lodash-CuwxRx_k.js";import"./react-overlays-pU_wA3Zj.js";import"./@restart-DNSoxZk-.js";import"./warning-pKr2A9xR.js";import"./memoize-one-BdPwpGay.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();hs.use(Os).use(qs).init({backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1},debug:!0});const Lt="http://localhost:3000/api",D=Hs.create({baseURL:Lt,withCredentials:!0}),Xe=s=>s==null?void 0:s.reduce((t,r)=>t+=r,""),be=(s,t)=>(_.error({message:"ÐžÑˆÐ¸Ð±ÐºÐ°",description:t}),Promise.reject(s));D.interceptors.request.use(s=>{const t=localStorage.getItem("token");t&&(s.headers.Authorization=`Bearer ${t}`);const r=hs.language;return r&&(s.headers["Accept-Language"]=r),s},s=>Promise.reject(s));D.interceptors.response.use(s=>s,s=>{var t,r,a,n,o;if(((t=s.response)==null?void 0:t.status)===401)return _.error({message:"Ð¡ÐµÑÑÐ¸Ñ Ð¸ÑÑ‚ÐµÐºÐ»Ð°",description:((a=(r=s.response)==null?void 0:r.data)==null?void 0:a.message)||"ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ ÑÐ½Ð¾Ð²Ð°."}),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login",new Promise(()=>{});if(((n=s.response)==null?void 0:n.status)!==504){if(s.message==="Network Error"||!s.response)return be(s,"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ‚Ð¸ Ð¸Ð»Ð¸ ÑÐµÑ€Ð²ÐµÑ€ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð·Ð¶Ðµ.");const c=(o=s.response)==null?void 0:o.data;let u=typeof c=="string"?c:"";if(Array.isArray(c))return be(s,Xe(c));if(Array.isArray(c==null?void 0:c.data))return be(s,Xe(c.data));if(c!=null&&c.detail)return be(s,c.detail);if(c instanceof Object){const m=c.msg||Object.keys(c).reduce((p,b)=>{var v;return p+=`${b}: ${((v=c[b])==null?void 0:v[0])||c[b]} `},"");return be(s,m)}_.error({message:"ÐžÑˆÐ¸Ð±ÐºÐ°",description:u||s.message})}return Promise.reject(s)});const Qe=async()=>(await D.get("/auth/profile")).data,Ze=async s=>{const t=new FormData;return Object.keys(s).forEach(a=>{const n=s[a];n&&t.append(a,n)}),(await D.put("/auth/profile",t)).data},zt=s=>{const t=D.defaults.baseURL;return t?`${t}/auth/avatar/${s}`:"/default-avatar.png"},$t=async s=>(await D.get(`/auth/profile/${s}`)).data,we=i.createContext(void 0),Bt=({children:s})=>{const[t,r]=i.useState(!1),[a,n]=i.useState(null),[o,c]=i.useState(!0),u=i.useCallback(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),n(null),r(!1)},[]);i.useEffect(()=>{(async()=>{if(c(!0),localStorage.getItem("token"))try{const d=await Qe();n(d),r(!0)}catch(d){console.error("Session token is invalid, logging out.",d),u()}c(!1)})()},[u]);const b={isAuthenticated:t,user:a,loading:o,login:(v,x)=>{localStorage.setItem("token",v),localStorage.setItem("user",JSON.stringify(x)),n(x),r(!0)},logout:u,refetchUser:async()=>{c(!0);try{const v=await Qe();n(v)}catch(v){console.error("Failed to refetch user data",v),u()}finally{c(!1)}}};return e.jsx(we.Provider,{value:b,children:s})},Ht=async s=>(await D.post("/auth/login",s)).data,Ot=async s=>{try{return(await D.post("/auth/register",s)).data}catch(t){throw console.error("Registration failed",t),t}},es=s=>[{required:!0,message:s("validation.required")},{validator:(t,r)=>r&&r.length>=2?Promise.resolve():Promise.reject(new Error(s("validation.name_length")))}],qt=s=>[{required:!0,message:s("validation.required")},{type:"email",message:s("validation.invalid_email")}],Ut=s=>[{required:!0,message:s("validation.required")},{min:6,message:s("validation.password_length")}],Yt=({mode:s})=>{const{t}=$(),r=he(),a=i.useContext(we);if(!a)throw new Error("AuthForm must be used within an AuthProvider");const{login:n}=a,o=s==="login",c=async m=>{var p,b;try{const{token:v,user:x}=await Ht(m);n(v,x),r(`/profile/${x._id}`,{replace:!0}),_.success({message:t("auth.success.login_title"),description:t("auth.success.welcome_back",{name:x.firstName})})}catch(v){_.error({message:t("auth.errors.login"),description:((b=(p=v.response)==null?void 0:p.data)==null?void 0:b.msg)||t("auth.errors.invalid_credentials")})}},u=async m=>{var p,b;try{const x=(await Ot(m)).email;r("/verify-email",{replace:!0,state:{email:x,firstName:m.firstName,lastName:m.lastName}}),_.success({message:t("register.success.title"),description:t("register.success.description")})}catch(v){_.error({message:t("register.error.title"),description:((b=(p=v.response)==null?void 0:p.data)==null?void 0:b.msg)||t("register.error.description")})}};return e.jsxs("div",{className:"auth-form-container",children:[e.jsxs("div",{className:"auth-header",onClick:()=>r("/"),children:[e.jsx(Ys,{className:"auth-header__icon"}),e.jsx(qe.Title,{level:4,className:"auth-header__brand",children:t("common.brand")})]}),e.jsx(qe.Title,{level:3,className:"auth-header__title",children:t(o?"auth.sign_in":"register.title")}),e.jsxs(me,{name:s,onFinish:o?c:u,layout:"vertical",className:"auth-form-body",size:"large",autoComplete:"off",children:[!o&&e.jsxs(e.Fragment,{children:[e.jsx(me.Item,{label:e.jsx("span",{className:"auth-form-label",children:t("register.name")}),name:"firstName",rules:es(t),children:e.jsx(Ce,{placeholder:t("register.placeholder.name")})}),e.jsx(me.Item,{label:e.jsx("span",{className:"auth-form-label",children:t("register.lastName")}),name:"lastName",rules:es(t),children:e.jsx(Ce,{placeholder:t("register.placeholder.lastName")})})]}),e.jsx(me.Item,{label:e.jsx("span",{className:"auth-form-label",children:t("common.email")}),name:"email",rules:qt(t),children:e.jsx(Ce,{placeholder:t("common.placeholder.email")})}),e.jsx(me.Item,{label:e.jsx("span",{className:"auth-form-label",children:t("common.password")}),name:"password",rules:Ut(t),children:e.jsx(Ce.Password,{placeholder:t("common.placeholder.password")})}),e.jsx(me.Item,{children:e.jsx(Us,{type:"primary",htmlType:"submit",className:"auth-form-button",block:!0,children:t(o?"auth.sign_in":"register.submit")})})]}),e.jsx("div",{className:"auth-form-footer",children:o?e.jsxs(e.Fragment,{children:[t("auth.no_account")," ",e.jsx("a",{className:"auth-form-link",onClick:()=>r("/register"),children:t("auth.sign_up")})]}):e.jsxs(e.Fragment,{children:[t("register.haveAccount")," ",e.jsx("a",{className:"auth-form-link",onClick:()=>r("/login"),children:t("register.login")})]})})]})},ss=()=>{const t=Me().pathname.includes("register")?"register":"login";return e.jsx("div",{className:"auth-page-wrapper",children:e.jsx(Yt,{mode:t})})},Kt=({className:s})=>{const{i18n:t}=$(),r=a=>{const n=a.target.value;t.changeLanguage(n)};return e.jsxs(Fe,{value:t.language,onChange:r,size:"small",className:s,style:{color:"black",borderColor:"black"},children:[e.jsx(V,{value:"en",children:"EN"}),e.jsx(V,{value:"pl",children:"PL"}),e.jsx(V,{value:"uk",children:"UA"})]})},Rs=async s=>(await D.post("/notifications",s)).data,Gt=async()=>(await D.get("/notifications")).data,Vt=async s=>(await D.patch("/notifications",{},{params:{notification_id:s}})).data,Jt=async s=>(await D.delete("/notifications",{params:{notification_id:s}})).data,Xt=({navigateToRequests:s})=>{const[t,r]=i.useState([]),[a,n]=i.useState(null),o=!!a,c=t.filter(d=>!d.read).length,u=async()=>{try{const d=await Gt();r(Array.isArray(d)?d:[])}catch(d){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹:",d)}};i.useEffect(()=>{u();const d=setInterval(u,3e4);return()=>clearInterval(d)},[]);const m=d=>{n(d.currentTarget),u()},p=()=>{n(null)},b=async(d,g)=>{d.stopPropagation();try{await Jt(g),r(j=>j.filter(w=>w._id!==g))}catch(j){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ:",j)}},v=d=>{d.read||(Vt(d._id),r(g=>g.map(j=>j._id===d._id?{...j,read:!0}:j))),(d.type==="request"||d.type==="homework_submission")&&s(),p()},x=()=>{s(),p()};return e.jsxs("div",{children:[e.jsx(G,{color:"inherit",onClick:m,children:e.jsx(Js,{badgeContent:c,color:"error",children:e.jsx(Xs,{})})}),e.jsxs(Qs,{anchorEl:a,open:o,onClose:p,PaperProps:{style:{maxHeight:300,width:"400px"}},children:[e.jsx(f,{sx:{p:2,borderBottom:"1px solid #eee"},children:e.jsx(l,{variant:"h6",children:"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ"})}),t.length===0?e.jsx(V,{disabled:!0,children:"Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹ Ð½ÐµÑ‚"}):t.map(d=>e.jsxs(V,{onClick:()=>v(d),sx:{bgcolor:d.read?"transparent":"action.hover",whiteSpace:"normal",alignItems:"flex-start"},children:[e.jsx(Y,{primary:d.content,secondary:new Date(d.createdAt).toLocaleString()}),e.jsx(Zs,{children:e.jsx(G,{edge:"end","aria-label":"delete",onClick:g=>b(g,d._id),children:e.jsx(We,{fontSize:"small"})})})]},d._id)),e.jsx(J,{}),e.jsx(V,{onClick:x,children:e.jsx(Y,{primary:"ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð²ÑÐµ Ð²Ð¾ 'Ð’Ñ…Ð¾Ð´ÑÑ‰Ð¸Ñ…'",sx:{textAlign:"center"}})})]})]})},Qt=()=>{var w,F,A;const[s,t]=i.useState(!1),r=he(),{t:a}=$(),n=i.useContext(we);if(!n||n.loading)return e.jsx(Ue,{position:"static",className:"navbar-appbar",children:e.jsxs(Ye,{className:"navbar-toolbar",sx:{justifyContent:"space-between"},children:[e.jsx(l,{variant:"h6",className:"navbar-title",children:a("navbar.chessSchool")}),e.jsx(te,{color:"inherit",size:24})]})});const{isAuthenticated:o,user:c,logout:u}=n,m=(w=c==null?void 0:c.roles)==null?void 0:w.includes("admin"),p=(F=c==null?void 0:c.roles)==null?void 0:F.includes("coach"),b=(A=c==null?void 0:c.roles)==null?void 0:A.includes("student"),v=()=>{u&&u(),t(!1),r("/login")},x=()=>{t(!1),r("/register")},d=()=>{r("/inbox")},g=S=>()=>{t(S)},j=S=>{t(!1),S==="/profile"&&(c!=null&&c._id)?r(`/profile/${c._id}`):r(S)};return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{position:"static",className:"navbar-appbar",children:e.jsxs(Ye,{className:"navbar-toolbar",children:[e.jsx(l,{variant:"h6",className:"navbar-title",onClick:()=>r("/"),children:a("navbar.chessSchool")}),e.jsxs(f,{className:"navbar-controls",children:[!o&&e.jsxs(f,{sx:{display:{xs:"none",md:"flex"},alignItems:"center"},children:[e.jsx(C,{color:"inherit",onClick:()=>r("/login"),children:a("navbar.login")}),e.jsx(C,{variant:"contained",color:"secondary",onClick:()=>r("/register"),sx:{ml:1},children:a("navbar.register")})]}),o&&e.jsx(Xt,{navigateToRequests:d}),e.jsx(G,{edge:"end",color:"inherit","aria-label":"menu",onClick:g(!0),className:"navbar-menu-button",children:e.jsx(et,{})})]})]})}),e.jsx(st,{anchor:"right",open:s,onClose:g(!1),children:e.jsxs(f,{className:"navbar-drawer",children:[e.jsx(f,{className:"drawer-header",children:e.jsx(G,{onClick:g(!1),className:"close-button",children:e.jsx(Ft,{className:"close-icon"})})}),e.jsxs(gs,{className:"menu-list",children:[e.jsxs(ee,{onClick:()=>j("/"),className:"menu-item",children:[e.jsx(se,{children:e.jsx(Et,{})}),e.jsx(Y,{primary:a("navbar.home")})]}),e.jsxs(ee,{onClick:()=>j("/about"),className:"menu-item",children:[e.jsx(se,{children:e.jsx(Dt,{})}),e.jsx(Y,{primary:a("navbar.aboutUs")})]}),e.jsxs(ee,{onClick:()=>j("/achievements"),className:"menu-item",children:[e.jsx(se,{children:e.jsx(At,{})}),e.jsx(Y,{primary:a("navbar.achievements")})]}),e.jsxs(ee,{onClick:()=>j("/coaches"),className:"menu-item",children:[e.jsx(se,{children:e.jsx(Ie,{})}),e.jsx(Y,{primary:a("navbar.coaches")})]}),o&&e.jsx(J,{sx:{borderColor:"rgba(255, 255, 255, 0.12)"}}),o&&e.jsxs(e.Fragment,{children:[e.jsxs(ee,{onClick:()=>j("/analysis"),className:"menu-item",children:[e.jsx(se,{children:e.jsx(Rt,{})}),e.jsx(Y,{primary:a("navbar.chessGame")})]}),e.jsxs(ee,{onClick:()=>j("/profile"),className:"menu-item",children:[e.jsx(se,{children:e.jsx(Mt,{})}),e.jsx(Y,{primary:a("navbar.profile")})]})]}),(p||m||b)&&e.jsx(J,{sx:{borderColor:"rgba(255, 255, 255, 0.12)"}}),(p||m)&&e.jsxs(ee,{onClick:()=>j("/students"),className:"menu-item",children:[e.jsx(se,{children:e.jsx(Ie,{})}),e.jsx(Y,{primary:a("navbar.students")})]}),(p||m||b)&&e.jsxs(ee,{onClick:()=>j("/students-shedule"),className:"menu-item",children:[e.jsx(se,{children:e.jsx(Ie,{})}),e.jsx(Y,{primary:a("navbar.students-shedule")})]}),m&&e.jsxs(ee,{onClick:()=>j("/users"),className:"menu-item",children:[e.jsx(se,{children:e.jsx(Ie,{})}),e.jsx(Y,{primary:a("navbar.users")})]})]}),e.jsxs(f,{className:"drawer-bottom-actions",children:[o?e.jsxs(C,{onClick:v,className:"logout-button",children:[e.jsx(Wt,{}),a("navbar.logout")]}):e.jsxs(C,{onClick:x,className:"get-started-button",variant:"contained",color:"secondary",children:[e.jsx(Tt,{style:{marginRight:"8px"}}),a("navbar.getStarted")]}),e.jsx(Kt,{className:"language-switcher"})]})]})})]})},Zt=async()=>(await D.get("/coaches")).data,er=async s=>(await D.get(`/coach/${s}`)).data,sr=async s=>(await D.post("/auth/coaches-by-email",{emails:s})).data,tr=async(s,t)=>(await D.get("/trainer/student",{params:{coachEmail:s,studentId:t}})).data,rr=async s=>(await D.get("/trainer/students",{params:{coachEmail:s}})).data,nr=async(s,t)=>{await D.delete("/trainer/remove-student",{params:{coachEmail:s,studentId:t}})},or=()=>{const{t:s}=$(),t=he(),[r,a]=i.useState([]);return i.useEffect(()=>{(async()=>{const o=await sr(["ad3@example.com","ad7@example.com"]);a(o)})()},[]),e.jsxs(f,{py:10,px:2,sx:{backgroundColor:"#111"},children:[e.jsx(l,{variant:"h4",fontWeight:"bold",textAlign:"center",mb:6,children:s("homePage.coaches.title")}),e.jsx(E,{container:!0,spacing:4,justifyContent:"center",children:r.map(n=>e.jsx(E,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(ps,{sx:{backgroundColor:"#1a1a1a",color:"white",borderRadius:3,boxShadow:4,position:"relative","&:hover .hoverAction":{opacity:1}},children:[e.jsx(fs,{component:"img",height:"200",image:n.photoUrl||"/images/default-avatar.png",alt:`${n.firstName} ${n.lastName}`}),e.jsxs(js,{children:[e.jsxs(l,{variant:"h6",children:[n.firstName," ",n.lastName]}),e.jsx(l,{variant:"body2",color:"gray"}),e.jsx(f,{mt:1,children:[...Array(5)].map((o,c)=>e.jsx(tt,{sx:{color:"#FFD700",fontSize:20}},c))})]}),e.jsx(f,{className:"hoverAction",sx:{position:"absolute",bottom:16,left:0,right:0,textAlign:"center",opacity:0,transition:"0.3s"},children:e.jsx(C,{variant:"contained",onClick:()=>t("/coaches",{state:{coach:n}}),sx:{backgroundColor:"#FFD700",color:"black"},children:s("homePage.coaches.selectCoach")})})]})},n._id))})]})},ar=()=>{const{t:s}=$(),t=he(),r=new Date().getFullYear(),a=[{icon:"ðŸŽ¯",key:"analytics",descKey:"descAnalytics"},{icon:"ðŸ§ ",key:"memory",descKey:"descMemory"},{icon:"ðŸ†",key:"spirit",descKey:"descSpirit"}],n=[{num:"1",titleKey:"step1Title",descKey:"step1Desc"},{num:"2",titleKey:"step2Title",descKey:"step2Desc"},{num:"3",titleKey:"step3Title",descKey:"step3Desc"}],o=[{type:"individual",icon:e.jsx(rt,{sx:{fontSize:40,mb:2,color:"#FFD700"}}),descKey:"descIndividual",buttonKey:"schedule",path:"/coaches"},{type:"group",icon:e.jsx(nt,{sx:{fontSize:40,mb:2,color:"#FFD700"}}),descKey:"descGroup",buttonKey:"learnMore",path:"/classes"}];return e.jsxs(f,{sx:{backgroundColor:"#0e0e0e",color:"white",fontFamily:"'Inter', sans-serif"},children:[e.jsx(f,{sx:{backgroundImage:{xs:'url("/images/chess-cinematic-mb.jpg")',sm:'url("/images/chess-cinematic-tablet.jpg")',lg:'url("/images/chess-cinematic-lg.jpg")'},backgroundSize:"cover",backgroundPosition:"center",py:{xs:10,md:20},textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",px:2},children:e.jsxs(B,{maxWidth:"md",children:[e.jsx(l,{variant:"h2",component:"h1",fontWeight:"bold",children:s("homePage.hero.title")}),e.jsx(l,{variant:"h5",mt:2,sx:{color:"rgba(255, 255, 255, 0.9)"},children:s("homePage.hero.subtitle")}),e.jsx(C,{variant:"contained",size:"large",onClick:()=>t("/coaches"),sx:{mt:4,px:5,py:1.5,borderRadius:"30px",boxShadow:"0px 8px 20px rgba(255, 215, 0, 0.3)",backgroundColor:"#FFD700",color:"black",fontWeight:"bold","&:hover":{backgroundColor:"#FFC107",transform:"translateY(-2px)",boxShadow:"0px 10px 25px rgba(255, 215, 0, 0.4)"},transition:"all 0.3s ease"},startIcon:e.jsx("span",{style:{fontSize:"1.5rem"},children:"â™Ÿï¸"}),children:s("homePage.hero.start")})]})}),e.jsxs(B,{maxWidth:"lg",sx:{py:10},children:[e.jsx(l,{variant:"h3",component:"h2",fontWeight:"bold",textAlign:"center",mb:8,children:s("homePage.why.title")}),e.jsx(E,{container:!0,spacing:4,justifyContent:"center",children:a.map(({icon:c,key:u,descKey:m})=>e.jsx(E,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(M,{elevation:6,sx:{p:4,textAlign:"center",borderRadius:4,backgroundColor:"rgba(255,255,255,0.05)",backdropFilter:"blur(10px)",transition:"all 0.3s ease",color:"white",height:"100%","&:hover":{transform:"translateY(-10px)",backgroundColor:"rgba(255,255,255,0.1)"}},children:[e.jsx(f,{fontSize:"3.5rem",children:c}),e.jsx(l,{variant:"h5",component:"h3",mt:2,fontWeight:"bold",children:s(`homePage.why.${u}`)}),e.jsx(l,{mt:1.5,sx:{color:"rgba(255, 255, 255, 0.7)"},children:s(`homePage.why.${m}`)})]})},u))})]}),e.jsx(f,{sx:{py:5},children:e.jsx(or,{})}),e.jsx(f,{sx:{py:10,backgroundColor:"#121212"},children:e.jsxs(B,{maxWidth:"lg",children:[e.jsx(l,{variant:"h3",component:"h2",fontWeight:"bold",textAlign:"center",mb:8,children:s("homePage.howItWorks.title")}),e.jsx(E,{container:!0,spacing:5,children:n.map(({num:c,titleKey:u,descKey:m})=>e.jsx(E,{item:!0,xs:12,md:4,children:e.jsxs(f,{sx:{textAlign:{xs:"center",md:"left"}},children:[e.jsx(l,{variant:"h1",component:"div",fontWeight:"bold",sx:{color:"#FFD700",opacity:.5},children:c}),e.jsx(l,{variant:"h5",component:"h3",fontWeight:"bold",mt:1,children:s(`homePage.howItWorks.${u}`)}),e.jsx(l,{mt:1.5,sx:{color:"rgba(255, 255, 255, 0.7)"},children:s(`homePage.howItWorks.${m}`)})]})},c))})]})}),e.jsxs(B,{maxWidth:"lg",sx:{py:10},children:[e.jsx(l,{variant:"h3",component:"h2",fontWeight:"bold",textAlign:"center",mb:8,children:s("homePage.formats.title")}),e.jsx(E,{container:!0,spacing:4,justifyContent:"center",children:o.map(({type:c,icon:u,descKey:m,buttonKey:p,path:b})=>e.jsx(E,{item:!0,xs:12,md:5,children:e.jsxs(M,{elevation:6,sx:{p:4,backgroundColor:"#1c1c1c",color:"white",borderRadius:4,textAlign:"center",transition:"background-color 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",height:"100%","&:hover":{backgroundColor:"#2a2a2a"}},children:[u,e.jsx(l,{variant:"h5",component:"h3",fontWeight:"bold",children:s(`homePage.formats.${c}`)}),e.jsx(l,{mt:1.5,sx:{color:"rgba(255, 255, 255, 0.7)",flexGrow:1},children:s(`homePage.formats.${m}`)}),e.jsxs(C,{variant:"outlined",onClick:()=>t(b),sx:{mt:3,color:"#FFD700",borderColor:"#FFD700",borderRadius:"20px","&:hover":{borderColor:"#FFC107",backgroundColor:"rgba(255, 215, 0, 0.1)"}},children:[s(`homePage.formats.${p}`)," â†’"]})]})},c))})]}),e.jsx(f,{component:"footer",py:6,px:2,sx:{backgroundColor:"#0b0b0b",color:"gray"},children:e.jsxs(B,{maxWidth:"lg",children:[e.jsxs(E,{container:!0,spacing:5,children:[e.jsxs(E,{item:!0,xs:12,sm:4,children:[e.jsx(l,{variant:"h6",fontWeight:"bold",sx:{color:"white"},children:s("homePage.footer.name")}),e.jsx(l,{variant:"body2",sx:{mt:1,color:"rgba(255,255,255,0.5)"},children:s("homePage.footer.desc")})]}),e.jsxs(E,{item:!0,xs:6,sm:2,children:[e.jsx(l,{fontWeight:"bold",sx:{color:"white"},children:s("homePage.footer.company")}),e.jsx(C,{size:"small",sx:{color:"gray",display:"block",p:"6px 0"},children:s("homePage.footer.about")}),e.jsx(C,{size:"small",sx:{color:"gray",display:"block",p:"6px 0"},children:s("homePage.footer.blog")}),e.jsx(C,{size:"small",sx:{color:"gray",display:"block",p:"6px 0"},children:s("homePage.footer.coaches")})]}),e.jsxs(E,{item:!0,xs:6,sm:2,children:[e.jsx(l,{fontWeight:"bold",sx:{color:"white"},children:s("homePage.footer.resources")}),e.jsx(C,{size:"small",sx:{color:"gray",display:"block",p:"6px 0"},children:s("homePage.footer.faq")}),e.jsx(C,{size:"small",sx:{color:"gray",display:"block",p:"6px 0"},children:s("homePage.footer.contact")})]}),e.jsxs(E,{item:!0,xs:6,sm:2,children:[e.jsx(l,{fontWeight:"bold",sx:{color:"white"},children:s("homePage.footer.legal")}),e.jsx(C,{size:"small",sx:{color:"gray",display:"block",p:"6px 0"},children:s("homePage.footer.privacy")}),e.jsx(C,{size:"small",sx:{color:"gray",display:"block",p:"6px 0"},children:s("homePage.footer.terms")})]})]}),e.jsx(J,{sx:{my:4,borderColor:"rgba(255, 255, 255, 0.1)"}}),e.jsx(l,{variant:"body2",textAlign:"center",sx:{color:"rgba(255,255,255,0.4)"},children:s("homePage.footer.copyright",{year:r})})]})})]})},ir=()=>{const{t:s}=$(),t=he(),r=i.useMemo(()=>s("aboutPage.phrases",{returnObjects:!0})||[],[s]),a=i.useMemo(()=>s("aboutPage.testimonials.reviews",{returnObjects:!0})||[],[s]),n=i.useMemo(()=>s("aboutPage.ourCoaches.coaches",{returnObjects:!0})||[],[s]),o=i.useMemo(()=>s("aboutPage.whyUs.cards",{returnObjects:!0})||[],[s]),c=i.useMemo(()=>s("aboutPage.howItWorks.steps",{returnObjects:!0})||[],[s]),u=i.useMemo(()=>s("aboutPage.mission.points",{returnObjects:!0})||[],[s]),[m,p]=i.useState(0),[b,v]=i.useState(0);return i.useEffect(()=>{if(r.length===0||a.length===0)return;const x=setInterval(()=>{p(g=>(g+1)%r.length)},4e3),d=setInterval(()=>{v(g=>(g+1)%a.length)},5e3);return()=>{clearInterval(x),clearInterval(d)}},[r.length,a.length]),e.jsxs(f,{sx:{bgcolor:"#0e0e0e",color:"white"},children:[e.jsx(f,{sx:{position:"relative",py:{xs:10,md:15},textAlign:"center",backgroundImage:'linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.8)), url("/images/chess-cinematic-lg.jpg")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"},children:e.jsxs(B,{maxWidth:"md",children:[e.jsx(l,{variant:"h2",component:"h1",fontWeight:"bold",sx:{textTransform:"uppercase",letterSpacing:"2px"},children:s("aboutPage.mainTitle")}),e.jsx(f,{sx:{height:"2.5em",my:2},children:e.jsx(Ve,{mode:"out-in",children:e.jsx(Je,{timeout:300,classNames:"fade",children:e.jsx(l,{variant:"h5",sx:{color:"#FFD700",fontStyle:"italic"},children:r.length>0?r[m]:""})},m)})}),e.jsxs(W,{direction:{xs:"column",sm:"row"},justifyContent:"center",spacing:2,mt:4,children:[e.jsx(C,{variant:"contained",onClick:()=>t("/register"),size:"large",sx:{bgcolor:"#FFD700",color:"black",borderRadius:"30px",px:5,"&:hover":{bgcolor:"#FFC107"}},children:s("aboutPage.ctaStudent")}),e.jsx(C,{variant:"outlined",onClick:()=>t("/coaches"),size:"large",sx:{color:"white",borderColor:"rgba(255,255,255,0.5)",borderRadius:"30px",px:5,"&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"}},children:s("aboutPage.ctaCoaches")})]})]})}),e.jsxs(B,{maxWidth:"lg",sx:{py:8},children:[e.jsxs(f,{sx:{textAlign:"center",my:8},children:[e.jsxs(W,{direction:"row",spacing:2,justifyContent:"center",alignItems:"center",sx:{color:"#FFD700",mb:1},children:[e.jsx(ot,{fontSize:"large"}),e.jsx(l,{variant:"h4",component:"h2",fontWeight:"bold",children:s("aboutPage.mission.title")})]}),e.jsx(l,{variant:"h6",sx:{maxWidth:720,mx:"auto",color:"rgba(255,255,255,0.7)",mb:3},children:s("aboutPage.mission.subtitle")}),e.jsx(W,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"center",children:u.map((x,d)=>e.jsxs(W,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(ae,{sx:{color:"success.main"}}),e.jsx(l,{children:x})]},d))})]}),e.jsx(J,{sx:{my:8,borderColor:"rgba(255,255,255,0.2)"}}),e.jsxs(f,{sx:{my:8},children:[e.jsx(l,{variant:"h4",component:"h2",fontWeight:"bold",align:"center",sx:{mb:6},children:s("aboutPage.whyUs.title")}),e.jsx(E,{container:!0,spacing:4,children:o.map((x,d)=>e.jsx(E,{item:!0,xs:12,md:4,children:e.jsxs(M,{sx:{p:4,bgcolor:"#1c1c1c",borderRadius:4,textAlign:"center",height:"100%",transition:"all 0.3s ease","&:hover":{transform:"translateY(-10px)",boxShadow:"0 10px 20px rgba(255,215,0,0.15)"}},children:[e.jsx(l,{fontSize:"3rem",children:x.icon}),e.jsx(l,{variant:"h6",fontWeight:"bold",my:1,children:x.title}),e.jsx(l,{sx:{color:"rgba(255,255,255,0.6)"},children:x.description})]})},d))})]}),e.jsxs(f,{sx:{my:8,py:6,bgcolor:"#1c1c1c",borderRadius:4},children:[e.jsx(l,{variant:"h4",component:"h2",fontWeight:"bold",align:"center",sx:{mb:6},children:s("aboutPage.howItWorks.title")}),e.jsx(E,{container:!0,spacing:4,sx:{px:4},children:c.map((x,d)=>e.jsx(E,{item:!0,xs:12,md:4,children:e.jsxs(W,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(l,{variant:"h2",fontWeight:"bold",sx:{color:"#FFD700",opacity:.5},children:`0${d+1}`}),e.jsxs(f,{children:[e.jsx(l,{variant:"h6",fontWeight:"bold",children:x.step}),e.jsx(l,{sx:{color:"rgba(255,255,255,0.6)"},children:x.desc})]})]})},d))})]}),e.jsxs(E,{container:!0,spacing:8,sx:{my:8},children:[e.jsxs(E,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h4",component:"h2",fontWeight:"bold",sx:{mb:3},children:s("aboutPage.testimonials.title")}),e.jsx(M,{sx:{p:4,bgcolor:"#1c1c1c",borderRadius:4,minHeight:180},children:e.jsx(Ve,{children:e.jsx(Je,{timeout:300,classNames:"fade",children:e.jsx(f,{children:a.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(l,{fontStyle:"italic",fontSize:"1.1rem",sx:{color:"rgba(255,255,255,0.8)"},children:["â€œ",a[b].quote,"â€"]}),e.jsxs(l,{fontWeight:"bold",mt:2,sx:{color:"#FFD700"},children:["â€” ",a[b].name]})]}):null})},b)})})]}),e.jsxs(E,{item:!0,xs:12,md:6,children:[e.jsx(l,{variant:"h4",component:"h2",fontWeight:"bold",sx:{mb:3},children:s("aboutPage.ourCoaches.title")}),e.jsxs(W,{spacing:2,children:[n.map((x,d)=>e.jsxs(M,{sx:{p:2,bgcolor:"#1c1c1c",borderRadius:2},children:[e.jsx(l,{variant:"h6",fontWeight:"bold",children:x.name}),e.jsx(l,{variant:"body2",fontStyle:"italic",sx:{color:"rgba(255,255,255,0.6)"},children:x.quote})]},d)),e.jsxs(C,{variant:"text",onClick:()=>t("/coaches"),sx:{color:"#FFD700",alignSelf:"flex-start"},children:[s("aboutPage.ourCoaches.viewAll")," â†’"]})]})]})]}),e.jsx(J,{sx:{my:8,borderColor:"rgba(255,255,255,0.2)"}}),e.jsx(l,{align:"center",fontWeight:"bold",variant:"h5",component:"p",sx:{fontStyle:"italic"},children:s("aboutPage.finalSlogan")})]})]})},lr=()=>e.jsx(B,{children:e.jsx(l,{variant:"h3",gutterBottom:!0,children:"Achievments"})}),cr=()=>!!localStorage.getItem("token"),dr=()=>cr()?e.jsx(us,{}):e.jsx(ms,{to:"/login"}),He=async s=>(await D.get(`/schedule/student/${s}`)).data,hr=async s=>(await D.post("/schedule/create",s)).data,ur=async(s,t)=>(await D.put(`/schedule/${s}`,t)).data,mr=async s=>{await D.delete(`/schedule/${s}`)},Ms=async s=>{const t=new FormData;t.append("studentId",s.studentId),t.append("scheduleId",s.scheduleId),s.homeworkText&&t.append("homeworkText",s.homeworkText),s.screenshot&&t.append("screenshot",s.screenshot),await D.post("/homework/send",t)},xr=async(s,t)=>(await D.put(`/homework/${s}/review`,t)).data,gr=async()=>(await D.get("/homework/coach")).data,pr=async s=>(await D.get(`/homework/${s}/screenshot`,{responseType:"blob"})).data,ts={scheduled:{icon:e.jsx(pe,{fontSize:"small"}),color:"info",labelKey:"status.scheduled"},pending:{icon:e.jsx(pe,{fontSize:"small"}),color:"warning",labelKey:"status.pending"},completed:{icon:e.jsx(ae,{fontSize:"small"}),color:"success",labelKey:"status.completed"},approved:{icon:e.jsx(ae,{fontSize:"small"}),color:"success",labelKey:"status.approved"},rejected:{icon:e.jsx(Te,{fontSize:"small"}),color:"error",labelKey:"status.rejected"}},Re=({event:s,variant:t="light",onSelect:r})=>{const{t:a}=$(),n=s.status,o=ts[n]||ts.scheduled,c=t==="dark"?{bgcolor:"#2a2a2a",color:"white"}:{bgcolor:"white",color:"black"};return e.jsxs(M,{onClick:r?()=>r(s):void 0,sx:{...c,p:2,borderRadius:2,cursor:r?"pointer":"default",transition:"box-shadow 0.3s, transform 0.2s","&:hover":r?{boxShadow:6,transform:"translateY(-2px)"}:{}},children:[e.jsxs(f,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(l,{variant:"h6",fontWeight:500,noWrap:!0,children:s.title}),e.jsx(je,{icon:o.icon,label:a(o.labelKey),color:o.color,size:"small"})]}),e.jsx(l,{variant:"body2",color:t==="dark"?"grey.400":"text.secondary",children:K(s.date).format("MMMM Do, YYYY [at] HH:mm")}),s.description&&e.jsx(l,{variant:"body2",sx:{mt:1,color:t==="dark"?"grey.500":"text.secondary"},children:s.description})]})},fr=({user:s,onClose:t})=>{const{t:r}=$(),[a,n]=i.useState(s.firstName),[o,c]=i.useState(s.lastName),[u,m]=i.useState(s.email),[p,b]=i.useState(""),[v,x]=i.useState(""),[d,g]=i.useState(""),[j,w]=i.useState(!1),[F,A]=i.useState(null),[S,N]=i.useState(s.photoUrl),h=k=>{var O;const R=(O=k.target.files)==null?void 0:O[0];R&&(A(R),N(URL.createObjectURL(R)))},y=async()=>{try{if(!j)await Ze({firstName:a,lastName:o,email:u,avatar:F||void 0}),_.success({message:r("profile_edit.updated"),description:void 0});else{if(!p||v!==d){_.error({message:r("profile_edit.passwordMismatch"),description:void 0});return}await Ze({currentPassword:p,newPassword:v,avatar:F||void 0}),_.success({message:r("profile_edit.passwordChanged"),description:void 0})}t(),window.location.reload()}catch(k){console.error(k),_.error({message:r("profile_edit.updateFailed"),description:void 0})}};return e.jsxs(ie,{open:!0,onClose:t,fullWidth:!0,maxWidth:"sm",children:[e.jsx(le,{children:r("profile_edit.editTitle")}),e.jsxs(ce,{children:[e.jsxs(f,{display:"flex",alignItems:"center",flexDirection:"column",mb:2,children:[e.jsx(Le,{src:S,sx:{width:96,height:96,mb:1}}),e.jsxs(C,{variant:"text",size:"small",component:"label",children:[r("profile_edit.uploadAvatar"),e.jsx("input",{hidden:!0,accept:"image/*",type:"file",onChange:h})]})]}),e.jsx(L,{margin:"dense",label:r("profile_edit.firstName"),fullWidth:!0,value:a,onChange:k=>n(k.target.value)}),e.jsx(L,{margin:"dense",label:r("profile_edit.lastName"),fullWidth:!0,value:o,onChange:k=>c(k.target.value)}),e.jsx(L,{margin:"dense",label:r("profile_edit.email"),fullWidth:!0,value:u,onChange:k=>m(k.target.value)}),!j&&e.jsx(f,{mt:1,children:e.jsx(Se,{component:"button",variant:"body2",onClick:()=>w(!0),children:r("profile_edit.changePassword")})}),j&&e.jsxs(f,{mt:2,children:[e.jsx(L,{margin:"dense",label:r("profile_edit.currentPassword"),fullWidth:!0,type:"password",value:p,onChange:k=>b(k.target.value)}),e.jsx(L,{margin:"dense",label:r("profile_edit.newPassword"),fullWidth:!0,type:"password",value:v,onChange:k=>x(k.target.value)}),e.jsx(L,{margin:"dense",label:r("profile_edit.confirmPassword"),fullWidth:!0,type:"password",value:d,onChange:k=>g(k.target.value)})]})]}),e.jsxs(de,{children:[e.jsx(C,{onClick:t,children:r("profile_edit.cancel")}),e.jsx(C,{variant:"contained",onClick:y,children:r("profile_edit.save")})]})]})},rs={admin:4,coach:3,student:2,user:1},jr=(s=[])=>s.length===0?"user":[...s].sort((t,r)=>(rs[r]||0)-(rs[t]||0))[0],br=({user:s,coach:t,avatarUrl:r,isMyProfile:a,onEdit:n,onLogout:o,t:c})=>{const u=jr(s.roles),m=s.roles.filter(b=>b!==u),p={admin:"secondary",coach:"primary",student:"success",user:"default"}[u];return e.jsx(M,{sx:{p:{xs:2,md:4},mb:4,bgcolor:"#1c1c1c",borderRadius:4,color:"white"},children:e.jsxs(W,{direction:{xs:"column",md:"row"},spacing:4,alignItems:"center",children:[e.jsx(Le,{src:r,alt:`${s.firstName} ${s.lastName}`,sx:{width:120,height:120,border:"4px solid #FFD700"}}),e.jsxs(f,{sx:{flexGrow:1,textAlign:{xs:"center",md:"left"}},children:[e.jsxs(W,{direction:"row",spacing:2,alignItems:"center",justifyContent:{xs:"center",md:"flex-start"},children:[e.jsxs(l,{variant:"h4",fontWeight:"bold",children:[s.firstName," ",s.lastName]}),e.jsx(ze,{title:m.length>0?`Also: ${m.join(", ")}`:"",arrow:!0,children:e.jsx(je,{label:u,color:p,size:"small",sx:{textTransform:"capitalize"}})})]}),t&&e.jsxs(l,{sx:{color:"rgba(255,255,255,0.7)",mt:1},children:["Coach: ",e.jsxs(Se,{component:xs,to:`/profile/${t._id}`,color:"inherit",sx:{textDecoration:"underline"},children:[t.firstName," ",t.lastName]})]}),e.jsxs(l,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.5)",mt:.5},children:[c("profile.registrationDate"),": ",new Date(s.registrationDate).toLocaleDateString()]})]}),e.jsx(W,{direction:"row",spacing:2,sx:{mt:{xs:3,md:0}},children:a?e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"outlined",onClick:n,startIcon:e.jsx(_e,{}),sx:{color:"#FFD700",borderColor:"rgba(255, 215, 0, 0.5)","&:hover":{borderColor:"#FFD700"}},children:c("profile.editProfile")}),e.jsx(C,{variant:"contained",color:"error",onClick:o,startIcon:e.jsx(at,{}),children:c("profile.logout")})]}):u==="coach"&&e.jsx(C,{variant:"contained",color:"primary",startIcon:e.jsx(bs,{}),children:"Send Request"})})]})})},vr=({schedule:s,isLoading:t,onEventSelect:r})=>{if(t)return e.jsxs(W,{spacing:2,children:[e.jsx(Pe,{variant:"rectangular",height:118,sx:{borderRadius:2,bgcolor:"grey.800"}}),e.jsx(Pe,{variant:"rectangular",height:118,sx:{borderRadius:2,bgcolor:"grey.800"}}),e.jsx(Pe,{variant:"rectangular",height:118,sx:{borderRadius:2,bgcolor:"grey.800"}})]});const{upcomingEvents:a,pastEvents:n}=i.useMemo(()=>{const o=new Date,c=[],u=[];return s.forEach(m=>{new Date(m.date)>=o?c.push(m):u.push(m)}),c.sort((m,p)=>new Date(m.date).getTime()-new Date(p.date).getTime()),u.sort((m,p)=>new Date(p.date).getTime()-new Date(m.date).getTime()),{upcomingEvents:c,pastEvents:u}},[s]);return s.length===0?e.jsx(l,{sx:{color:"grey.500",textAlign:"center",p:4},children:"You have no scheduled lessons yet."}):e.jsxs(e.Fragment,{children:[e.jsxs(f,{mb:5,children:[e.jsx(l,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Upcoming"}),a.length>0?e.jsx(W,{spacing:2,children:a.map(o=>e.jsx(Re,{event:o,onSelect:r},o._id))}):e.jsx(M,{sx:{p:4,textAlign:"center"},children:e.jsx(l,{color:"text.secondary",children:"You have no upcoming lessons."})})]}),e.jsx(J,{sx:{borderColor:"rgba(255, 255, 255, 0.12)"}}),e.jsxs(f,{mt:4,children:[e.jsx(l,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Archive"}),n.length>0?e.jsx(W,{spacing:2,children:n.map(o=>e.jsx(Re,{event:o,onSelect:r},o._id))}):e.jsx(M,{sx:{p:4,textAlign:"center"},children:e.jsx(l,{color:"text.secondary",children:"Your lesson history is empty."})})]})]})},yr=({schedule:s,isLoading:t,onEventSelect:r})=>{if(t)return e.jsx(M,{sx:{p:2,bgcolor:"#2a2a2a",borderRadius:3},children:e.jsx(Pe,{variant:"rectangular",height:150,sx:{bgcolor:"grey.700",borderRadius:2}})});const a=s.filter(n=>new Date(n.date)>=new Date).sort((n,o)=>new Date(n.date).getTime()-new Date(o.date).getTime())[0];return e.jsxs(f,{children:[e.jsx(l,{variant:"h5",fontWeight:"bold",sx:{mb:2},children:"Next Up"}),a?e.jsx(Re,{event:a,variant:"dark",onSelect:r}):e.jsx(M,{sx:{p:4,bgcolor:"#2a2a2a",color:"white",borderRadius:3,textAlign:"center"},children:e.jsx(l,{sx:{color:"grey.500"},children:"You have no upcoming lessons."})}),s.length>0&&e.jsx(C,{component:xs,to:"/students-shedule",fullWidth:!0,endIcon:e.jsx(it,{}),sx:{mt:2,color:"#FFD700",justifyContent:"flex-start",p:1},children:"View Full Schedule"})]})},ns={scheduled:{icon:e.jsx(pe,{fontSize:"small"}),color:"info",labelKey:"status.scheduled"},pending:{icon:e.jsx(pe,{fontSize:"small"}),color:"warning",labelKey:"status.pending"},completed:{icon:e.jsx(ae,{fontSize:"small"}),color:"success",labelKey:"status.completed"},approved:{icon:e.jsx(ae,{fontSize:"small"}),color:"success",labelKey:"status.approved"},rejected:{icon:e.jsx(Te,{fontSize:"small"}),color:"error",labelKey:"status.rejected"}},os=5,Sr=({event:s,open:t,onClose:r,onSendHomework:a})=>{const{t:n}=$(),[o,c]=i.useState(""),[u,m]=i.useState(null),[p,b]=i.useState(!1);if(i.useEffect(()=>{t||(c(""),m(null),b(!1))},[t]),!s)return null;const v=j=>{var F;const w=(F=j.target.files)==null?void 0:F[0];if(w){if(w.size>os*1024*1024){_.error({message:n("errors.fileTooLarge",{size:os}),description:void 0});return}m(w)}},x=async()=>{if(!o.trim()&&!u){_.error({message:n("errors.emptyHomework"),description:void 0});return}b(!0);try{await a(o,u)}finally{b(!1)}},d=s.status,g=ns[d]||ns.scheduled;return e.jsxs(ie,{open:t,onClose:r,fullWidth:!0,maxWidth:"sm",children:[e.jsx(le,{sx:{bgcolor:`${g.color}.main`,color:"white"},children:n("studentSchedule.eventDetails")}),e.jsxs(ce,{sx:{pt:3},children:[e.jsxs(f,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"h6",children:s.title}),e.jsx(je,{icon:g.icon,label:n(g.labelKey),color:g.color,size:"small"})]}),e.jsx(l,{variant:"body2",color:"text.secondary",children:K(s.date).format("dddd, MMMM Do, YYYY [at] HH:mm")}),s.description&&e.jsx(l,{variant:"body1",sx:{mt:2},children:s.description}),s.link&&e.jsxs(l,{variant:"body2",sx:{mt:1},children:[n("studentSchedule.form_link"),": ",e.jsx(Se,{href:s.link,target:"_blank",rel:"noopener noreferrer",children:s.link})]}),s.type==="homework"&&e.jsxs(f,{sx:{mt:4},children:[e.jsx(l,{variant:"h6",sx:{mb:2},children:n("studentSchedule.sendHomeworkTitle")}),e.jsx(L,{label:n("studentSchedule.form_description"),fullWidth:!0,multiline:!0,rows:4,value:o,onChange:j=>c(j.target.value),variant:"outlined",disabled:p}),e.jsxs(C,{sx:{mt:2},variant:"outlined",component:"label",startIcon:e.jsx(vs,{}),disabled:p,children:[u?u.name:n("studentSchedule.uploadScreenshot"),e.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:v})]})]})]}),e.jsxs(de,{sx:{p:2},children:[e.jsx(C,{onClick:r,disabled:p,children:n("common.close")}),s.type==="homework"&&e.jsx(C,{onClick:x,variant:"contained",color:"primary",disabled:p,children:n("studentSchedule.send")})]})]})};function Ae(s){const{children:t,value:r,index:a,...n}=s;return e.jsx("div",{role:"tabpanel",hidden:r!==a,...n,children:r===a&&e.jsx(f,{sx:{pt:3},children:t})})}const as=()=>{const{t:s}=$(),t=he(),{userId:r}=Ks(),a=i.useContext(we);if(!a)throw new Error("AuthContext is not available");const{user:n,logout:o,loading:c,refetchUser:u}=a,[m,p]=i.useState(null),[b,v]=i.useState(null),[x,d]=i.useState([]),[g,j]=i.useState({profile:!0,coach:!1,schedule:!1}),[w,F]=i.useState(null),[A,S]=i.useState(!1),[N,h]=i.useState(0),[y,k]=i.useState(null);i.useEffect(()=>{if(c)return;if(!r){F("User ID is missing from the URL."),j(P=>({...P,profile:!1}));return}(async()=>{j({profile:!0,coach:!1,schedule:!1});try{const P=await $t(r);p(P)}catch{F(s("profile.errorLoadingProfile"))}finally{j(P=>({...P,profile:!1}))}})()},[s,r,c]),i.useEffect(()=>{if(m){const I=(n==null?void 0:n._id)===m._id;m.trainer?(j(P=>({...P,coach:!0})),er(m.trainer).then(v).catch(P=>console.error("Failed to fetch coach",P)).finally(()=>j(P=>({...P,coach:!1})))):v(null),I&&m.roles.some(P=>["student","user"].includes(P))?(j(P=>({...P,schedule:!0})),He(m._id).then(d).catch(P=>console.error("Failed to fetch schedule",P)).finally(()=>j(P=>({...P,schedule:!1})))):d([])}},[m,n==null?void 0:n._id]);const R=()=>{o(),t("/login")},O=(I,P)=>h(P),X=async(I,P)=>{if(!(!n||!y))try{await Ms({studentId:n._id,scheduleId:y._id,homeworkText:I.trim()||void 0,screenshot:P||void 0}),y.coach&&await Rs({recipient:y.coach,type:"homework_submission",content:`New homework from ${n.firstName} for: "${y.title}"`,metadata:{scheduleId:y._id}}),_.success({message:s("studentSchedule.homeworkSentSuccess","Homework sent successfully!"),description:void 0}),k(null),d(q=>q.map(T=>T._id===y._id?{...T,status:"pending"}:T))}catch{_.error({message:s("errors.sendHomework","Failed to send homework."),description:void 0})}},H=(n==null?void 0:n._id)===r,ue=i.useMemo(()=>m!=null&&m._id?zt(m._id):"",[m]);return c||g.profile?e.jsx(f,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"#0e0e0e"},children:e.jsx(te,{sx:{color:"#FFD700"}})}):w||!m?e.jsx(f,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"#0e0e0e"},children:e.jsx(l,{color:"error",children:w||"User not found"})}):e.jsx(f,{sx:{bgcolor:"#0e0e0e",color:"white",minHeight:"100vh",py:5},children:e.jsxs(B,{maxWidth:"lg",children:[e.jsxs(f,{sx:{textAlign:"center",mb:5},children:[e.jsx(l,{variant:"h2",component:"h1",fontWeight:"bold",children:H?s("profile.title"):`${m.firstName}'s Profile`}),e.jsx(l,{variant:"h6",sx:{mt:1,color:"rgba(255, 255, 255, 0.7)"},children:H&&s("profile.subtitle")})]}),e.jsx(br,{user:m,coach:b,avatarUrl:ue,isMyProfile:H,onEdit:()=>S(!0),onLogout:R,t:s}),e.jsx(f,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(ys,{value:N,onChange:O,textColor:"inherit",TabIndicatorProps:{sx:{backgroundColor:"#FFD700"}},children:[e.jsx(ye,{label:s("profile.tabs.overview","Overview")}),H&&m.roles.some(I=>["student","user"].includes(I))&&e.jsx(ye,{label:s("profile.tabs.lessons","All Lessons")}),e.jsx(ye,{label:s("profile.tabs.statistics","Statistics"),disabled:!0})]})}),e.jsx(Ae,{value:N,index:0,children:H?e.jsx(yr,{schedule:x,isLoading:g.schedule,onEventSelect:k}):e.jsx(l,{sx:{color:"grey.500",textAlign:"center",p:4},children:"This is a public profile overview."})}),H&&m.roles.some(I=>["student","user"].includes(I))&&e.jsx(Ae,{value:N,index:1,children:e.jsx(vr,{schedule:x,isLoading:g.schedule,onEventSelect:k})}),e.jsx(Ae,{value:N,index:H&&m.roles.some(I=>["student","user"].includes(I))?2:1,children:e.jsx(l,{sx:{color:"grey.500",textAlign:"center",p:4},children:"Game statistics and analytics are coming soon!"})}),H&&A&&e.jsx(fr,{user:m,onClose:()=>{S(!1),u()}}),H&&e.jsx(Sr,{event:y,open:!!y,onClose:()=>k(null),onSendHomework:X})]})})},wr=({columns:s,data:t})=>{const[r,a]=i.useState(""),[n,o]=i.useState(10),[c,u]=i.useState(0),m=x=>{a(x.target.value),u(0)},p=(x,d)=>{u(d)},b=x=>{o(parseInt(x.target.value,10)),u(0)},v=t.filter(x=>s.some(d=>{if(d.field==="actions")return!1;const g=x[d.field];return g==null?void 0:g.toString().toLowerCase().includes(r.toLowerCase())}));return e.jsxs(M,{children:[e.jsx(L,{fullWidth:!0,label:"ÐŸÐ¾Ð¸ÑÐº",variant:"outlined",value:r,onChange:m,style:{padding:"16px"}}),e.jsx(lt,{children:e.jsxs(Ss,{children:[e.jsx(ws,{children:e.jsx(xe,{children:s.map(x=>e.jsx(U,{children:x.label},String(x.field)))})}),e.jsx(Cs,{children:v.slice(c*n,c*n+n).map(x=>e.jsx(xe,{children:s.map(d=>e.jsx(U,{children:d.render?d.render(x):x[d.field]},String(d.field)))},x.id))})]})}),e.jsx(ct,{rowsPerPageOptions:[10,20,50,100],component:"div",count:v.length,rowsPerPage:n,page:c,onPageChange:p,onRowsPerPageChange:b})]})},Cr=()=>{const[s,t]=i.useState([]),[r,a]=i.useState(null),[n,o]=i.useState(""),[c,u]=i.useState("add"),[m,p]=i.useState(!1),[b,v]=i.useState(!1),[x,d]=i.useState({open:!1,message:"",severity:"success"});i.useEffect(()=>{(async()=>{try{const k=(await D.get("/users")).data.map(R=>({id:R._id,firstName:R.firstName,lastName:R.lastName,email:R.email,roles:R.roles,_id:R._id,registrationDate:new Date(R.registrationDate),firebaseUID:R.firebaseUID,students:R.students,trainer:R.trainer,trainerEmail:R.trainerEmail}));t(k)}catch(y){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸ ÑÐ¿Ð¸ÑÐºÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹:",y)}})()},[]);const g=h=>{a(h),o(""),u("add"),p(!0)},j=()=>{a(null),p(!1)},w=h=>{a(h),v(!0)},F=()=>{v(!1),a(null)},A=async()=>{if(r)try{await D.put("/admin/update-role",{userEmail:r.email,role:n,action:c}),t(s.map(h=>h.id===r.id?{...h,roles:c==="add"?[...h.roles,n]:h.roles.filter(y=>y!==n)}:h)),d({open:!0,message:"Ð Ð¾Ð»ÑŒ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð°",severity:"success"}),j()}catch(h){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ Ñ€Ð¾Ð»Ð¸:",h),d({open:!0,message:"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ Ñ€Ð¾Ð»Ð¸",severity:"error"})}},S=async()=>{if(r)try{await D.delete(`/admin/delete-user/${r.id}`),t(s.filter(h=>h.id!==r.id)),d({open:!0,message:"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑƒÐ´Ð°Ð»Ñ‘Ð½",severity:"success"}),F()}catch(h){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ:",h),d({open:!0,message:"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ",severity:"error"})}},N=[{field:"firstName",label:"Ð˜Ð¼Ñ"},{field:"lastName",label:"Ð¤Ð°Ð¼Ð¸Ð»Ð¸Ñ"},{field:"email",label:"Email"},{field:"roles",label:"Ð Ð¾Ð»Ð¸",render:h=>h.roles.join(", ")},{field:"actions",label:"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ",render:h=>e.jsxs(e.Fragment,{children:[e.jsx(G,{size:"small",onClick:()=>g(h),children:e.jsx(_e,{})}),e.jsx(G,{size:"small",color:"error",onClick:()=>w(h),children:e.jsx(We,{})})]})}];return e.jsxs(B,{children:[e.jsx(l,{variant:"h4",gutterBottom:!0,children:"Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹"}),e.jsx(wr,{columns:N,data:s}),e.jsxs(ie,{open:m,onClose:j,fullWidth:!0,maxWidth:"xs",children:[e.jsx(le,{children:"Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ€Ð¾Ð»ÑÐ¼Ð¸"}),e.jsxs(ce,{children:[e.jsxs(Ke,{children:["ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: ",e.jsxs("strong",{children:[r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]})]}),e.jsxs($e,{fullWidth:!0,sx:{marginTop:2},children:[e.jsx(Be,{children:"Ð Ð¾Ð»ÑŒ"}),e.jsxs(Fe,{value:n,onChange:h=>o(h.target.value),label:"Ð Ð¾Ð»ÑŒ",children:[e.jsx(V,{value:"student",children:"Ð¡Ñ‚ÑƒÐ´ÐµÐ½Ñ‚"}),e.jsx(V,{value:"coach",children:"Ð¢Ñ€ÐµÐ½ÐµÑ€"})]})]})]}),e.jsxs(de,{children:[e.jsx(C,{onClick:j,children:"ÐžÑ‚Ð¼ÐµÐ½Ð°"}),e.jsx(C,{onClick:A,color:"primary",disabled:!n,children:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"})]})]}),e.jsxs(ie,{open:b,onClose:F,children:[e.jsx(le,{children:"ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ"}),e.jsx(ce,{children:e.jsxs(Ke,{children:["Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ ",r==null?void 0:r.email,"? Ð­Ñ‚Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð½ÐµÐ¾Ð±Ñ€Ð°Ñ‚Ð¸Ð¼Ð¾."]})}),e.jsxs(de,{children:[e.jsx(C,{onClick:F,children:"ÐÐµÑ‚"}),e.jsx(C,{onClick:S,color:"error",children:"Ð”Ð°, ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ"})]})]}),e.jsx(dt,{open:x.open,autoHideDuration:4e3,onClose:()=>d({...x,open:!1}),children:e.jsx(ht,{severity:x.severity,onClose:()=>d({...x,open:!1}),variant:"filled",children:x.message})})]})},kr=Es(K),Ir={individual_lesson:e.jsx(Is,{fontSize:"small"}),group_lesson:e.jsx(Ns,{fontSize:"small"}),homework:e.jsx(Ps,{fontSize:"small"}),opening_study:e.jsx(_s,{fontSize:"small"}),tournament_participation:e.jsx(Fs,{fontSize:"small"})},Nr=["individual_lesson","group_lesson","homework","opening_study","tournament_participation"],Pr=({event:s})=>{const t=s.type;if(!t)return null;const r=Ir[t],a=`custom-event rbc-event--${t}`;return e.jsx(ze,{title:s.description||s.title,placement:"top",children:e.jsxs("div",{className:a,children:[r,e.jsx(l,{variant:"caption",noWrap:!0,component:"span",children:s.title})]})})},_r=({open:s,onClose:t,student:r})=>{const{t:a}=$(),[n,o]=i.useState([]),[c,u]=i.useState({}),[m,p]=i.useState(null);if(!r)return null;const b=`${r.firstName} ${r.lastName}`,v=i.useCallback(()=>{u({student:r._id,status:"scheduled",title:"",type:"individual_lesson",date:"",description:"",link:""}),p(null)},[r]),x=i.useCallback(async()=>{if(r._id)try{const h=await He(r._id);o(h)}catch(h){console.error("Failed to fetch schedule:",h),_.error({message:a("schedule.fetchError"),description:void 0})}},[r,a]),d=async()=>{const{date:h,type:y,title:k}=c;if(!h||!y||!k){_.error({message:a("schedule.fieldRequired"),description:void 0});return}const R={studentId:r._id,date:new Date(h).toISOString(),title:k,description:c.description||"",link:c.link||"",type:y,status:c.status||"scheduled"};try{const O=!!c._id;O?await ur(c._id,R):await hr(R),_.success({message:a(O?"schedule.updateSuccess":"schedule.createSuccess"),description:void 0}),await x(),v()}catch(O){console.error("Failed to save event:",O)}},g=async()=>{if(c._id)try{await mr(c._id),_.success({message:a("schedule.deleteSuccess"),description:void 0}),await x(),v()}catch(h){console.error("Failed to delete event:",h)}};i.useEffect(()=>{s&&r&&(x(),v())},[s,r,x,v]);const j=i.useCallback(({start:h})=>{v(),p(h),u(y=>({...y,date:K(h).format("YYYY-MM-DDTHH:mm")}))},[v]),w=i.useCallback(h=>{p(h.date?new Date(h.date):null),u({...h,date:h.date?K(h.date).format("YYYY-MM-DDTHH:mm"):""})},[]),F=n.map(h=>({...h,id:h._id,start:new Date(h.date),end:K(h.date).add(1,"hour").toDate(),title:h.title})),A=i.useCallback(h=>({className:m&&K(h).isSame(m,"day")?"rbc-selected-slot-custom":""}),[m]),S=h=>{const{name:y,value:k}=h.target;u(R=>({...R,[y]:k}))},N=h=>{u(y=>({...y,type:h.target.value}))};return e.jsxs(ie,{open:s,onClose:t,fullWidth:!0,maxWidth:"lg",className:"schedule-dialog",children:[e.jsx(le,{className:"schedule-dialog__header",children:e.jsxs(W,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(l,{variant:"h6",component:"div",children:a("schedule.editScheduleTitle",{studentName:b})}),e.jsx(G,{"aria-label":"close",onClick:t,className:"schedule-dialog__close-btn",children:e.jsx(ks,{})})]})}),e.jsx(ce,{dividers:!0,className:"schedule-dialog__content",children:e.jsxs(E,{container:!0,spacing:3,children:[e.jsx(E,{item:!0,xs:12,md:7,children:e.jsx(Ds,{localizer:kr,events:F,startAccessor:"start",endAccessor:"end",selectable:!0,onSelectSlot:j,onSelectEvent:w,components:{event:Pr},dayPropGetter:A,className:"schedule-calendar"})}),e.jsx(E,{item:!0,xs:12,md:5,children:e.jsxs(M,{component:"form",className:"event-form",onSubmit:h=>{h.preventDefault(),d()},children:[e.jsx(l,{variant:"h6",className:"event-form__header",children:c._id?a("schedule.eventDetails"):m?a("schedule.addEventForDate",{date:K(m).format("MMMM Do, YYYY")}):a("schedule.addEvent")}),e.jsxs(W,{spacing:2.5,className:"event-form__fields",children:[e.jsx(L,{name:"title",label:a("schedule.form_title"),variant:"filled",fullWidth:!0,value:c.title||"",onChange:S,className:"event-form__field"}),e.jsxs($e,{variant:"filled",fullWidth:!0,className:"event-form__field",children:[e.jsx(Be,{children:a("schedule.form_type")}),e.jsx(Fe,{name:"type",value:c.type||"",onChange:N,children:Nr.map(h=>e.jsx(V,{value:h,children:a(`schedule.eventTypes.${h}`)},h))})]}),e.jsx(L,{name:"description",label:a("schedule.form_description"),variant:"filled",fullWidth:!0,multiline:!0,rows:3,value:c.description||"",onChange:S,className:"event-form__field"}),e.jsx(L,{name:"link",label:a("schedule.form_link"),variant:"filled",fullWidth:!0,value:c.link||"",onChange:S,className:"event-form__field"}),e.jsx(L,{name:"date",label:a("schedule.form_date"),type:"datetime-local",variant:"filled",fullWidth:!0,value:c.date||"",onChange:S,InputLabelProps:{shrink:!0},className:"event-form__field"})]})]})})]})}),e.jsxs(de,{className:"schedule-dialog__actions",children:[e.jsx(C,{onClick:t,className:"action-button action-button--close",children:a("common.close")}),e.jsx(f,{sx:{flex:"1 1 auto"}}),c._id&&e.jsx(C,{onClick:g,variant:"outlined",startIcon:e.jsx(We,{}),className:"action-button action-button--delete",children:a("common.delete")}),e.jsx(C,{onClick:d,variant:"contained",startIcon:c._id?e.jsx(ut,{}):e.jsx(mt,{}),className:"action-button action-button--save",children:c._id?a("common.save"):a("common.add")})]})]})},Fr=()=>{const{t:s}=$(),[t,r]=i.useState([]),[a,n]=i.useState(null),[o,c]=i.useState(!1),[u,m]=i.useState(!0),p=i.useMemo(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d).email:null},[]),b=i.useCallback(async()=>{if(!p){m(!1);return}m(!0);try{const d=await rr(p);if(!Array.isArray(d)||d.length===0){r([]);return}const g=d.map(w=>tr(p,w)),j=await Promise.all(g);r(j.filter(w=>w!==null))}catch(d){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ð¸ ÑÐ¿Ð¸ÑÐºÐ° ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ¾Ð²:",d),_.error({message:s("studentsPage.fetchError"),description:void 0}),r([])}finally{m(!1)}},[p,s]),v=async d=>{if(p)try{await nr(p,d),_.success({message:s("studentsPage.studentDeletedSuccess"),description:void 0}),r(g=>g.filter(j=>j._id!==d))}catch(g){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ°:",g)}},x=d=>{n(d),c(!0)};return i.useEffect(()=>{b()},[b]),e.jsxs(B,{children:[e.jsx(l,{variant:"h4",gutterBottom:!0,children:s("studentsPage.studentsListTitle")}),e.jsx(M,{children:e.jsxs(Ss,{children:[e.jsx(ws,{children:e.jsxs(xe,{children:[e.jsx(U,{children:s("studentsPage.firstName")}),e.jsx(U,{children:s("studentsPage.lastName")}),e.jsx(U,{children:s("studentsPage.email")}),e.jsx(U,{align:"right",children:s("studentsPage.actions")})]})}),e.jsx(Cs,{children:u?e.jsx(xe,{children:e.jsxs(U,{colSpan:4,align:"center",children:[e.jsx(te,{}),e.jsx(l,{sx:{mt:1},children:s("common.loading")})]})}):t.length>0?t.map(d=>e.jsxs(xe,{children:[e.jsx(U,{children:d.firstName}),e.jsx(U,{children:d.lastName}),e.jsx(U,{children:d.email}),e.jsxs(U,{align:"right",children:[e.jsx(C,{variant:"contained",color:"primary",onClick:()=>x(d),style:{marginRight:10},children:s("studentsPage.editSchedule")}),e.jsx(C,{variant:"contained",color:"secondary",onClick:()=>v(d._id),children:s("studentsPage.delete")})]})]},d._id)):e.jsx(xe,{children:e.jsx(U,{colSpan:4,align:"center",children:s("studentsPage.noStudents")})})})]})}),a&&e.jsx(_r,{open:o,onClose:()=>c(!1),student:a})]})};class Er{constructor(t){De(this,"game");De(this,"fullHistory",[]);this.game=t?new ge(t):new ge,this.fullHistory=this.game.history()}getFen(){return this.game.fen()}getTurn(){return this.game.turn()}getHistory(){return this.fullHistory}getMovesForSquare(t){return this.game.moves({square:t,verbose:!0})}getStatus(){return{isCheckmate:this.game.isCheckmate(),isStalemate:this.game.isStalemate(),isThreefoldRepetition:this.game.isThreefoldRepetition(),isInsufficientMaterial:this.game.isInsufficientMaterial(),isDraw:this.game.isDraw(),turn:this.game.turn()}}handleMove(t,r){try{const a=this.game.move({from:t,to:r,promotion:"q"});return a&&(this.fullHistory=this.game.history()),a}catch{return null}}resetGame(){this.game.reset(),this.fullHistory=[]}loadPgn(t){try{return this.game.loadPgn(t),this.fullHistory=this.game.history(),!0}catch(r){return console.error("Invalid PGN:",r),!1}}goToMove(t){const r=new ge;for(let a=0;a<t;a++)this.fullHistory[a]&&r.move(this.fullHistory[a]);this.game=r}uciToSan(t){const r=this.game.move({from:t.substring(0,2),to:t.substring(2,4),promotion:t.length===5?t.substring(4):void 0});return r?(this.game.undo(),r.san):null}}const Dr=s=>{const t=i.useMemo(()=>new Er(s),[s]),[r,a]=i.useState(t.getFen()),[n,o]=i.useState(t.getHistory()),[c,u]=i.useState(n.length),[m,p]=i.useState(null),[b,v]=i.useState({}),x=i.useRef(r);x.current=r;const d=i.useCallback(()=>{a(t.getFen());const N=t.getHistory();o(N),u(N.length)},[t]),g=i.useCallback(()=>{p(null),v({})},[]),j=i.useCallback((N,h)=>t.handleMove(N,h)?(d(),g(),!0):!1,[t,d,g]),w=i.useCallback(N=>{if(N===m){g();return}const h=t.getMovesForSquare(N);if(h.length===0){g();return}const y={};h.forEach(k=>{y[k.to]={background:k.flags.includes("c")?"radial-gradient(circle, rgba(0,0,0,0) 85%, rgba(0,0,0,0.2) 85%)":"radial-gradient(circle, rgba(0,0,0,0.2) 25%, transparent 30%)",borderRadius:"50%"}}),v(y),p(N)},[t,m,g]),F=i.useCallback(()=>{t.resetGame(),d(),g()},[t,d,g]),A=i.useCallback(N=>{const h=t.loadPgn(N.trim());return h&&(d(),g()),h},[t,d,g]),S=i.useCallback(N=>{t.goToMove(N),a(t.getFen()),u(N),g()},[t,g]);return{fen:r,history:n,currentMoveIndex:c,moveOptions:b,actions:{handleMove:j,onSquareClick:w,resetGame:F,loadPgn:A,goToMove:S}}},Ar=({fen:s,onPieceDrop:t,onSquareClick:r,squareStyles:a})=>e.jsx(As,{position:s,onPieceDrop:t,onSquareClick:r,customSquareStyles:a,customBoardStyle:{borderRadius:"4px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.5)"},customDarkSquareStyle:{backgroundColor:"#779952"},customLightSquareStyle:{backgroundColor:"#edeed1"}}),is=s=>{if(s===void 0)return"";const t=Math.abs(s);return t<.4?" =":t<1?s>0?" += ":" -= ":t<2?s>0?" Â±":" âˆ“":s>0?" +-":" -+"},ls=s=>s===void 0||Math.abs(s)<.4?"text.secondary":s>0?"success.light":"error.light",Rr=({history:s,currentMoveIndex:t,onMoveClick:r})=>{const a=Oe.useMemo(()=>{const n=[];for(let o=0;o<s.length;o+=2)n.push({white:s[o],black:s[o+1]||null});return n},[s]);return e.jsx(M,{variant:"outlined",sx:{p:1.5,height:"100%",overflowY:"auto",bgcolor:"#1c1c1c",borderColor:"rgba(255,255,255,0.2)"},children:e.jsx(E,{container:!0,rowSpacing:.5,columnSpacing:1,sx:{fontSize:"1rem",color:"white"},children:a.map((n,o)=>{const c=o*2+1,u=o*2+2;return e.jsxs(Oe.Fragment,{children:[e.jsxs(E,{item:!0,xs:2,sx:{color:"rgba(255, 255, 255, 0.6)",textAlign:"right",pt:"4px"},children:[o+1,"."]}),e.jsx(E,{item:!0,xs:5,children:e.jsxs(f,{onClick:()=>r(c),sx:{display:"flex",alignItems:"center",cursor:"pointer",p:"2px 5px",borderRadius:"4px",bgcolor:t===c?"rgba(255, 215, 0, 0.3)":"transparent","&:hover":{bgcolor:"rgba(255,255,255,0.1)"}},children:[e.jsx(l,{component:"span",children:n.white.san}),e.jsx(l,{component:"span",sx:{color:ls(n.white.evaluation),fontWeight:"bold",ml:.5},children:is(n.white.evaluation)})]})}),e.jsx(E,{item:!0,xs:5,children:n.black&&e.jsxs(f,{onClick:()=>r(u),sx:{display:"flex",alignItems:"center",cursor:"pointer",p:"2px 5px",borderRadius:"4px",bgcolor:t===u?"rgba(255, 215, 0, 0.3)":"transparent","&:hover":{bgcolor:"rgba(255,255,255,0.1)"}},children:[e.jsx(l,{component:"span",children:n.black.san}),e.jsx(l,{component:"span",sx:{color:ls(n.black.evaluation),fontWeight:"bold",ml:.5},children:is(n.black.evaluation)})]})})]},o)})})})},Mr=({evaluation:s,depth:t,principalVariation:r,isAnalyzing:a,isEngineOn:n,onToggleEngine:o})=>e.jsxs(M,{variant:"outlined",sx:{p:2,borderColor:"rgba(255,255,255,0.2)",borderRadius:2},children:[e.jsxs(W,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(l,{variant:"h4",fontWeight:"bold",sx:{color:"#FFD700"},children:s??e.jsx(l,{component:"span",color:"text.secondary",children:"..."})}),e.jsxs(W,{direction:"row",alignItems:"center",spacing:1,children:[e.jsxs(W,{alignItems:"flex-end",children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Depth: ",t]}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"SF 16"})]}),e.jsx(oe,{control:e.jsx(xt,{checked:n,onChange:o,sx:{"& .MuiSwitch-switchBase.Mui-checked":{color:"#FFD700"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"#FFD700"}}}),label:"",sx:{mr:0}})]})]}),e.jsx(J,{sx:{my:1,borderColor:"rgba(255,255,255,0.2)"}}),e.jsx(f,{sx:{minHeight:"4em",overflowX:"auto",whiteSpace:"nowrap"},children:e.jsx(l,{variant:"body1",children:r||(a?"Analyzing...":e.jsx(l,{component:"span",color:"text.secondary",children:"-"}))})})]}),Wr=()=>{const{t:s}=$(),{fen:t,history:r,currentMoveIndex:a,moveOptions:n,actions:o}=Dr(),[c,u]=i.useState([]),[m,p]=i.useState(""),[b,v]=i.useState(null),[x,d]=i.useState(!1),[g,j]=i.useState(null),[w,F]=i.useState(0),[A,S]=i.useState(""),[N,h]=i.useState(!1),y=i.useRef(t);i.useEffect(()=>{y.current=t},[t]),i.useEffect(()=>{u(r.map(P=>({san:P})))},[r]);const k=()=>{j(null),F(0),S("")},R=()=>{o.loadPgn(m)?(k(),_.success({message:s("chessGame.pgnLoadSuccess"),description:void 0})):_.error({message:s("chessGame.pgnLoadError"),description:void 0})},O=()=>{o.resetGame(),k(),_.success({message:s("chessGame.resetSuccess"),description:void 0})},X=P=>{o.goToMove(P),k()},H=i.useCallback(()=>{b&&!x&&(d(!0),k(),b.postMessage(`position fen ${t}`),b.postMessage("go depth 18"))},[b,t,x]);i.useEffect(()=>{N?H():b&&(b.postMessage("stop"),d(!1))},[t,N,H,b]);const ue=P=>{h(P.target.checked)},I=i.useCallback((P,q)=>{try{const T=new ge(q),re=P.split(" ");let Q="";for(const Z of re){const ne=T.move({from:Z.substring(0,2),to:Z.substring(2,4),promotion:Z.length===5?Z.substring(4):void 0});if(ne)T.turn()==="b"?Q+=`${T.moveNumber()}. ${ne.san} `:Q+=`${ne.san} `;else break}return Q.trim()}catch{return P}},[]);return i.useEffect(()=>{const P=new Worker("/workers/stockfish.js");return v(P),P.postMessage("uci"),P.onmessage=q=>{const T=q.data;if(T!=="uciok"){if(T.startsWith("info depth")){const re=T.match(/depth (\d+)/),Q=T.match(/score (cp|mate) (-?\d+)/),Z=T.match(/ pv (.+)/);if(re&&F(parseInt(re[1],10)),Q){const ne=new ge(y.current).turn(),Ts=Q[1];let Ee=parseInt(Q[2],10);ne==="b"&&(Ee*=-1);const Ls=Ts==="cp"?(Ee/100).toFixed(2):`M${Math.abs(Ee)}`;j(Ls)}if(Z){const ne=I(Z[1],y.current);S(ne)}}T.startsWith("bestmove")&&d(!1)}},()=>P.terminate()},[I]),e.jsx(f,{sx:{bgcolor:"#0e0e0e",color:"white",minHeight:"100vh",py:{xs:2,md:5}},children:e.jsxs(B,{maxWidth:"xl",children:[e.jsxs(f,{sx:{textAlign:"center",mb:4},children:[e.jsx(l,{variant:"h2",component:"h1",fontWeight:"bold",children:s("chessGame.title")}),e.jsx(l,{variant:"h6",sx:{mt:1,color:"rgba(255, 255, 255, 0.7)"},children:s("chessGame.subtitle")})]}),e.jsxs(E,{container:!0,spacing:4,children:[e.jsx(E,{item:!0,xs:12,md:7,children:e.jsx(M,{sx:{p:2,bgcolor:"#1c1c1c",borderRadius:4,aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ar,{fen:t,onPieceDrop:o.handleMove,onSquareClick:o.onSquareClick,squareStyles:n})})}),e.jsx(E,{item:!0,xs:12,md:5,children:e.jsx(M,{sx:{p:2,bgcolor:"#1c1c1c",borderRadius:4,height:"100%"},children:e.jsxs(W,{spacing:2,height:"100%",children:[e.jsx(Mr,{evaluation:g,depth:w,principalVariation:A,isAnalyzing:x,isEngineOn:N,onToggleEngine:ue}),e.jsx(f,{sx:{flexGrow:1,height:"250px"},children:e.jsx(Rr,{history:c,currentMoveIndex:a,onMoveClick:X})}),e.jsxs(W,{direction:"row",spacing:1,justifyContent:"center",alignItems:"center",children:[e.jsx(G,{onClick:()=>X(0),disabled:a===0,children:e.jsx(gt,{})}),e.jsx(G,{onClick:()=>X(a-1),disabled:a===0,children:e.jsx(pt,{})}),e.jsx(G,{onClick:()=>X(a+1),disabled:a===r.length,children:e.jsx(ft,{})}),e.jsx(G,{onClick:()=>X(r.length),disabled:a===r.length,children:e.jsx(jt,{})})]}),e.jsxs(W,{spacing:1,children:[e.jsx(L,{label:s("chessGame.pgnInputLabel"),fullWidth:!0,multiline:!0,rows:2,variant:"filled",value:m,onChange:P=>p(P.target.value),sx:{"& .MuiFilledInput-root":{backgroundColor:"rgba(255,255,255,0.1)"}}}),e.jsxs(W,{direction:"row",spacing:1,children:[e.jsx(C,{variant:"outlined",onClick:O,startIcon:e.jsx(bt,{}),fullWidth:!0,children:s("chessGame.reset")}),e.jsx(C,{variant:"outlined",onClick:R,startIcon:e.jsx(vt,{}),fullWidth:!0,children:s("chessGame.loadPgn")})]})]})]})})})]})]})})},Tr=({position:s,onMove:t,onSquareClick:r,boardWidth:a=500})=>e.jsx(As,{position:s,boardWidth:a,onPieceDrop:t?(n,o)=>t(n,o):void 0,onSquareClick:r}),cs=({initialFen:s})=>{const t=s||"8/8/8/8/8/8/8/8 w - - 0 1",[r,a]=i.useState(!1),[n]=i.useState(()=>{const S=new ge;return S.clear(),S}),[o,c]=i.useState(t),[u,m]=i.useState(null),[p,b]=i.useState(null),v=[{type:"k",color:"b",icon:"â™š"},{type:"q",color:"b",icon:"â™›"},{type:"r",color:"b",icon:"â™œ"},{type:"b",color:"b",icon:"â™"},{type:"n",color:"b",icon:"â™ž"},{type:"p",color:"b",icon:"â™Ÿ"},{type:"k",color:"w",icon:"â™”"},{type:"q",color:"w",icon:"â™•"},{type:"r",color:"w",icon:"â™–"},{type:"b",color:"w",icon:"â™—"},{type:"n",color:"w",icon:"â™˜"},{type:"p",color:"w",icon:"â™™"}],x=i.useRef(null);i.useEffect(()=>{const S=N=>{if(!u||!r||!x.current)return;const h=x.current.getBoundingClientRect(),y=N.clientX-h.left,k=N.clientY-h.top;y>=0&&k>=0&&y<=h.width&&k<=h.height&&b({left:y,top:k})};return window.addEventListener("mousemove",S),()=>window.removeEventListener("mousemove",S)},[u,r]);const d=(S,N,h)=>{let y=o.split(" "),k=y[2]==="-"?"":y[2];N?k=(k+h).split("").sort().join(""):k=k.replace(h,""),y[2]=k||"-";const R=y.join(" ");try{n.load(R),c(R)}catch{_.error({message:"ÐžÑˆÐ¸Ð±ÐºÐ° Ñ€Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸",description:void 0})}},g=S=>{const[N,h]=[S.charCodeAt(0)-97,8-parseInt(S[1])],k=n.board()[h][N];if(u){k&&k.type===u.type&&k.color===u.color?n.remove(S):n.put(u,S),c(n.fen());return}k&&(n.remove(S),c(n.fen()))},j=()=>{n.clear(),c(n.fen()),_.success({message:"Ð”Ð¾ÑÐºÐ° Ð¾Ñ‡Ð¸Ñ‰ÐµÐ½Ð°!",description:void 0})},w=()=>{n.reset(),c(n.fen()),_.success({message:"Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð° Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ!",description:void 0})},F=()=>{m(null),b(null)},A=()=>{if(o.split("").filter(N=>N.toLowerCase()==="k").length<2){_.error({message:"ÐÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ",description:"ÐÐ° Ð´Ð¾ÑÐºÐµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ ÐºÐ°Ðº Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ Ð´Ð²Ð° ÐºÐ¾Ñ€Ð¾Ð»Ñ."});return}try{n.load(o),_.success({message:"ÐŸÐ¾Ð·Ð¸Ñ†Ð¸Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð°",description:`FEN: ${o}`})}catch{_.error({message:"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ",description:"ÐÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð°Ñ FEN-Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ"})}};return e.jsxs(B,{children:[e.jsx(l,{variant:"h4",gutterBottom:!0,children:"Ð ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€ ÑˆÐ°Ñ…Ð¼Ð°Ñ‚Ð½Ð¾Ð¹ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸"}),e.jsxs(f,{display:"flex",children:[e.jsxs(f,{onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),style:{cursor:u?"none":"default",position:"relative",width:500,height:500},children:[e.jsx(Tr,{position:o,onSquareClick:g,boardWidth:500}),p&&u&&e.jsx("div",{style:{...p,position:"absolute",pointerEvents:"none",left:p.left,top:p.top,fontSize:"32px",zIndex:1e3},children:u.icon})]}),e.jsxs(f,{ml:3,display:"flex",flexDirection:"column",children:[e.jsxs(M,{elevation:3,style:{padding:"10px",marginBottom:"20px"},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Ð¤Ð¸Ð³ÑƒÑ€Ñ‹"}),e.jsx(f,{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:1,children:v.map((S,N)=>e.jsx(f,{onClick:()=>m(S),style:{textAlign:"center",cursor:"pointer",padding:6,border:"1px solid #aaa",borderRadius:4,fontSize:24,backgroundColor:u===S?"#1976d2":"#f5f5f5",color:u===S?"#fff":"inherit"},children:S.icon},N))})]}),e.jsxs(M,{elevation:3,style:{padding:"10px",marginBottom:"20px"},children:[e.jsx(l,{variant:"h6",children:"Ð Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ°"}),e.jsxs(yt,{row:!0,children:[e.jsx(oe,{control:e.jsx(ke,{checked:o.includes("K"),onChange:S=>d(o,S.target.checked,"K")}),label:"Ð‘ÐµÐ»Ñ‹Ðµ 0-0"}),e.jsx(oe,{control:e.jsx(ke,{checked:o.includes("Q"),onChange:S=>d(o,S.target.checked,"Q")}),label:"Ð‘ÐµÐ»Ñ‹Ðµ 0-0-0"}),e.jsx(oe,{control:e.jsx(ke,{checked:o.includes("k"),onChange:S=>d(o,S.target.checked,"k")}),label:"Ð§Ñ‘Ñ€Ð½Ñ‹Ðµ 0-0"}),e.jsx(oe,{control:e.jsx(ke,{checked:o.includes("q"),onChange:S=>d(o,S.target.checked,"q")}),label:"Ð§Ñ‘Ñ€Ð½Ñ‹Ðµ 0-0-0"})]})]}),e.jsxs(M,{elevation:3,style:{padding:"10px"},children:[e.jsx(l,{variant:"h6",children:"Ð¥Ð¾Ð´"}),e.jsxs(St,{row:!0,value:n.turn(),onChange:S=>{const N=o.split(" ");N[1]=S.target.value;const h=N.join(" ");try{n.load(h),c(h)}catch{_.error({message:"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ñ…Ð¾Ð´Ð°",description:void 0})}},children:[e.jsx(oe,{value:"w",control:e.jsx(Ge,{}),label:"Ð‘ÐµÐ»Ñ‹Ðµ"}),e.jsx(oe,{value:"b",control:e.jsx(Ge,{}),label:"Ð§Ñ‘Ñ€Ð½Ñ‹Ðµ"})]})]})]})]}),e.jsxs(W,{direction:"row",spacing:2,mt:3,children:[e.jsx(C,{variant:"contained",onClick:j,children:"ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÐºÑƒ"}),e.jsx(C,{variant:"contained",onClick:w,children:"ÐÐ°Ñ‡Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ"}),e.jsx(C,{variant:"contained",onClick:F,children:"Ð£Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ð¸Ð³ÑƒÑ€Ñƒ"}),e.jsx(C,{variant:"contained",color:"primary",onClick:A,children:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"})]}),e.jsx(L,{label:"FEN",value:o,fullWidth:!0,multiline:!0,rows:2,onChange:S=>{const N=S.target.value;try{n.load(N),c(N)}catch{_.error({message:"ÐÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ FEN",description:void 0})}},style:{marginTop:20}}),p&&u&&e.jsx("div",{style:p,children:u.icon})]})},Lr=async s=>(await D.get("/auth/check-verification",{params:{email:s}})).data,zr=async s=>(await D.post("/auth/resend-verification",{email:s})).data,$r=()=>{const s=he(),t=Me(),{t:r}=$(),{firstName:a,lastName:n,email:o}=t.state||{},[c,u]=i.useState(!1),[m,p]=i.useState(!0),[b,v]=i.useState(null),[x,d]=i.useState(null),[g,j]=i.useState(!1),w=i.useRef(null);i.useEffect(()=>{if(!o){console.error("Email not found in location state. Redirecting to register."),s("/register");return}return w.current=setInterval(async()=>{try{const{emailVerified:A}=await Lr(o);A&&(p(!1),s("/login",{state:{message:r("verifyEmail.verifiedAndReadyToLogin")}}))}catch(A){console.error("Polling error:",A)}},5e3),()=>{w.current&&clearInterval(w.current)}},[o,s,r]);const F=async()=>{var A;if(o){u(!0),v(null),d(null);try{await zr(o),v(r("verifyEmail.resendSuccess")),j(!0),setTimeout(()=>j(!1),12e4)}catch(S){((A=S.response)==null?void 0:A.status)===429?d(r("verifyEmail.resendErrorTooMany")):d(r("verifyEmail.resendError"))}finally{u(!1)}}};return e.jsxs(f,{textAlign:"center",mt:5,p:2,children:[m&&e.jsx(te,{sx:{mb:2}}),e.jsx(l,{variant:"h4",gutterBottom:!0,children:r("verifyEmail.pageTitle")}),e.jsx(l,{variant:"body1",gutterBottom:!0,children:e.jsx("b",{children:r("verifyEmail.greeting",{firstName:a||"",lastName:n||""})})}),e.jsx(l,{variant:"body1",gutterBottom:!0,children:r("verifyEmail.sentTo",{email:o||r("verifyEmail.yourEmail")})}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{mt:2,maxWidth:"600px",mx:"auto"},children:r("verifyEmail.instruction")}),b&&!x&&e.jsx(l,{variant:"body2",color:"primary.main",sx:{mt:2,fontWeight:"bold"},children:b}),x&&e.jsx(l,{variant:"body2",color:"error",sx:{mt:2,fontWeight:"bold"},children:x}),e.jsx(C,{variant:"contained",color:"primary",onClick:F,disabled:g||c,sx:{mt:3,mb:2},children:r(c?"verifyEmail.sending":"verifyEmail.resendButton")}),e.jsx(l,{variant:"caption",display:"block",children:r("verifyEmail.didNotReceive")})]})},Br=async()=>(await D.get("/trainer/requests",{})).data,Hr=async(s,t)=>{await D.patch(`/trainer/request?request_id=${s}`,{status:t})},Or=async(s,t,r)=>(await D.post("/trainer/request",{coachId:s,experience:t,goals:r})).data,Ne={"& .MuiInputBase-root":{backgroundColor:"rgba(255, 255, 255, 0.08)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.12)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.6)"},"& .MuiInputBase-input":{color:"white"},"& .MuiSelect-icon":{color:"rgba(255, 255, 255, 0.6)"}},qr=()=>{var X,H,ue;const{t:s}=$(),[t,r]=i.useState([]),[a,n]=i.useState(null),[o,c]=i.useState(""),[u,m]=i.useState(!1),[p,b]=i.useState(!1),[v,x]=i.useState(!1),[d,g]=i.useState(!1),j=localStorage.getItem("email"),[w,F]=i.useState({userName:"",userEmail:"",experienceLevel:"Intermediate",goals:""}),[A,S]=i.useState({title:"",experience:"",bio:"",price:"",services:""});i.useEffect(()=>{(async()=>{try{const P=await Zt();r(P)}catch{_.error({message:s("coaches.fetchError"),description:void 0})}})()},[s]);const N=I=>{var P,q,T,re,Q,Z;n(I),m(!0),x(!1),g(!1),S({title:((P=I.coachProfile)==null?void 0:P.title)||"",experience:((q=I.coachProfile)==null?void 0:q.experience)||"",bio:((T=I.coachProfile)==null?void 0:T.bio)||"",price:((Q=(re=I.coachProfile)==null?void 0:re.price)==null?void 0:Q.toString())||"",services:(((Z=I.coachProfile)==null?void 0:Z.services)||[]).join(", ")})},h=()=>{m(!1),setTimeout(()=>{n(null),x(!1),g(!1),F({userName:"",userEmail:"",experienceLevel:"Intermediate",goals:""})},300)},y=async()=>{if(a)try{b(!0),await Or(a._id,w.experienceLevel,w.goals),_.success({message:s("coaches.successMessage"),description:void 0}),h()}catch{_.error({message:s("coaches.submitError"),description:void 0})}finally{b(!1)}},k=async()=>{console.log("Saving profile:",A),_.success({message:s("coaches.updated"),description:void 0}),h()},R=t.filter(I=>`${I.firstName} ${I.lastName}`.toLowerCase().includes(o.toLowerCase())),O=a?`${a.firstName} ${a.lastName}`:"";return e.jsx(f,{sx:{bgcolor:"#0e0e0e",color:"white",minHeight:"100vh",py:8},children:e.jsxs(B,{maxWidth:"lg",children:[e.jsxs(f,{sx:{textAlign:"center",mb:8},children:[e.jsx(l,{variant:"h2",component:"h1",fontWeight:"bold",children:s("coaches.title")}),e.jsx(l,{variant:"h6",sx:{mt:1,color:"rgba(255, 255, 255, 0.7)"},children:s("coaches.subtitle")})]}),e.jsx(f,{sx:{mb:5,maxWidth:"600px",mx:"auto"},children:e.jsx(L,{fullWidth:!0,variant:"outlined",placeholder:s("coaches.searchByName"),value:o,onChange:I=>c(I.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"30px",backgroundColor:"#1c1c1c","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"#FFD700"},"&.Mui-focused fieldset":{borderColor:"#FFD700"}},"& .MuiInputBase-input":{color:"white"}},InputProps:{startAdornment:e.jsx(wt,{position:"start",children:e.jsx(Ct,{sx:{color:"rgba(255, 255, 255, 0.5)"}})})}})}),e.jsx(E,{container:!0,spacing:4,children:R.map(I=>{var P,q,T;return e.jsx(E,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(ps,{sx:{bgcolor:"#1c1c1c",color:"white",borderRadius:4,height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-8px)",boxShadow:"0 12px 24px rgba(255, 215, 0, 0.2)"}},children:[e.jsx(fs,{component:"img",height:"250",image:I.photoUrl||"/images/default-avatar.png",alt:`${I.firstName} ${I.lastName}`}),e.jsxs(js,{sx:{flexGrow:1},children:[e.jsxs(l,{variant:"h5",component:"div",fontWeight:"bold",children:[I.firstName," ",I.lastName]}),e.jsx(l,{variant:"body1",sx:{color:"#FFD700",mb:2},children:((P=I.coachProfile)==null?void 0:P.title)||"Chess Master"}),e.jsxs(W,{spacing:1,children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",color:"rgba(255,255,255,0.7)"},children:[e.jsx(kt,{fontSize:"small",sx:{mr:1}}),e.jsx(l,{variant:"body2",children:((q=I.coachProfile)==null?void 0:q.experience)||"N/A"})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",color:"rgba(255,255,255,0.7)"},children:[e.jsx(It,{fontSize:"small",sx:{mr:1}}),e.jsx(l,{variant:"body2",children:(T=I.coachProfile)!=null&&T.price?`${I.coachProfile.price}$ / hour`:"Contact for price"})]})]})]}),e.jsx(f,{sx:{p:2,pt:0},children:e.jsx(C,{variant:"contained",fullWidth:!0,onClick:()=>N(I),sx:{backgroundColor:"#FFD700",color:"black",fontWeight:"bold",borderRadius:"20px","&:hover":{backgroundColor:"#FFC107"}},children:s("coaches.viewProfile")})})]})},I._id)})}),e.jsx(ie,{open:u,onClose:h,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{bgcolor:"#1c1c1c",color:"white",borderRadius:4,backgroundImage:"none"}},children:a&&e.jsxs(e.Fragment,{children:[e.jsx(le,{sx:{p:3,pb:1},children:e.jsxs(W,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(l,{variant:"h5",fontWeight:"bold",children:d?s("coaches.editProfile"):s("coaches.profileOf",{coachName:O})}),e.jsx(G,{onClick:h,sx:{color:"rgba(255,255,255,0.7)"},children:e.jsx(ks,{})})]})}),e.jsx(ce,{children:d?e.jsx(W,{spacing:2,sx:{pt:1}}):e.jsxs(e.Fragment,{children:[e.jsxs(E,{container:!0,spacing:4,sx:{pt:1},children:[e.jsx(E,{item:!0,xs:12,md:4,children:e.jsx(Le,{src:a.photoUrl||"/images/default-avatar.png",sx:{width:"100%",height:"auto",aspectRatio:"1 / 1",borderRadius:3},variant:"rounded"})}),e.jsx(E,{item:!0,xs:12,md:8,children:e.jsxs(W,{spacing:2.5,children:[e.jsxs(f,{children:[e.jsx(l,{fontWeight:"bold",color:"#FFD700",children:s("coaches.bio")}),e.jsx(l,{sx:{color:"rgba(255,255,255,0.8)",whiteSpace:"pre-wrap"},children:((X=a.coachProfile)==null?void 0:X.bio)||e.jsx("span",{style:{color:"rgba(255,255,255,0.5)",fontStyle:"italic"},children:"No bio provided."})})]}),e.jsxs(f,{children:[e.jsx(l,{fontWeight:"bold",color:"#FFD700",children:s("coaches.services")}),e.jsx(f,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:(ue=(H=a.coachProfile)==null?void 0:H.services)!=null&&ue.length?a.coachProfile.services.map(I=>e.jsx(je,{label:I,sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white"}},I)):e.jsx(l,{sx:{color:"rgba(255,255,255,0.5)",fontStyle:"italic"},children:"No services listed."})})]})]})})]}),e.jsx(J,{sx:{my:3,borderColor:"rgba(255,255,255,0.2)"}}),e.jsx(f,{children:v?e.jsxs(M,{elevation:0,sx:{p:{xs:2,sm:3},bgcolor:"rgba(0,0,0,0.25)",borderRadius:2},children:[e.jsx(l,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:s("coaches.requestTitle",{coachName:O})}),e.jsxs(W,{spacing:2,children:[e.jsx(L,{fullWidth:!0,label:s("coaches.yourName"),value:w.userName,onChange:I=>F({...w,userName:I.target.value}),variant:"filled",sx:Ne}),e.jsx(L,{fullWidth:!0,label:s("coaches.yourEmail"),value:w.userEmail,onChange:I=>F({...w,userEmail:I.target.value}),variant:"filled",sx:Ne}),e.jsxs($e,{fullWidth:!0,variant:"filled",sx:Ne,children:[e.jsx(Be,{id:"level-select-label",children:s("coaches.level")}),e.jsxs(Fe,{labelId:"level-select-label",value:w.experienceLevel,onChange:I=>F({...w,experienceLevel:I.target.value}),children:[e.jsx(V,{value:"Beginner",children:s("coaches.levelBeginner")}),e.jsx(V,{value:"Intermediate",children:s("coaches.levelIntermediate")}),e.jsx(V,{value:"Advanced",children:s("coaches.levelAdvanced")})]})]}),e.jsx(L,{fullWidth:!0,multiline:!0,rows:3,label:s("coaches.goals"),value:w.goals,onChange:I=>F({...w,goals:I.target.value}),variant:"filled",sx:Ne})]})]}):e.jsx(C,{fullWidth:!0,variant:"outlined",onClick:()=>x(!0),sx:{color:"#FFD700",borderColor:"#FFD700","&:hover":{borderColor:"#FFC107",bgcolor:"rgba(255, 215, 0, 0.1)"}},children:s("coaches.requestTitle",{coachName:a.firstName})})})]})}),e.jsx(de,{sx:{p:3,pt:2},children:d?e.jsxs(e.Fragment,{children:[e.jsx(C,{onClick:()=>g(!1),sx:{color:"rgba(255,255,255,0.7)"},children:s("coaches.cancel")}),e.jsx(C,{variant:"contained",onClick:k,startIcon:e.jsx(_e,{}),sx:{bgcolor:"#FFD700",color:"black","&:hover":{bgcolor:"#FFC107"}},children:s("coaches.save")})]}):v?e.jsxs(e.Fragment,{children:[e.jsx(C,{variant:"outlined",onClick:()=>x(!1),sx:{color:"rgba(255,255,255,0.7)",borderColor:"rgba(255,255,255,0.3)"},children:s("coaches.cancel")}),e.jsx(C,{variant:"contained",onClick:y,disabled:p,startIcon:e.jsx(bs,{}),sx:{bgcolor:"#FFD700",color:"black","&:hover":{bgcolor:"#FFC107"}},children:s("coaches.sendRequest")})]}):a.email===j&&e.jsx(C,{variant:"text",onClick:()=>g(!0),startIcon:e.jsx(_e,{}),sx:{color:"#FFD700"},children:s("coaches.editProfile")})})]})})]})})},ve=s=>"createdAt"in s,Ur=()=>{const{t:s}=$(),[t,r]=i.useState("requests"),[a,n]=i.useState([]),[o,c]=i.useState(null),[u,m]=i.useState(!0),[p,b]=i.useState(""),[v,x]=i.useState(!1),[d,g]=i.useState(null),[j,w]=i.useState(!1),F=i.useCallback(async h=>{m(!0),c(null);try{const y=h==="requests"?await Br():await gr();n(Array.isArray(y)?y:[])}catch(y){console.error(`Error loading ${h}:`,y),_.error({message:s("inbox.errors.loadFailed"),description:void 0})}finally{m(!1)}},[s]);i.useEffect(()=>{F(t)},[t,F]),i.useEffect(()=>{let h=null;return(async()=>{if(!o||ve(o)||!o.hasScreenshot){g(null);return}w(!0);try{const k=await pr(o._id);h=URL.createObjectURL(k),g(h)}catch(k){console.error("Screenshot load error:",k),_.error({message:s("inbox.errors.loadScreenshotFailed"),description:void 0})}finally{w(!1)}})(),b(""),()=>{h&&URL.revokeObjectURL(h)}},[o,s]);const A=async h=>{if(!(!o||!ve(o))){x(!0);try{await Hr(o._id,h),_.success({message:s("inbox.success.requestHandled",{action:s(h==="approved"?"inbox.success.actions.approved":"inbox.success.actions.rejected")}),description:void 0}),await F("requests")}catch(y){console.error("Error handling request:",y),_.error({message:s("inbox.errors.handleRequestFailed"),description:void 0})}finally{x(!1)}}},S=async h=>{if(!(!o||ve(o))){x(!0);try{await xr(o._id,{status:h,comment:p}),_.success({message:s("inbox.success.homeworkReviewed"),description:void 0}),await F("homework")}catch(y){console.error("Error reviewing homework:",y),_.error({message:s("inbox.errors.reviewHomeworkFailed"),description:void 0})}finally{x(!1)}}},N=()=>{var h;return u&&!o?null:o?ve(o)?e.jsxs(e.Fragment,{children:[e.jsxs(l,{variant:"h6",children:[o.student.firstName," ",o.student.lastName]}),e.jsxs(l,{children:[s("inbox.details.email"),": ",o.student.email]}),e.jsxs(l,{children:[s("inbox.details.sent"),": ",new Date(o.createdAt).toLocaleString()]}),e.jsx(J,{sx:{my:2}}),e.jsxs(l,{children:[e.jsxs("strong",{children:[s("inbox.details.experience"),":"]})," ",o.experience||s("inbox.details.notSpecified")]}),e.jsxs(l,{children:[e.jsxs("strong",{children:[s("inbox.details.goals"),":"]})," ",o.goals||s("inbox.details.notSpecified")]}),e.jsxs(f,{mt:3,display:"flex",gap:2,children:[e.jsx(C,{variant:"contained",color:"primary",onClick:()=>A("approved"),disabled:v||o.status!=="pending",children:s("inbox.actions.approve")}),e.jsx(C,{variant:"contained",color:"secondary",onClick:()=>A("rejected"),disabled:v||o.status!=="pending",children:s("inbox.actions.reject")})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"h5",gutterBottom:!0,children:((h=o.schedule)==null?void 0:h.title)||s("inbox.list.untitled")}),e.jsxs(l,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:[s("inbox.details.student"),": ",o.student.firstName," ",o.student.lastName]}),e.jsx(J,{sx:{my:2}}),o.text&&e.jsxs(f,{mb:2,children:[e.jsxs(l,{variant:"h6",children:[s("inbox.details.responseText"),":"]}),e.jsx(l,{sx:{whiteSpace:"pre-wrap",p:1,bgcolor:"action.hover",borderRadius:1},children:o.text})]}),o.hasScreenshot&&e.jsxs(f,{mb:2,children:[e.jsxs(l,{variant:"h6",children:[s("inbox.details.screenshot"),":"]}),j&&e.jsxs(f,{sx:{display:"flex",alignItems:"center",my:2},children:[e.jsx(te,{size:24,sx:{mr:2}})," ",s("inbox.loading")]}),d&&!j&&e.jsx(Se,{href:d,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:d,alt:s("inbox.details.screenshotAlt"),style:{maxWidth:"100%",height:"auto",borderRadius:"8px",border:"1px solid #ddd",display:"block",cursor:"pointer"}})})]}),e.jsx(J,{sx:{my:2}}),e.jsxs(l,{variant:"h6",children:[s("inbox.details.feedback"),":"]}),e.jsx(L,{fullWidth:!0,multiline:!0,rows:4,label:s("inbox.details.commentLabel"),value:p,onChange:y=>b(y.target.value),margin:"normal",disabled:v}),e.jsxs(f,{mt:2,display:"flex",gap:2,children:[e.jsx(C,{variant:"contained",color:"success",onClick:()=>S("approved"),disabled:v,children:s("inbox.actions.approve")}),e.jsx(C,{variant:"contained",color:"error",onClick:()=>S("rejected"),disabled:v,children:s("inbox.actions.sendForRevision")})]})]}):e.jsx(l,{color:"text.secondary",children:s("inbox.selectItemPrompt")})};return e.jsxs(B,{sx:{py:4},children:[e.jsx(l,{variant:"h4",gutterBottom:!0,children:s("inbox.title")}),e.jsx(f,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:e.jsxs(ys,{value:t,onChange:(h,y)=>r(y),"aria-label":"inbox tabs",children:[e.jsx(ye,{label:s("inbox.tabs.requests"),value:"requests"}),e.jsx(ye,{label:s("inbox.tabs.homework"),value:"homework"})]})}),e.jsxs(E,{container:!0,spacing:3,children:[e.jsx(E,{item:!0,xs:12,md:4,children:e.jsx(M,{style:{maxHeight:"80vh",overflow:"auto"},children:u?e.jsx(f,{sx:{display:"flex",justifyContent:"center",p:4},children:e.jsx(te,{})}):e.jsx(gs,{component:"nav",children:a.length>0?a.map(h=>{var y;return e.jsx(ee,{selected:(o==null?void 0:o._id)===h._id,onClick:()=>c(h),children:e.jsx(Y,{primaryTypographyProps:{style:{fontWeight:(o==null?void 0:o._id)===h._id?"bold":"normal"}},primary:h.student?`${h.student.firstName} ${h.student.lastName}`:s("inbox.unknownStudent","Unknown Student"),secondary:ve(h)?s("inbox.list.requestSecondary",{date:new Date(h.createdAt).toLocaleDateString()}):s("inbox.list.homeworkSecondary",{title:((y=h.schedule)==null?void 0:y.title)||s("inbox.list.untitled","Ð‘ÐµÐ· Ñ‚ÐµÐ¼Ñ‹")})})},h._id)}):e.jsx(l,{sx:{p:2,textAlign:"center"},children:s("inbox.empty")})})})}),e.jsx(E,{item:!0,xs:12,md:8,children:e.jsx(M,{style:{padding:24,minHeight:"50vh",display:"flex",flexDirection:"column"},children:N()})})]})]})},Yr=Es(K),Kr={individual_lesson:e.jsx(Is,{fontSize:"small"}),group_lesson:e.jsx(Ns,{fontSize:"small"}),homework:e.jsx(Ps,{fontSize:"small"}),opening_study:e.jsx(_s,{fontSize:"small"}),tournament_participation:e.jsx(Fs,{fontSize:"small"})},Gr=({event:s})=>{const t=Kr[s.type],r=`custom-event rbc-event--${s.type}`;return e.jsx(ze,{title:s.description||s.title,placement:"top",children:e.jsxs("div",{className:r,children:[t,e.jsx(l,{variant:"caption",noWrap:!0,component:"span",children:s.title})]})})},Vr=({events:s,onSelectEvent:t})=>{const r=i.useMemo(()=>s.map(a=>({...a,start:new Date(a.date),end:K(a.date).add(1,"hour").toDate()})),[s]);return e.jsx(M,{className:"schedule-paper",style:{height:"70vh",padding:"16px"},children:e.jsx(Ds,{localizer:Yr,events:r,startAccessor:"start",endAccessor:"end",views:["month","week","day","agenda"],components:{event:Gr},onSelectEvent:t,className:"schedule-calendar-standalone"})})},ds=5,fe={scheduled:{icon:e.jsx(pe,{fontSize:"small"}),color:"info",labelKey:"status.scheduled"},pending:{icon:e.jsx(pe,{fontSize:"small"}),color:"warning",labelKey:"status.pending"},completed:{icon:e.jsx(ae,{fontSize:"small"}),color:"success",labelKey:"status.completed"},approved:{icon:e.jsx(ae,{fontSize:"small"}),color:"success",labelKey:"status.approved"},rejected:{icon:e.jsx(Te,{fontSize:"small"}),color:"error",labelKey:"status.rejected"}},Jr=Object.keys(fe),Xr=({event:s,onSelect:t,t:r})=>{const a=s.status,n=fe[a]||fe.scheduled;return e.jsxs(M,{className:`event-card event-card--${n.color}`,onClick:()=>t(s),children:[e.jsxs(f,{className:"event-card__header",children:[e.jsx(l,{variant:"h6",className:"event-card__title",children:s.title}),e.jsx(je,{icon:n.icon,label:r(n.labelKey),color:n.color,size:"small"})]}),e.jsx(l,{variant:"body2",className:"event-card__date",children:K(s.date).format("MMMM Do, YYYY [at] HH:mm")}),s.description&&e.jsx(l,{variant:"body2",className:"event-card__description",children:s.description})]})},Qr=({events:s,onSelectEvent:t,t:r})=>e.jsx(f,{className:"event-list",children:s.length===0?e.jsx(M,{className:"event-list__empty",children:e.jsx(l,{children:r("studentSchedule.noEventsForDay")})}):s.map(a=>e.jsx(Xr,{event:a,onSelect:t,t:r},a._id))}),Zr=({statusFilters:s,onFilterChange:t,t:r})=>{const a=(n,o)=>t(o);return e.jsxs(M,{className:"event-controls",children:[e.jsxs(l,{variant:"button",className:"event-controls__label",children:[r("common.filterByStatus"),":"]}),e.jsx(Nt,{value:s,onChange:a,size:"small",children:Jr.map(n=>e.jsx(Pt,{value:n,className:"filter-toggle-button",children:r(fe[n].labelKey)},n))})]})},en=({event:s,open:t,onClose:r,onSendHomework:a,t:n})=>{const[o,c]=i.useState(""),[u,m]=i.useState(null),[p,b]=i.useState(!1);if(i.useEffect(()=>{t||(c(""),m(null),b(!1))},[t]),!s)return null;const v=j=>{var F;const w=(F=j.target.files)==null?void 0:F[0];if(w){if(w.size>ds*1024*1024){_.error({message:n("errors.fileTooLarge",{size:ds}),description:void 0});return}m(w)}},x=async()=>{if(!o.trim()&&!u){_.error({message:n("errors.emptyHomework"),description:void 0});return}b(!0);try{await a(o,u)}finally{b(!1)}},d=s.status,g=fe[d]||fe.scheduled;return e.jsxs(ie,{open:t,onClose:r,fullWidth:!0,maxWidth:"sm",className:"details-dialog",children:[e.jsx(le,{className:`details-dialog__header details-dialog__header--${g.color}`,children:n("studentSchedule.eventDetails")}),e.jsxs(ce,{className:"details-dialog__content",children:[e.jsxs(f,{className:"details-dialog__info",children:[e.jsx(l,{variant:"h6",className:"details-dialog__title",children:s.title}),e.jsx(je,{icon:g.icon,label:n(g.labelKey),color:g.color,size:"small"})]}),e.jsx(l,{variant:"body2",children:K(s.date).format("dddd, MMMM Do, YYYY [at] HH:mm")}),s.description&&e.jsx(l,{variant:"body1",sx:{mt:2},children:s.description}),s.link&&e.jsxs(l,{variant:"body2",sx:{mt:1},children:[n("studentSchedule.form_link"),": ",e.jsx(Se,{href:s.link,target:"_blank",rel:"noopener noreferrer",children:s.link})]}),s.type==="homework"&&e.jsxs(f,{className:"homework-form",children:[e.jsx(l,{variant:"h6",className:"homework-form__title",children:n("studentSchedule.sendHomeworkTitle")}),e.jsx(L,{label:n("studentSchedule.form_description"),fullWidth:!0,multiline:!0,rows:4,value:o,onChange:j=>c(j.target.value),variant:"filled",disabled:p}),e.jsxs(C,{variant:"outlined",component:"label",startIcon:e.jsx(vs,{}),disabled:p,children:[u?u.name:n("studentSchedule.uploadScreenshot"),e.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:v})]})]})]}),e.jsxs(de,{className:"details-dialog__actions",children:[e.jsx(C,{onClick:r,disabled:p,children:n("common.close")}),s.type==="homework"&&e.jsx(C,{onClick:x,variant:"contained",color:"primary",disabled:p,children:n("studentSchedule.send")})]})]})},sn=()=>{const{t:s}=$(),[t,r]=i.useState([]),[a,n]=i.useState(!0),[o,c]=i.useState(null),[u,m]=i.useState([]);i.useEffect(()=>{(async()=>{const g=localStorage.getItem("user");let j=null;try{g&&g!=="undefined"&&g!=="null"&&(j=JSON.parse(g)._id)}catch(w){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¸Ð· localStorage:",w)}if(!j){n(!1),_.error({message:s("errors.userNotFound"),description:void 0});return}n(!0);try{const w=await He(j);r(w)}catch(w){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ Ñ€Ð°ÑÐ¿Ð¸ÑÐ°Ð½Ð¸Ñ:",w),_.error({message:s("errors.fetchSchedule"),description:void 0})}finally{n(!1)}})()},[s]);const p=d=>c(d),b=()=>c(null),v=async(d,g)=>{const j=localStorage.getItem("user"),w=j?JSON.parse(j)._id:null;if(!(!w||!o))try{await Ms({studentId:w,scheduleId:o._id,homeworkText:d.trim()?d:void 0,screenshot:g||void 0}),o.coach&&await Rs({recipient:o.coach,type:"homework_submission",content:`Ð£Ñ‡ÐµÐ½Ð¸Ðº Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ð» Ð´Ð¾Ð¼Ð°ÑˆÐ½ÐµÐµ Ð·Ð°Ð´Ð°Ð½Ð¸Ðµ Ð¿Ð¾ Ñ‚ÐµÐ¼Ðµ: "${o.title}"`,metadata:{scheduleId:o._id}}),_.success({message:s("studentSchedule.homeworkSentSuccess"),description:void 0}),b(),r(F=>F.map(A=>A._id===o._id?{...A,status:"pending"}:A))}catch(F){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ Ð”Ð—:",F),_.error({message:s("errors.sendHomework"),description:void 0})}},x=i.useMemo(()=>{let d=[...t];return u.length>0&&(d=d.filter(g=>u.includes(g.status))),d.sort((g,j)=>new Date(g.date).getTime()-new Date(j.date).getTime())},[t,u]);return e.jsxs(f,{className:"student-schedule-v2-page",children:[e.jsxs(B,{maxWidth:"lg",children:[e.jsx(l,{variant:"h4",component:"h1",className:"page-title",children:s("studentSchedule.myScheduleTitle")}),e.jsx(Vr,{events:x,onSelectEvent:p}),e.jsxs(f,{className:"list-controls-container",children:[e.jsx(l,{variant:"h5",component:"h2",children:s("studentSchedule.eventListTitle")}),e.jsx(Zr,{statusFilters:u,onFilterChange:m,t:s})]}),a?e.jsx(f,{className:"loader-container",children:e.jsx(te,{className:"loader"})}):e.jsx(Qr,{events:x,onSelectEvent:p,t:s})]}),e.jsx(en,{event:o,open:!!o,onClose:b,onSendHomework:v,t:s})]})},tn=()=>{const s=i.useContext(we);if(!s)throw new Error("GuestRoute must be used within an AuthProvider");const{isAuthenticated:t,user:r,loading:a}=s;return a?e.jsx(f,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(te,{})}):t&&r?e.jsx(ms,{to:`/profile/${r._id}`,replace:!0}):e.jsx(us,{})};function rn(){const s=Me(),r=["/login","/register"].includes(s.pathname);return e.jsxs(e.Fragment,{children:[e.jsx(_t,{}),!r&&e.jsx(Qt,{}),e.jsxs(Gs,{children:[e.jsx(z,{path:"/",element:e.jsx(ar,{})}),e.jsx(z,{path:"/about",element:e.jsx(ir,{})}),e.jsx(z,{path:"/achievements",element:e.jsx(lr,{})}),e.jsxs(z,{element:e.jsx(tn,{}),children:[e.jsx(z,{path:"/login",element:e.jsx(ss,{})}),e.jsx(z,{path:"/register",element:e.jsx(ss,{})})]}),e.jsx(z,{path:"/analysis",element:e.jsx(Wr,{})}),e.jsx(z,{path:"/verify-email",element:e.jsx($r,{})}),e.jsx(z,{path:"/coaches",element:e.jsx(qr,{})}),e.jsxs(z,{element:e.jsx(dr,{}),children:[e.jsx(z,{path:"/editor",element:e.jsx(cs,{})}),e.jsx(z,{path:"/profile",element:e.jsx(as,{})}),e.jsx(z,{path:"/profile/:userId",element:e.jsx(as,{})},s.pathname),e.jsx(z,{path:"/users",element:e.jsx(Cr,{})}),e.jsx(z,{path:"/students-shedule",element:e.jsx(sn,{})}),e.jsx(z,{path:"/students",element:e.jsx(Fr,{})}),e.jsx(z,{path:"/puzzle-editor",element:e.jsx(cs,{})}),e.jsx(z,{path:"/inbox",element:e.jsx(Ur,{})})]})]})]})}function nn(){return e.jsx(i.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(rn,{})})}const Ws=document.getElementById("root");if(!Ws)throw new Error("Failed to find the root element");const on=Bs.createRoot(Ws);on.render(e.jsx(i.StrictMode,{children:e.jsx(Vs,{children:e.jsx(Bt,{children:e.jsx(nn,{})})})}));
//# sourceMappingURL=index-BEzbqHjx.js.map
